import{a as C,r as n,j as e,H as S,b as d}from"./app-D-TNKEQL.js";import{A as O}from"./AuthenticatedLayout-PCqsYVxf.js";import{S as R}from"./Sidebar-Cg7Kwp5t.js";import D from"./ChangeRestdayList-FSLeHOtU.js";import E from"./ChangeRestdayForm-BmwEn8xW.js";import{y as r,L as A}from"./index-D8OgU6sH.js";/* empty css                      */import{R as L}from"./refresh-cw-BgXuErF8.js";import{P as q}from"./plus-DLMoKXB_.js";import{L as P}from"./list-filter-Cyyshytm.js";import"./ApplicationLogo-Cn-MbvX-.js";import"./Dropdown-BOoMuW7P.js";import"./transition-DeCEAfJ2.js";import"./search-DZDiwkir.js";import"./createLucideIcon-DEWnkTLV.js";import"./x-fQrOvEob.js";/* empty css                */import"./users-Cw0U-ZsC.js";import"./file-text-QjoOwKBJ.js";import"./calendar-DhTYrr3L.js";import"./ChangeRestdayStatusBadge-yzlpBzeH.js";import"./ChangeRestdayDetailModal-CAqm5-r8.js";import"./format-Bw_hER4B.js";import"./ChangeRestdayBulkActionModal-6LnKz2Hx.js";import"./ChangeRestdayForceApproveButton-Cnk6KXHA.js";import"./zap-1mqeF5Zv.js";import"./download-Dnq6PCPG.js";import"./clsx-B-dksMZM.js";const ce=()=>{const{props:h}=C(),{auth:u,flash:a={},userRoles:g={},changeOffs:x=[],employees:y=[],departments:b=[]}=h,[c,i]=n.useState(x),[l,f]=n.useState("create"),[j,m]=n.useState(!1);n.useEffect(()=>{a&&a.message&&r.success(a.message),a&&a.error&&r.error(a.error)},[a]);const v=o=>{d.post(route("change-off-schedules.store"),o,{onSuccess:s=>{s.props.changeOffs&&i(s.props.changeOffs),r.success("Change rest day requests created successfully")},onError:s=>{s&&typeof s=="object"?Object.keys(s).forEach(t=>{r.error(s[t])}):r.error("An error occurred while submitting form")}})},w=(o,s)=>{j||(m(!0),d.post(route("change-off-schedules.updateStatus",o),s,{preserveScroll:!0,onSuccess:t=>{t.props.changeOffs&&i(t.props.changeOffs),r.success("Change rest day status updated successfully"),m(!1)},onError:t=>{let p="An error occurred while updating status";t&&typeof t=="object"&&(p=Object.values(t).join(", ")),r.error(p),m(!1)}}))},N=o=>{confirm("Are you sure you want to delete this change rest day request?")&&d.delete(route("change-off-schedules.destroy",o),{preserveScroll:!0,onSuccess:s=>{s.props.changeOffs?i(s.props.changeOffs):i(c.filter(t=>t.id!==o)),r.success("Change rest day request deleted successfully")},onError:()=>r.error("Failed to delete change rest day request")})};return e.jsxs(O,{user:u.user,children:[e.jsx(S,{title:"Change Rest Day Management"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(R,{}),e.jsx("div",{className:"flex-1 p-8 ml-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:[e.jsx(L,{className:"inline-block w-7 h-7 mr-2 text-indigo-600"}),"Change Rest Day Management"]}),e.jsx("p",{className:"text-gray-600",children:"Manage employee rest day change requests"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{className:`${l==="create"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,onClick:()=>f("create"),children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"New Change Rest Day"]}),e.jsxs("button",{className:`${l==="list"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,onClick:()=>f("list"),children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"View Change Rest Days",e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:c.length})]})]})})}),l==="list"?e.jsx(D,{changeOffs:c,onStatusUpdate:w,onDelete:N,userRoles:g}):e.jsx(E,{employees:y,departments:b,onSubmit:v})]})})]})})]}),e.jsx(A,{position:"top-right",autoClose:3e3})]})};export{ce as default};
