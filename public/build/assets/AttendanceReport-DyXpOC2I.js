import{r as a,j as t,H as u}from"./app-7K62fd2B.js";import{A as g}from"./AuthenticatedLayout-DQzQmHv9.js";import{y as d,L as h}from"./index-DkMCAIk8.js";/* empty css                      */import{D as x}from"./download-DiYogtYp.js";import{F as b}from"./filter-XhO_ib2u.js";import"./ApplicationLogo-IpRttWhS.js";import"./Dropdown-Yo6Rw43S.js";import"./transition-Di9UDWSH.js";import"./search-BmV-knWW.js";import"./createLucideIcon-BK5csKvN.js";import"./x-4sBMcqny.js";import"./clsx-B-dksMZM.js";const B=({auth:w,departments:j=[],employees:y=[]})=>{const[S,n]=a.useState(!1),[_,c]=a.useState([]),[v,N]=a.useState(null),[E,D]=a.useState(!1),[A,F]=a.useState(!1),[r,o]=a.useState({start_date:"",end_date:"",department:"",employee_id:"",search:""}),[R,O]=a.useState({employee_id:"",attendance_date:"",time_in:"",time_out:"",status:"present",remarks:""});a.useEffect(()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),1);o(f=>({...f,start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0]}))},[]),a.useEffect(()=>{r.start_date&&r.end_date&&i()},[r.start_date,r.end_date]);const i=()=>{n(!0);const s=new URLSearchParams;Object.keys(r).forEach(e=>{r[e]&&s.append(e,r[e])}),fetch(`${route("attendance.report.data")}?${s.toString()}`).then(e=>e.json()).then(e=>{e.success?c(e.data):d.error("Failed to load attendance data"),n(!1)}).catch(e=>{console.error("Error fetching attendance data:",e),d.error("Error loading attendance data"),n(!1)})},l=s=>{s.preventDefault(),i()},m=()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),1);o({start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],department:"",employee_id:"",search:""})},p=()=>{const s=new URLSearchParams;Object.keys(r).forEach(e=>{r[e]&&s.append(e,r[e])}),window.location.href=`${route("attendance.report.export")}?${s.toString()}`};return t.jsxs(g,{children:[t.jsx(u,{title:"Attendance Report"}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Attendance Report"}),t.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:shadow-outline-gray transition ease-in-out duration-150",children:[t.jsx(x,{className:"w-4 h-4 mr-2"}),"Export"]})]}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:t.jsxs("form",{onSubmit:l,children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4"}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:m,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Reset"}),t.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.jsx(b,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})]})]})})]})})})}),t.jsx(h,{})]})};export{B as default};
