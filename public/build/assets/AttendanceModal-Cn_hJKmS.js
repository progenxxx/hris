import{r as u,j as e}from"./app-7K62fd2B.js";import{B as _}from"./Button-B-ixrUdq.js";import{X as p}from"./x-4sBMcqny.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-BK5csKvN.js";const j=({isOpen:d,onClose:l,title:t,children:a})=>d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s=>s.target===s.currentTarget&&l(),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t}),e.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Close modal",children:e.jsx(p,{className:"h-5 w-5"})})]}),a]})}):null,r=({label:d,name:l,type:t="text",value:a,onChange:s,disabled:i,className:m=""})=>e.jsxs("div",{className:m,children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:l,children:d}),e.jsx("input",{id:l,type:t,name:l,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:a,onChange:s,disabled:i})]}),S=({isOpen:d,onClose:l,attendance:t,mode:a="view",onSave:s})=>{const[i,m]=u.useState({idno:"",attendance_date:"",time_in:"",break_in:"",break_out:"",time_out:"",is_nightshift:!1,next_day_timeout:""});u.useEffect(()=>{var o;t&&m({...t,attendance_date:((o=t.attendance_date)==null?void 0:o.split("T")[0])||"",time_in:t.time_in?new Date(t.time_in).toISOString().slice(0,16):"",break_in:t.break_in?new Date(t.break_in).toISOString().slice(0,16):"",break_out:t.break_out?new Date(t.break_out).toISOString().slice(0,16):"",time_out:t.time_out?new Date(t.time_out).toISOString().slice(0,16):"",next_day_timeout:t.next_day_timeout?new Date(t.next_day_timeout).toISOString().slice(0,16):""})},[t]);const n=o=>{const{name:c,value:x,type:h,checked:g}=o.target;m(f=>({...f,[c]:h==="checkbox"?g:x}))},b=o=>{if(o.preventDefault(),a==="edit"&&s){const c={...i,attendance_date:i.attendance_date||null,time_in:i.time_in||null,break_in:i.break_in||null,break_out:i.break_out||null,time_out:i.time_out||null,next_day_timeout:i.next_day_timeout||null};s(c)}};return e.jsx(j,{isOpen:d,onClose:l,title:a==="view"?"View Attendance":"Edit Attendance",children:e.jsxs("form",{onSubmit:b,className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{label:"Employee ID",name:"idno",value:i.idno,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Date",name:"attendance_date",type:"date",value:i.attendance_date,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Time In",name:"time_in",type:"datetime-local",value:i.time_in,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Break In",name:"break_in",type:"datetime-local",value:i.break_in,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Break Out",name:"break_out",type:"datetime-local",value:i.break_out,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Time Out",name:"time_out",type:"datetime-local",value:i.time_out,onChange:n,disabled:a==="view"}),e.jsx(r,{label:"Next Day Timeout",name:"next_day_timeout",type:"datetime-local",value:i.next_day_timeout,onChange:n,disabled:a==="view"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_nightshift",id:"is_nightshift",className:"mr-2 h-4 w-4",checked:i.is_nightshift,onChange:n,disabled:a==="view"}),e.jsx("label",{htmlFor:"is_nightshift",className:"text-sm font-medium",children:"Night Shift"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(_,{variant:"secondary",type:"button",onClick:l,children:"Close"}),a==="edit"&&e.jsx(_,{type:"submit",children:"Save Changes"})]})]})})};export{S as default};
