import{r as n,j as e,H as pe}from"./app-7K62fd2B.js";import{A as me}from"./AuthenticatedLayout-DQzQmHv9.js";import{S as je,a as ge}from"./Sidebar-Bpho9Ubl.js";import{A as Q,a as ee}from"./alert-Cw6Swk3l.js";import{B as u}from"./Button-B-ixrUdq.js";import{C as M,a as fe,b as ue,c as E}from"./card-Bd2He_oM.js";import{Z as Y}from"./zap-B1geo600.js";import{R as k}from"./refresh-cw-DqcGqKqT.js";import{T as G}from"./triangle-alert-BFKAbd31.js";import{C as V}from"./circle-check-big-CdHds-fH.js";import{S as Ne}from"./search-BmV-knWW.js";import{U as be}from"./users-D-OfZtV9.js";import{C as ve}from"./calendar-CWo9dUpk.js";import{C as W}from"./clock-r6FcyLKi.js";import{D as te}from"./dollar-sign-kTFlta5J.js";import{A as ae}from"./award-Dw7d9LEK.js";import{F as le}from"./file-text-B0cEX_Vi.js";import{U as ne}from"./user-BKBpk05w.js";import{B as we}from"./building-D6co_3Ut.js";import{E as ye}from"./eye-j6hlzOf-.js";import{S as re}from"./square-pen-BeqsqNZt.js";import{C as _e}from"./check-BTfeYE2Q.js";import{X as J}from"./x-4sBMcqny.js";import{C as se}from"./calculator-NMlYC2-D.js";import{C as Se}from"./circle-alert-CGQbi50W.js";import"./ApplicationLogo-IpRttWhS.js";import"./Dropdown-Yo6Rw43S.js";import"./transition-Di9UDWSH.js";import"./createLucideIcon-BK5csKvN.js";/* empty css                */import"./clsx-B-dksMZM.js";const ke=({isOpen:F,onClose:s,filters:p,onGenerate:H})=>{const[C,y]=n.useState(!1),[f,T]=n.useState([]),[o,w]=n.useState([]),[x,D]=n.useState(!1),[l,b]=n.useState({include_benefits:!0,include_deductions:!0,force_regenerate:!1,auto_approve:!1});n.useEffect(()=>{F&&A()},[F,p]);const A=async()=>{y(!0);try{const a=new URLSearchParams;a.append("year",p.year),a.append("month",p.month),p.periodType&&a.append("period_type",p.periodType),p.department&&a.append("department",p.department),a.append("status","posted");const m=await(await fetch("/api/comprehensive-payroll-summaries/available-for-final-payroll?"+a.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();m.success?(T(m.data),w([]),D(!1)):alert(m.message||"Failed to load available summaries")}catch(a){console.error("Error loading available summaries:",a),alert("Failed to load available summaries")}finally{y(!1)}},_=()=>{w(x?[]:f.map(a=>a.id)),D(!x)},B=a=>{w(i=>i.includes(a)?i.filter(m=>m!==a):[...i,a])},L=async()=>{var a;if(o.length===0){alert("Please select at least one payroll summary to generate final payroll");return}y(!0);try{const m=await(await fetch("/final-payrolls/generate-from-summaries",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"),"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:JSON.stringify({summary_ids:o,...l,year:p.year,month:p.month,period_type:p.periodType,department:p.department})})).json();m.success?(H(m),s()):alert(m.message||"Failed to generate final payroll")}catch(i){console.error("Error generating final payroll:",i),alert("Failed to generate final payroll")}finally{y(!1)}},r=a=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(a||0);return F?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-6xl w-full mx-4 max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Y,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Generate Final Payroll"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",f.length," summaries available)"]})]}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:e.jsx(J,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Generation Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l.include_benefits,onChange:a=>b(i=>({...i,include_benefits:a.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include Benefits"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l.include_deductions,onChange:a=>b(i=>({...i,include_deductions:a.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include Deductions"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l.force_regenerate,onChange:a=>b(i=>({...i,force_regenerate:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Force Regenerate (overwrite existing)"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:l.auto_approve,onChange:a=>b(i=>({...i,auto_approve:a.target.checked})),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-approve generated payrolls"})]})]})]}),C?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(k,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading available summaries..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No summaries available"}),e.jsxs("p",{className:"text-gray-500",children:["All posted payroll summaries for this period already have final payrolls generated.",e.jsx("br",{}),'Enable "Force Regenerate" to recreate existing final payrolls.']})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:_,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Select All (",f.length," summaries)"]})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[o.length," selected"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Select"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT Hours"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Benefits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(a=>{var i,m;return e.jsxs("tr",{className:`hover:bg-blue-50 ${o.includes(a.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:o.includes(a.id),onChange:()=>B(a.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.employee_name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.employee_no})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{children:a.department}),e.jsx("div",{className:"text-xs text-gray-400",children:a.line})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:parseFloat(a.days_worked||0).toFixed(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:parseFloat(a.ot_hours||0).toFixed(2)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm text-red-600 font-medium",children:r(a.total_deductions)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm text-green-600 font-medium",children:r(a.total_benefits)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),((i=a.status)==null?void 0:i.charAt(0).toUpperCase())+((m=a.status)==null?void 0:m.slice(1))]})})]},a.id)})})]})}),o.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Generation Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),e.jsx("div",{className:"text-gray-600",children:"Employees"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.filter(a=>o.includes(a.id)).reduce((a,i)=>a+parseFloat(i.days_worked||0),0).toFixed(1)}),e.jsx("div",{className:"text-gray-600",children:"Total Days"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r(f.filter(a=>o.includes(a.id)).reduce((a,i)=>a+parseFloat(i.total_deductions||0),0))}),e.jsx("div",{className:"text-gray-600",children:"Total Deductions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(f.filter(a=>o.includes(a.id)).reduce((a,i)=>a+parseFloat(i.total_benefits||0),0))}),e.jsx("div",{className:"text-gray-600",children:"Total Benefits"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center border-t",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"This will generate final payroll records for the selected summaries"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(u,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(u,{onClick:L,disabled:C||o.length===0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:C?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Generate Final Payroll (",o.length,")"]})})]})]})]})}):null},Fe=({isOpen:F,summary:s,onClose:p,onUpdate:H})=>{var z,O;const[C,y]=n.useState(!1),[f,T]=n.useState(!1),[o,w]=n.useState({}),[x,D]=n.useState(null),[l,b]=n.useState(null),[A,_]=n.useState(!1);n.useEffect(()=>{F&&s&&(w({days_worked:s.days_worked||0,ot_hours:s.ot_hours||0,late_under_minutes:s.late_under_minutes||0,nsd_hours:s.nsd_hours||0,slvl_days:s.slvl_days||0,retro:s.retro||0,travel_order_hours:s.travel_order_hours||0,holiday_hours:s.holiday_hours||0,trip_count:s.trip_count||0,notes:s.notes||""}),B())},[F,s]);const B=async()=>{if(s){_(!0);try{const h=await fetch(`/api/payroll-summaries/${s.id}/benefits-details`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),g=await fetch(`/api/payroll-summaries/${s.id}/deductions-details`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(h.ok){const S=await h.json();D(S.data)}if(g.ok){const S=await g.json();b(S.data)}}catch(h){console.error("Error loading benefits and deductions details:",h)}finally{_(!1)}}},L=async()=>{var h;y(!0);try{const S=await(await fetch(`/comprehensive-payroll-summaries/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"),"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:JSON.stringify(o)})).json();S.success?(T(!1),H(),alert("Payroll summary updated successfully")):alert(S.message||"Failed to update payroll summary")}catch(g){console.error("Error updating summary:",g),alert("Failed to update payroll summary")}finally{y(!1)}},r=h=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(h||0),a=(h,g=2)=>parseFloat(h||0).toFixed(g),i=h=>h?(parseFloat(h)/60).toFixed(2):"0.00";if(!F)return null;const m=()=>{const h=l?parseFloat(l.advance||0)+parseFloat(l.charge_store||0)+parseFloat(l.charge||0)+parseFloat(l.meals||0)+parseFloat(l.miscellaneous||0)+parseFloat(l.other_deductions||0):0,g=parseFloat(s.sss_prem||0)+parseFloat(s.philhealth||0)+parseFloat(s.hmdf_prem||0),S=parseFloat(s.mf_loan||0)+parseFloat(s.sss_loan||0)+parseFloat(s.hmdf_loan||0);return h+g+S},U=()=>x?parseFloat(x.mf_shares||0)+parseFloat(x.allowances||0):0,c=m(),v=U(),j=v-c;return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-6xl w-full mx-4 max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Payroll Summary Details"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(s==null?void 0:s.status)==="posted"?"bg-green-100 text-green-800":(s==null?void 0:s.status)==="locked"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:((z=s==null?void 0:s.status)==null?void 0:z.charAt(0).toUpperCase())+((O=s==null?void 0:s.status)==null?void 0:O.slice(1))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(s==null?void 0:s.status)!=="locked"&&!f&&e.jsxs(u,{onClick:()=>T(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),"Edit"]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{onClick:L,disabled:C,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[C?e.jsx(k,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(_e,{className:"h-4 w-4 mr-1"}),"Save"]}),e.jsxs(u,{onClick:()=>T(!1),size:"sm",variant:"outline",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Cancel"]})]}),e.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:e.jsx(J,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),"Employee Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employee"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.employee_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.employee_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:s==null?void 0:s.department}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.line})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Period"}),e.jsx("p",{className:"text-gray-900",children:s==null?void 0:s.full_period}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Cost Center: ",(s==null?void 0:s.cost_center)||"N/A"]})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(se,{className:"h-5 w-5 mr-2"}),"Attendance Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a(s==null?void 0:s.days_worked,1)}),e.jsx("div",{className:"text-sm text-green-800",children:"Days Worked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:a(s==null?void 0:s.ot_hours)}),e.jsx("div",{className:"text-sm text-blue-800",children:"OT Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:i(s==null?void 0:s.late_under_minutes)}),e.jsx("div",{className:"text-sm text-orange-800",children:"Late/Under (Hrs)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:a(s==null?void 0:s.nsd_hours)}),e.jsx("div",{className:"text-sm text-purple-800",children:"NSD Hours"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2 text-red-600"}),"Deductions Details",A&&e.jsx(k,{className:"h-4 w-4 ml-2 animate-spin"})]}),A?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(k,{className:"h-6 w-6 animate-spin text-gray-400"})}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"General Deductions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Advance:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.advance)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Store Charge:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.charge_store)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"General Charge:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.charge)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Meals:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.meals)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Miscellaneous:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.miscellaneous)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Other Deductions:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(l.other_deductions)})]})]}),e.jsx("div",{className:"border-t border-red-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal (General):"}),e.jsx("span",{className:"text-red-600",children:r(parseFloat(l.advance||0)+parseFloat(l.charge_store||0)+parseFloat(l.charge||0)+parseFloat(l.meals||0)+parseFloat(l.miscellaneous||0)+parseFloat(l.other_deductions||0))})]})})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Government Deductions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SSS Premium:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.sss_prem)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"PhilHealth:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.philhealth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"HDMF Premium:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.hmdf_prem)})]})]}),e.jsx("div",{className:"border-t border-red-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal (Government):"}),e.jsx("span",{className:"text-red-600",children:r(parseFloat(s.sss_prem||0)+parseFloat(s.philhealth||0)+parseFloat(s.hmdf_prem||0))})]})})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Loans"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"MF Loan:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.mf_loan)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SSS Loan:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.sss_loan)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"HDMF Loan:"}),e.jsx("span",{className:"font-medium text-red-600",children:r(s.hmdf_loan)})]})]}),e.jsx("div",{className:"border-t border-red-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal (Loans):"}),e.jsx("span",{className:"text-red-600",children:r(parseFloat(s.mf_loan||0)+parseFloat(s.sss_loan||0)+parseFloat(s.hmdf_loan||0))})]})})]}),e.jsx("div",{className:"border-t-2 border-red-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsx("span",{className:"text-gray-800",children:"TOTAL DEDUCTIONS:"}),e.jsx("span",{className:"text-red-600",children:r(c)})]})}),l&&e.jsx("div",{className:"bg-gray-100 rounded p-2 mt-3",children:e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Status: ",l.is_posted?"Posted":"Draft"]}),l.date_posted&&e.jsxs("span",{children:["Posted: ",new Date(l.date_posted).toLocaleDateString()]})]})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No deduction data found for this period"})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 mr-2 text-green-600"}),"Benefits & Allowances Details",A&&e.jsx(k,{className:"h-4 w-4 ml-2 animate-spin"})]}),A?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(k,{className:"h-6 w-6 animate-spin text-gray-400"})}):x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Allowances & Benefits"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"MF Shares:"}),e.jsx("span",{className:"font-medium text-green-600",children:r(x.mf_shares)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Allowances:"}),e.jsx("span",{className:"font-medium text-green-600",children:r(x.allowances)})]})]}),e.jsx("div",{className:"border-t border-green-200 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal (Benefits):"}),e.jsx("span",{className:"text-green-600",children:r(parseFloat(x.mf_shares||0)+parseFloat(x.allowances||0))})]})})]}),e.jsx("div",{className:"border-t-2 border-green-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsx("span",{className:"text-gray-800",children:"TOTAL BENEFITS:"}),e.jsx("span",{className:"text-green-600",children:r(v)})]})}),e.jsx("div",{className:"bg-gray-100 rounded p-2 mt-3",children:e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Status: ",x.is_posted?"Posted":"Draft"]}),x.date_posted&&e.jsxs("span",{children:["Posted: ",new Date(x.date_posted).toLocaleDateString()]})]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-green-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"SLVL Days:"}),e.jsx("span",{className:"font-medium",children:a(s==null?void 0:s.slvl_days,1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Travel Order Hours:"}),e.jsx("span",{className:"font-medium",children:a(s==null?void 0:s.travel_order_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Holiday Hours:"}),e.jsx("span",{className:"font-medium",children:a(s==null?void 0:s.holiday_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trip Count:"}),e.jsx("span",{className:"font-medium",children:a(s==null?void 0:s.trip_count,1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Retro:"}),e.jsx("span",{className:"font-medium",children:r(s==null?void 0:s.retro)})]})]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No benefits data found for this period"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(se,{className:"h-5 w-5 mr-2 text-blue-600"}),"Grand Total Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r(c)}),e.jsx("div",{className:"text-sm text-red-800",children:"Total Deductions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(v)}),e.jsx("div",{className:"text-sm text-green-800",children:"Total Benefits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${j>=0?"text-blue-600":"text-red-600"}`,children:r(Math.abs(j))}),e.jsxs("div",{className:"text-sm text-blue-800",children:[j>=0?"Net Benefit":"Net Deduction",e.jsx("br",{}),"(Benefits - Deductions)"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Status Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has CT:"}),e.jsx("span",{className:s!=null&&s.has_ct?"text-green-600":"text-gray-400",children:s!=null&&s.has_ct?"âœ“ Yes":"âœ— No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has CS:"}),e.jsx("span",{className:s!=null&&s.has_cs?"text-green-600":"text-gray-400",children:s!=null&&s.has_cs?"âœ“ Yes":"âœ— No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has OB:"}),e.jsx("span",{className:s!=null&&s.has_ob?"text-green-600":"text-gray-400",children:s!=null&&s.has_ob?"âœ“ Yes":"âœ— No"})]})]}),(s==null?void 0:s.posted_at)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted At: "}),e.jsx("span",{className:"font-medium",children:new Date(s.posted_at).toLocaleString()})]}),(s==null?void 0:s.posted_by)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted By: "}),e.jsx("span",{className:"font-medium",children:s.posted_by.name})]})]})})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:e.jsx(u,{variant:"outline",onClick:p,children:"Close"})})]})})},ns=({auth:F})=>{const[s,p]=n.useState([]),[H,C]=n.useState(!1),[y,f]=n.useState(""),[T,o]=n.useState(""),[w,x]=n.useState(new Date().getFullYear()),[D,l]=n.useState(new Date().getMonth()+1),[b,A]=n.useState(""),[_,B]=n.useState(""),[L,r]=n.useState(""),[a,i]=n.useState(""),[m,U]=n.useState([]),[c,v]=n.useState(1),[j,z]=n.useState(1),[O,h]=n.useState(25),[g,S]=n.useState(null),[ie,K]=n.useState(null),[ce,q]=n.useState(!1),[de,Z]=n.useState(!1),X=async()=>{C(!0),f("");try{const t=new URLSearchParams;t.append("year",w),t.append("month",D),t.append("page",c),t.append("per_page",O),b&&t.append("period_type",b),_&&t.append("department",_),L&&t.append("status",L),a&&t.append("search",a);const d=await(await fetch("/api/comprehensive-payroll-summaries/list?"+t.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();d.success?(p(d.data),z(d.pagination.last_page),v(d.pagination.current_page),S(d.statistics),d.departments&&U(d.departments)):f("Failed to load payroll summaries")}catch(t){console.error("Error loading summaries:",t),f("Error loading payroll summaries: "+(t.message||"Unknown error"))}finally{C(!1)}},I=t=>{K(t),q(!0)},oe=()=>{X(),q(!1)},xe=t=>{o(`Successfully generated ${t.generated} final payroll records. ${t.skipped} records were skipped.`),setTimeout(()=>o(""),5e3),t.generated>0&&confirm("Final payroll generation completed. Would you like to view the final payroll page?")&&(window.location.href="/final-payroll")},P=t=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(t||0),R=(t,N=2)=>parseFloat(t||0).toFixed(N),he=t=>t?(parseFloat(t)/60).toFixed(2):"0.00";return n.useEffect(()=>{X()},[w,D,b,_,L,a,c]),e.jsxs(me,{user:F.user,children:[e.jsx(pe,{title:"Payroll Summaries"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(je,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Comprehensive Payroll Summaries"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"ðŸ’¡ Tip: Double-click any row to view detailed payroll information"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(u,{onClick:()=>Z(!0),size:"sm",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"FINAL PAYROLL"]}),e.jsxs(u,{onClick:X,size:"sm",variant:"outline",disabled:H,children:[H?e.jsx(k,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(k,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})]}),y&&e.jsxs(Q,{variant:"destructive",className:"mb-4",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),e.jsx(ee,{children:y})]}),T&&e.jsxs(Q,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(V,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx(ee,{className:"text-green-800",children:T})]}),e.jsxs(M,{className:"mb-4",children:[e.jsx(fe,{className:"pb-3",children:e.jsx(ue,{className:"text-lg",children:"Filters"})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or ID...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:a,onChange:t=>i(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("input",{type:"number",min:"2020",max:"2030",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w,onChange:t=>x(parseInt(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:D,onChange:t=>l(parseInt(t.target.value)),children:Array.from({length:12},(t,N)=>e.jsx("option",{value:N+1,children:new Date(2024,N,1).toLocaleString("default",{month:"long"})},N+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:b,onChange:t=>A(t.target.value),children:[e.jsx("option",{value:"",children:"All Periods"}),e.jsx("option",{value:"1st_half",children:"1st Half (1-15)"}),e.jsx("option",{value:"2nd_half",children:"2nd Half (16-30/31)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:_,onChange:t=>B(t.target.value),children:[e.jsx("option",{value:"",children:"All Departments"}),m.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:L,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"posted",children:"Posted"}),e.jsx("option",{value:"locked",children:"Locked"})]})]})]})})]}),g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsx(M,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Summaries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.total_summaries||0})]})]})})}),e.jsx(M,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R(g.total_days_worked,1)})]})]})})}),e.jsx(M,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total OT Hours"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R(g.total_ot_hours)})]})]})})}),e.jsx(M,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Deductions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P(g.total_deductions)})]})]})})}),e.jsx(M,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Benefits"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P(g.total_benefits)})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[H?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(k,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No payroll summaries found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or generate summaries from attendance data."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT Hrs"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Late/Under"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NSD"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SLVL"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Benefits"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>{var N,d;return e.jsxs("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onDoubleClick:()=>I(t),title:"Double-click to view detailed information",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(ne,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.employee_name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.employee_no})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.department}),e.jsx("div",{className:"text-xs text-gray-500",children:t.line}),e.jsx("div",{className:"text-xs text-gray-400",children:t.cost_center})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.full_period}),e.jsx("div",{className:"text-xs",children:t.period_type==="1st_half"?"1-15":"16-30/31"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:R(t.days_worked,1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:R(t.ot_hours)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(W,{className:"h-3 w-3 text-red-500"}),e.jsxs("span",{className:"text-sm text-red-600 font-medium",children:[he(t.late_under_minutes),"h"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:R(t.nsd_hours)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:R(t.slvl_days,1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-red-600 font-medium",children:P(t.total_deductions)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["A:",P(t.advance)," | S:",P(t.charge_store)," | M:",P(t.meals)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-green-600 font-medium",children:P(t.total_benefits)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["MF:",P(t.mf_shares)," | All:",P(t.allowances)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${t.status==="posted"?"bg-green-100 text-green-800":t.status==="locked"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[t.status==="posted"&&e.jsx(V,{className:"h-3 w-3 mr-1"}),t.status==="locked"&&e.jsx(G,{className:"h-3 w-3 mr-1"}),t.status==="draft"&&e.jsx(W,{className:"h-3 w-3 mr-1"}),((N=t.status)==null?void 0:N.charAt(0).toUpperCase())+((d=t.status)==null?void 0:d.slice(1))]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-1",children:[e.jsx("button",{onClick:$=>{$.stopPropagation(),I(t)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:e.jsx(ye,{className:"h-4 w-4"})}),t.status!=="locked"&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:$=>{$.stopPropagation(),I(t)},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Edit",children:e.jsx(re,{className:"h-4 w-4"})})}),t.status==="posted"&&e.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-xs bg-blue-100 text-blue-800",title:"Ready for Final Payroll",children:e.jsx(ge,{className:"h-3 w-3"})})]})})]},t.id)})})]})}),j>1&&e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(u,{onClick:()=>v(Math.max(1,c-1)),disabled:c===1,variant:"outline",size:"sm",children:"Previous"}),e.jsx(u,{onClick:()=>v(Math.min(j,c+1)),disabled:c===j,variant:"outline",size:"sm",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:c})," of"," ",e.jsx("span",{className:"font-medium",children:j})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx(u,{onClick:()=>v(1),disabled:c===1,variant:"outline",size:"sm",className:"rounded-l-md",children:"First"}),e.jsx(u,{onClick:()=>v(Math.max(1,c-1)),disabled:c===1,variant:"outline",size:"sm",children:"Previous"}),Array.from({length:Math.min(5,j)},(t,N)=>{const d=c<=3?N+1:c>=j-2?j-4+N:c-2+N;return d>0&&d<=j?e.jsx(u,{onClick:()=>v(d),variant:c===d?"default":"outline",size:"sm",className:c===d?"bg-blue-500 text-white":"",children:d},d):null}),e.jsx(u,{onClick:()=>v(Math.min(j,c+1)),disabled:c===j,variant:"outline",size:"sm",children:"Next"}),e.jsx(u,{onClick:()=>v(j),disabled:c===j,variant:"outline",size:"sm",className:"rounded-r-md",children:"Last"})]})})]})]})]})]})})]}),e.jsx(Fe,{isOpen:ce,summary:ie,onClose:()=>{q(!1),K(null)},onUpdate:oe}),e.jsx(ke,{isOpen:de,onClose:()=>Z(!1),filters:{year:w,month:D,periodType:b,department:_},onGenerate:xe})]})};export{ns as default};
