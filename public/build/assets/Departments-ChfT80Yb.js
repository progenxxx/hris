import{r as I,a as ne,c as P,j as e,H as oe,R as le}from"./app-7K62fd2B.js";import{A as ce}from"./AuthenticatedLayout-DQzQmHv9.js";import{S as de}from"./Sidebar-Bpho9Ubl.js";import{B as G}from"./Button-B-ixrUdq.js";import"./lodash-DtN3SqvZ.js";import{M as me}from"./Modal-Cmmxf1Wx.js";import{C as ue}from"./ConfirmModal-C6XdrbgL.js";import{P as pe}from"./plus-DDuyej1g.js";import{B as he}from"./briefcase-4bxPV42K.js";import{C as fe}from"./circle-check-big-CdHds-fH.js";import{T as ie}from"./triangle-alert-BFKAbd31.js";import{X as ae}from"./x-4sBMcqny.js";import{E as ge}from"./eye-j6hlzOf-.js";import{S as xe}from"./square-pen-BeqsqNZt.js";import{T as ve,a as be}from"./toggle-right-Cbjyho4z.js";import{T as ye}from"./trash-2-CLTfogtc.js";import{S as we}from"./save-BqIq9Yvz.js";import{C as je}from"./check-BTfeYE2Q.js";import"./ApplicationLogo-IpRttWhS.js";import"./Dropdown-Yo6Rw43S.js";import"./transition-Di9UDWSH.js";import"./search-BmV-knWW.js";import"./createLucideIcon-BK5csKvN.js";/* empty css                */import"./users-D-OfZtV9.js";import"./file-text-B0cEX_Vi.js";import"./calendar-CWo9dUpk.js";import"./clsx-B-dksMZM.js";import"./index-DnL5dnpl.js";function X(){return X=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(s[o]=i[o])}return s},X.apply(null,arguments)}function Q(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Z(s,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},Z(s,t)}function Se(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Z(s,t)}var Y=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ne(s,t){return!!(s===t||Y(s)&&Y(t))}function Ce(s,t){if(s.length!==t.length)return!1;for(var i=0;i<s.length;i++)if(!Ne(s[i],t[i]))return!1;return!0}function H(s,t){t===void 0&&(t=Ce);var i,o=[],l,O=!1;function T(){for(var u=[],v=0;v<arguments.length;v++)u[v]=arguments[v];return O&&i===this&&t(u,o)||(l=s.apply(this,u),O=!0,i=this,o=u),l}return T}var Ie=typeof performance=="object"&&typeof performance.now=="function",ee=Ie?function(){return performance.now()}:function(){return Date.now()};function te(s){cancelAnimationFrame(s.id)}function Te(s,t){var i=ee();function o(){ee()-i>=t?s.call(null):l.id=requestAnimationFrame(o)}var l={id:requestAnimationFrame(o)};return l}var B=-1;function re(s){if(s===void 0&&(s=!1),B===-1||s){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),B=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return B}var A=null;function se(s){if(s===void 0&&(s=!1),A===null||s){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var o=document.createElement("div"),l=o.style;return l.width="100px",l.height="100px",t.appendChild(o),document.body.appendChild(t),t.scrollLeft>0?A="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?A="negative":A="positive-ascending"),document.body.removeChild(t),A}return A}var Oe=150,De=function(t,i){return t};function ke(s){var t,i=s.getItemOffset,o=s.getEstimatedTotalSize,l=s.getItemSize,O=s.getOffsetForIndexAndAlignment,T=s.getStartIndexForOffset,u=s.getStopIndexForStartIndex,v=s.initInstanceProps,b=s.shouldResetStyleCacheOnItemSizeChange,D=s.validateProps;return t=(function(y){Se(w,y);function w(C){var r;return r=y.call(this,C)||this,r._instanceProps=v(r.props,Q(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:Q(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof r.props.initialScrollOffset=="number"?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=H(function(n,a,c,p){return r.props.onItemsRendered({overscanStartIndex:n,overscanStopIndex:a,visibleStartIndex:c,visibleStopIndex:p})}),r._callOnScroll=void 0,r._callOnScroll=H(function(n,a,c){return r.props.onScroll({scrollDirection:n,scrollOffset:a,scrollUpdateWasRequested:c})}),r._getItemStyle=void 0,r._getItemStyle=function(n){var a=r.props,c=a.direction,p=a.itemSize,f=a.layout,d=r._getItemStyleCache(b&&p,b&&f,b&&c),h;if(d.hasOwnProperty(n))h=d[n];else{var S=i(r.props,n,r._instanceProps),_=l(r.props,n,r._instanceProps),z=c==="horizontal"||f==="horizontal",E=c==="rtl",M=z?S:0;d[n]=h={position:"absolute",left:E?void 0:M,right:E?M:void 0,top:z?0:S,height:z?"100%":_,width:z?_:"100%"}}return h},r._getItemStyleCache=void 0,r._getItemStyleCache=H(function(n,a,c){return{}}),r._onScrollHorizontal=function(n){var a=n.currentTarget,c=a.clientWidth,p=a.scrollLeft,f=a.scrollWidth;r.setState(function(d){if(d.scrollOffset===p)return null;var h=r.props.direction,S=p;if(h==="rtl")switch(se()){case"negative":S=-p;break;case"positive-descending":S=f-c-p;break}return S=Math.max(0,Math.min(S,f-c)),{isScrolling:!0,scrollDirection:d.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._onScrollVertical=function(n){var a=n.currentTarget,c=a.clientHeight,p=a.scrollHeight,f=a.scrollTop;r.setState(function(d){if(d.scrollOffset===f)return null;var h=Math.max(0,Math.min(f,p-c));return{isScrolling:!0,scrollDirection:d.scrollOffset<h?"forward":"backward",scrollOffset:h,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(n){var a=r.props.outerRef;r._outerRef=n,typeof a=="function"?a(n):a!=null&&typeof a=="object"&&a.hasOwnProperty("current")&&(a.current=n)},r._resetIsScrollingDebounced=function(){r._resetIsScrollingTimeoutId!==null&&te(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Te(r._resetIsScrolling,Oe)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1,null)})},r}w.getDerivedStateFromProps=function(r,n){return _e(r,n),D(r),null};var j=w.prototype;return j.scrollTo=function(r){r=Math.max(0,r),this.setState(function(n){return n.scrollOffset===r?null:{scrollDirection:n.scrollOffset<r?"forward":"backward",scrollOffset:r,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},j.scrollToItem=function(r,n){n===void 0&&(n="auto");var a=this.props,c=a.itemCount,p=a.layout,f=this.state.scrollOffset;r=Math.max(0,Math.min(r,c-1));var d=0;if(this._outerRef){var h=this._outerRef;p==="vertical"?d=h.scrollWidth>h.clientWidth?re():0:d=h.scrollHeight>h.clientHeight?re():0}this.scrollTo(O(this.props,r,n,f,this._instanceProps,d))},j.componentDidMount=function(){var r=this.props,n=r.direction,a=r.initialScrollOffset,c=r.layout;if(typeof a=="number"&&this._outerRef!=null){var p=this._outerRef;n==="horizontal"||c==="horizontal"?p.scrollLeft=a:p.scrollTop=a}this._callPropsCallbacks()},j.componentDidUpdate=function(){var r=this.props,n=r.direction,a=r.layout,c=this.state,p=c.scrollOffset,f=c.scrollUpdateWasRequested;if(f&&this._outerRef!=null){var d=this._outerRef;if(n==="horizontal"||a==="horizontal")if(n==="rtl")switch(se()){case"negative":d.scrollLeft=-p;break;case"positive-ascending":d.scrollLeft=p;break;default:var h=d.clientWidth,S=d.scrollWidth;d.scrollLeft=S-h-p;break}else d.scrollLeft=p;else d.scrollTop=p}this._callPropsCallbacks()},j.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&te(this._resetIsScrollingTimeoutId)},j.render=function(){var r=this.props,n=r.children,a=r.className,c=r.direction,p=r.height,f=r.innerRef,d=r.innerElementType,h=r.innerTagName,S=r.itemCount,_=r.itemData,z=r.itemKey,E=z===void 0?De:z,M=r.layout,k=r.outerElementType,$=r.outerTagName,F=r.style,q=r.useIsScrolling,U=r.width,L=this.state.isScrolling,R=c==="horizontal"||M==="horizontal",V=R?this._onScrollHorizontal:this._onScrollVertical,W=this._getRangeToRender(),m=W[0],g=W[1],x=[];if(S>0)for(var N=m;N<=g;N++)x.push(I.createElement(n,{data:_,key:E(N,_),index:N,isScrolling:q?L:void 0,style:this._getItemStyle(N)}));var J=o(this.props,this._instanceProps);return I.createElement(k||$||"div",{className:a,onScroll:V,ref:this._outerRefSetter,style:X({position:"relative",height:p,width:U,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:c},F)},I.createElement(d||h||"div",{children:x,ref:f,style:{height:R?"100%":J,pointerEvents:L?"none":void 0,width:R?J:"100%"}}))},j._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var r=this.props.itemCount;if(r>0){var n=this._getRangeToRender(),a=n[0],c=n[1],p=n[2],f=n[3];this._callOnItemsRendered(a,c,p,f)}}if(typeof this.props.onScroll=="function"){var d=this.state,h=d.scrollDirection,S=d.scrollOffset,_=d.scrollUpdateWasRequested;this._callOnScroll(h,S,_)}},j._getRangeToRender=function(){var r=this.props,n=r.itemCount,a=r.overscanCount,c=this.state,p=c.isScrolling,f=c.scrollDirection,d=c.scrollOffset;if(n===0)return[0,0,0,0];var h=T(this.props,d,this._instanceProps),S=u(this.props,h,d,this._instanceProps),_=!p||f==="backward"?Math.max(1,a):1,z=!p||f==="forward"?Math.max(1,a):1;return[Math.max(0,h-_),Math.max(0,Math.min(n-1,S+z)),h,S]},w})(I.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var _e=function(t,i){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,i.instance},ze=ke({getItemOffset:function(t,i){var o=t.itemSize;return i*o},getItemSize:function(t,i){var o=t.itemSize;return o},getEstimatedTotalSize:function(t){var i=t.itemCount,o=t.itemSize;return o*i},getOffsetForIndexAndAlignment:function(t,i,o,l,O,T){var u=t.direction,v=t.height,b=t.itemCount,D=t.itemSize,y=t.layout,w=t.width,j=u==="horizontal"||y==="horizontal",C=j?w:v,r=Math.max(0,b*D-C),n=Math.min(r,i*D),a=Math.max(0,i*D-C+D+T);switch(o==="smart"&&(l>=a-C&&l<=n+C?o="auto":o="center"),o){case"start":return n;case"end":return a;case"center":{var c=Math.round(a+(n-a)/2);return c<Math.ceil(C/2)?0:c>r+Math.floor(C/2)?r:c}case"auto":default:return l>=a&&l<=n?l:l<a?a:n}},getStartIndexForOffset:function(t,i){var o=t.itemCount,l=t.itemSize;return Math.max(0,Math.min(o-1,Math.floor(i/l)))},getStopIndexForStartIndex:function(t,i,o){var l=t.direction,O=t.height,T=t.itemCount,u=t.itemSize,v=t.layout,b=t.width,D=l==="horizontal"||v==="horizontal",y=i*u,w=D?b:O,j=Math.ceil((w+o-y)/u);return Math.max(0,Math.min(T-1,i+j-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){t.itemSize}});const Ee=({message:s,type:t,onClose:i})=>{I.useEffect(()=>{const T=setTimeout(()=>{i()},3e3);return()=>clearTimeout(T)},[i]);const o=t==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200",l=t==="success"?"text-green-700":"text-red-700",O=t==="success"?e.jsx(je,{className:"h-5 w-5 text-green-500"}):e.jsx(ie,{className:"h-5 w-5 text-red-500"});return e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center p-4 mb-4 rounded-lg shadow-md border ${o}`,role:"alert",children:[e.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",children:O}),e.jsx("div",{className:`ml-3 text-sm font-normal ${l}`,children:s}),e.jsx("button",{type:"button",className:`ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 p-1.5 inline-flex h-8 w-8 ${l} hover:bg-gray-100`,onClick:i,"aria-label":"Close",children:e.jsx(ae,{className:"w-5 h-5"})})]})},K=({isOpen:s,onClose:t,title:i,department:o,onChange:l,onSubmit:O,mode:T="create"})=>{const u=T==="view";return e.jsx(me,{show:s,onClose:t,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:i}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(ae,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Code"}),e.jsx("input",{type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u?"bg-gray-100":""}`,value:o.code||"",onChange:v=>l({...o,code:v.target.value}),placeholder:"e.g. HR, FIN, IT",required:!0,disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name"}),e.jsx("input",{type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u?"bg-gray-100":""}`,value:o.name||"",onChange:v=>l({...o,name:v.target.value}),placeholder:"e.g. Human Resources",required:!0,disabled:u})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u?"bg-gray-100":""}`,value:o.description||"",onChange:v=>l({...o,description:v.target.value}),placeholder:"Brief description of the department's function",rows:"3",disabled:u})]}),!u&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"active-status",className:"rounded text-blue-600 focus:ring-blue-500",checked:o.is_active,onChange:v=>l({...o,is_active:v.target.checked}),disabled:u}),e.jsx("label",{htmlFor:"active-status",className:"text-sm text-gray-700",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(G,{type:"button",variant:"outline",onClick:()=>t(!1),className:"mr-2",children:u?"Close":"Cancel"}),!u&&e.jsxs(G,{type:"submit",className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),T==="create"?"Save Department":"Update Department"]})]})]})]})})},Me=({loading:s,filteredDepartments:t,handleViewClick:i,handleEditClick:o,handleToggleActive:l,handleDelete:O})=>{const T=[{id:"actions",title:"ACTIONS",width:"150px"},{id:"status",title:"STATUS",width:"100px"},{id:"code",title:"CODE",width:"120px"},{id:"name",title:"DEPARTMENT NAME",width:"200px"},{id:"description",title:"DESCRIPTION",width:"auto"}];if(s)return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex bg-gray-50 text-gray-500",children:T.map(b=>e.jsx("div",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider flex-1",children:b.title},b.id))})}),e.jsx("div",{className:"py-4 text-center text-gray-500",children:"Loading departments..."})]});if(!s&&t.length===0)return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex bg-gray-50 text-gray-500",children:T.map(b=>e.jsx("div",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider flex-1",children:b.title},b.id))})}),e.jsx("div",{className:"py-4 text-center text-gray-500",children:"No departments found. Add a new department to get started."})]});const u=64,v=le.memo(({index:b,style:D})=>{const y=t[b],w=y.is_active?"":"bg-yellow-50";return e.jsxs("div",{className:`flex items-center w-full border-b border-gray-200 ${w} hover:bg-gray-50`,style:D,children:[e.jsx("div",{className:"px-6 flex-1",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>i(y),className:"text-gray-400 hover:text-gray-500",title:"View",type:"button",children:e.jsx(ge,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o(y),className:"text-gray-400 hover:text-gray-500",title:"Edit",type:"button",children:e.jsx(xe,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l(y),className:"text-gray-400 hover:text-gray-500",title:y.is_active?"Deactivate":"Activate",type:"button",children:y.is_active?e.jsx(ve,{className:"h-5 w-5 text-green-500"}):e.jsx(be,{className:"h-5 w-5 text-gray-400"})}),e.jsx("button",{onClick:()=>O(y),className:"text-gray-400 hover:text-red-500",title:"Delete",type:"button",children:e.jsx(ye,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"px-6 flex-1",children:y.is_active?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("span",{className:"mr-1.5 h-2 w-2 bg-green-400 rounded-full"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx("span",{className:"mr-1.5 h-2 w-2 bg-yellow-400 rounded-full"}),"Inactive"]})}),e.jsx("div",{className:"px-6 flex-1 text-sm font-medium text-gray-900",children:y.code}),e.jsx("div",{className:"px-6 flex-1 text-sm text-gray-900",children:y.name}),e.jsx("div",{className:"px-6 flex-1 text-sm text-gray-500 overflow-hidden",children:y.description||"No description provided"})]})});return e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex bg-gray-50 text-gray-500",children:T.map(b=>e.jsx("div",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider flex-1",children:b.title},b.id))})}),e.jsx(ze,{height:600,width:"100%",itemCount:t.length,itemSize:u,className:"overflow-auto",children:v})]})},dt=()=>{const{auth:s}=ne().props||{};s!=null&&s.user;const[t,i]=I.useState([]),[o,l]=I.useState(!0),[O,T]=I.useState([]),[u,v]=I.useState("All Departments"),[b,D]=I.useState({visible:!1,message:"",type:"success"}),y={name:"",code:"",description:"",is_active:!0},[w,j]=I.useState(y),[C,r]=I.useState(!1),[n,a]=I.useState(!1),[c,p]=I.useState(!1),[f,d]=I.useState({isOpen:!1,title:"",message:"",confirmText:"",confirmVariant:"destructive",onConfirm:()=>{}}),h=I.useCallback(async()=>{var m,g;l(!0);try{const x=await P.get("/departments");i(x.data.data||[])}catch(x){console.error("Error loading departments:",x),k("Error loading departments: "+(((g=(m=x.response)==null?void 0:m.data)==null?void 0:g.message)||x.message),"error")}finally{l(!1)}},[]);I.useEffect(()=>{h()},[h]);const S=t.length,_=t.filter(m=>m.is_active).length,z=t.filter(m=>!m.is_active).length,[E,M]=I.useState("");I.useEffect(()=>{let m=[...t];if(u==="Active"?m=m.filter(g=>g.is_active):u==="Inactive"&&(m=m.filter(g=>!g.is_active)),E.trim()!==""){const g=E.toLowerCase();m=m.filter(x=>x.name.toLowerCase().includes(g)||x.code.toLowerCase().includes(g)||x.description&&x.description.toLowerCase().includes(g))}T(m)},[t,u,E]);const k=(m,g="success")=>{D({visible:!0,message:m,type:g})},$=()=>{D({...b,visible:!1})},F=()=>{j(y),r(!0)},q=m=>{j({...m}),a(!0)},U=m=>{j({...m}),p(!0)},L=async m=>{var g,x;if(m.preventDefault(),!w.name||!w.code){k("Department name and code are required","error");return}try{const N=await P.post("/departments",w);await h(),j(y),r(!1),k("Department created successfully")}catch(N){console.error("Error creating department:",N),k(((x=(g=N.response)==null?void 0:g.data)==null?void 0:x.message)||"Error creating department","error")}},R=async m=>{var g,x;if(m.preventDefault(),!w.name||!w.code){k("Department name and code are required","error");return}try{const N=await P.put(`/departments/${w.id}`,w);await h(),j(y),a(!1),k("Department updated successfully")}catch(N){console.error("Error updating department:",N),k(((x=(g=N.response)==null?void 0:g.data)==null?void 0:x.message)||"Error updating department","error")}},V=m=>{d({isOpen:!0,title:"Delete Department",message:`Are you sure you want to delete the department "${m.name}"? This action cannot be undone.`,confirmText:"Delete",confirmVariant:"destructive",onConfirm:async()=>{var g,x;try{await P.delete(`/departments/${m.id}`),await h(),d({...f,isOpen:!1}),k("Department deleted successfully")}catch(N){console.error("Error deleting department:",N),d({...f,isOpen:!1}),k(((x=(g=N.response)==null?void 0:g.data)==null?void 0:x.message)||"Error deleting department","error")}}})},W=async m=>{var g,x;try{const N=await P.patch(`/departments/${m.id}/toggle-active`);await h(),k("Department status updated successfully")}catch(N){console.error("Error toggling department status:",N),k(((x=(g=N.response)==null?void 0:g.data)==null?void 0:x.message)||"Error updating department status","error")}};return e.jsxs(ce,{children:[e.jsx(oe,{title:"Manage Departments"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(de,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[b.visible&&e.jsx(Ee,{message:b.message,type:b.type,onClose:$}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Department Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, edit, and organize company departments."})]}),e.jsx("div",{children:e.jsxs(G,{onClick:F,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),"Add Department"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Departments"}),e.jsx("p",{className:"text-3xl font-bold",children:S})]}),e.jsx("div",{className:"rounded-full p-3 bg-indigo-100",children:e.jsx(he,{className:"h-6 w-6 text-indigo-600"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Active Departments"}),e.jsx("p",{className:"text-3xl font-bold",children:_})]}),e.jsx("div",{className:"rounded-full p-3 bg-green-100",children:e.jsx(fe,{className:"h-6 w-6 text-green-600"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Inactive Departments"}),e.jsx("p",{className:"text-3xl font-bold",children:z})]}),e.jsx("div",{className:"rounded-full p-3 bg-yellow-100",children:e.jsx(ie,{className:"h-6 w-6 text-yellow-600"})})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500 focus:border-blue-500",placeholder:"Search departments...",value:E,onChange:m=>M(m.target.value)})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{className:`flex-1 py-3 text-sm font-medium text-center border-b-2 ${u==="All Departments"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>v("All Departments"),children:"All Departments"}),e.jsxs("button",{className:`flex-1 py-3 text-sm font-medium text-center border-b-2 ${u==="Active"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>v("Active"),children:[e.jsx("svg",{className:"w-4 h-4 inline-block mr-1.5 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Active"]}),e.jsxs("button",{className:`flex-1 py-3 text-sm font-medium text-center border-b-2 ${u==="Inactive"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>v("Inactive"),children:[e.jsx("svg",{className:"w-4 h-4 inline-block mr-1.5 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Inactive"]})]})}),e.jsx(Me,{loading:o,filteredDepartments:O,handleViewClick:U,handleEditClick:q,handleToggleActive:W,handleDelete:V})]})})]}),e.jsx(K,{isOpen:C,onClose:()=>r(!1),title:"Add New Department",department:w,onChange:j,onSubmit:L,mode:"create"}),e.jsx(K,{isOpen:n,onClose:()=>a(!1),title:"Edit Department",department:w,onChange:j,onSubmit:R,mode:"edit"}),e.jsx(K,{isOpen:c,onClose:()=>p(!1),title:"View Department Details",department:w,onChange:j,onSubmit:()=>{},mode:"view"}),e.jsx(ue,{isOpen:f.isOpen,onClose:()=>d({...f,isOpen:!1}),title:f.title,message:f.message,confirmText:f.confirmText,confirmVariant:f.confirmVariant,onConfirm:f.onConfirm})]})};export{dt as default};
