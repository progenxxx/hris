import{V as Y,r as u,j as e,M as X,R as D,h as S}from"./app-C_ClQmDY.js";import{A as K}from"./AuthenticatedLayout-3cR_usYW.js";import{S as Q}from"./Sidebar-Bhx-DaaE.js";import{S as A,V as Z}from"./ViewEmployeeModal---LMxeGG.js";import{A as ee,a as te}from"./alert-CLB16PDI.js";import{B as j}from"./Button-Du7mhroA.js";import{C as se,c as ae}from"./card-Cx-sVNbO.js";import{F as re}from"./file-spreadsheet-DaU4vyfX.js";import{U as ne}from"./user-plus-CAu7qV6F.js";import{U as le}from"./users-Dr4YdQlV.js";import{C as L}from"./check-D3tZ-Yap.js";import{L as M}from"./lock-DPLG-IKK.js";import{S as oe}from"./search-BDKFcNkb.js";import{E as ie}from"./eye-BzxMP9Yo.js";import{P as ce}from"./pen-B5qQlTUI.js";import{T as de}from"./trash-2-D_IcoVGU.js";import{X as me}from"./x-Q1lJB2Tb.js";import"./ApplicationLogo-BORf3137.js";import"./Dropdown-CHXQRgIL.js";import"./transition-0ACRCynB.js";import"./createLucideIcon-D1ADp28Z.js";/* empty css                */import"./file-text-DMC5LN9m.js";import"./calendar-B28JSqfz.js";import"./clsx-B-dksMZM.js";const ue=({isOpen:a,onClose:d,title:o,children:m})=>a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:t=>t.target===t.currentTarget&&d(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h3",{id:"modal-title",className:"text-lg font-semibold",children:o}),e.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Close modal",children:e.jsx(me,{className:"h-5 w-5"})})]}),m]})}):null,xe=({isOpen:a,onClose:d,onConfirm:o,title:m,message:t,confirmText:x,confirmVariant:r="destructive"})=>a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:b=>b.target===b.currentTarget&&d(),role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:m}),e.jsx("p",{className:"text-gray-600 mb-6",children:t}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:o,className:r==="destructive"?"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700":r==="warning"?"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700":"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:x})]})]})}):null,pe=({isOpen:a,onClose:d,employee:o=null,mode:m="create"})=>{const[t,x]=u.useState({idno:"",bid:"",Lname:"",Fname:"",MName:"",Suffix:"",Gender:"",EducationalAttainment:"",Degree:"",CivilStatus:"",Birthdate:"",ContactNo:"",Email:"",PresentAddress:"",PermanentAddress:"",EmerContactName:"",EmerContactNo:"",EmerRelationship:"",EmpStatus:"",JobStatus:"Active",RankFile:"",Department:"",Line:"",Jobtitle:"",HiredDate:"",EndOfContract:"",pay_type:"",payrate:"",pay_allowance:"",SSSNO:"",PHILHEALTHNo:"",HDMFNo:"",TaxNo:"",Taxable:!1,CostCenter:""}),[r,b]=u.useState({});u.useEffect(()=>{if(o){const N=typeof o.Taxable=="boolean"?o.Taxable:o.Taxable==="Yes"||o.Taxable==="1";x({...o,Taxable:N})}else x({idno:"",bid:"",Lname:"",Fname:"",MName:"",Suffix:"",Gender:"",EducationalAttainment:"",Degree:"",CivilStatus:"",Birthdate:"",ContactNo:"",Email:"",PresentAddress:"",PermanentAddress:"",EmerContactName:"",EmerContactNo:"",EmerRelationship:"",EmpStatus:"",JobStatus:"Active",RankFile:"",Department:"",Line:"",Jobtitle:"",HiredDate:"",EndOfContract:"",pay_type:"",payrate:"",pay_allowance:"",SSSNO:"",PHILHEALTHNo:"",HDMFNo:"",TaxNo:"",Taxable:!1,CostCenter:""})},[o]);const i=N=>{N.preventDefault(),console.log("Form submitted with data:",t);const p={...t,Taxable:!!t.Taxable};if(m==="create")S.post("/employees",p,{onError:h=>{console.error("Validation errors:",h),b(h)},onSuccess:()=>{console.log("Employee created successfully"),d()},preserveScroll:!0});else{if(!o||!o.id){console.error("Employee object or ID is missing"),b({general:"Unable to update: Employee ID is missing"});return}S.post(`/employees/${o.id}`,{...p,_method:"PUT"},{preserveState:!0,preserveScroll:!0,onError:h=>{console.error("Validation errors:",h),b(h)},onSuccess:()=>{console.log("Employee updated successfully"),d()}})}},c=N=>{const{name:p,value:h}=N.target;x(p==="Taxable"?y=>({...y,[p]:h==="1"||h==="true"}):y=>({...y,[p]:h})),r[p]&&b(y=>({...y,[p]:void 0}))};return e.jsx(ue,{isOpen:a,onClose:d,title:m==="create"?"Add New Employee":"Edit Employee",children:e.jsxs("form",{onSubmit:i,className:"p-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Personal Information"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idno",className:"block text-sm font-medium mb-1",children:"ID Number"}),e.jsx("input",{id:"idno",name:"idno",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.idno?"border-red-500":"border-gray-300"}`,value:t.idno,onChange:c}),r.idno&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.idno})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bid",className:"block text-sm font-medium mb-1",children:"Biometrics ID"}),e.jsx("input",{id:"bid",name:"bid",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.bid,onChange:c})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Lname",className:"block text-sm font-medium mb-1",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"Lname",name:"Lname",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Lname?"border-red-500":"border-gray-300"}`,value:t.Lname,onChange:c,required:!0}),r.Lname&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Lname})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Fname",className:"block text-sm font-medium mb-1",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"Fname",name:"Fname",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Fname?"border-red-500":"border-gray-300"}`,value:t.Fname,onChange:c,required:!0}),r.Fname&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Fname})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"MName",className:"block text-sm font-medium mb-1",children:"Middle Name"}),e.jsx("input",{id:"MName",name:"MName",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.MName,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Suffix",className:"block text-sm font-medium mb-1",children:"Suffix"}),e.jsx("input",{id:"Suffix",name:"Suffix",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.Suffix,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Gender",className:"block text-sm font-medium mb-1",children:"Gender"}),e.jsxs("select",{id:"Gender",name:"Gender",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Gender?"border-red-500":"border-gray-300"}`,value:t.Gender,onChange:c,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),r.Gender&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Gender})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"CivilStatus",className:"block text-sm font-medium mb-1",children:"Civil Status"}),e.jsxs("select",{id:"CivilStatus",name:"CivilStatus",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.CivilStatus,onChange:c,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Widowed",children:"Widowed"}),e.jsx("option",{value:"Divorced",children:"Divorced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Birthdate",className:"block text-sm font-medium mb-1",children:"Birthdate"}),e.jsx("input",{id:"Birthdate",name:"Birthdate",type:"date",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.Birthdate,onChange:c})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Contact Information"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ContactNo",className:"block text-sm font-medium mb-1",children:"Contact Number"}),e.jsx("input",{id:"ContactNo",name:"ContactNo",type:"tel",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.ContactNo,onChange:c})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Email",className:"block text-sm font-medium mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"Email",name:"Email",type:"email",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Email?"border-red-500":"border-gray-300"}`,value:t.Email,onChange:c,required:!0}),r.Email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Email})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Employment Information"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"EmpStatus",className:"block text-sm font-medium mb-1",children:"Employment Status"}),e.jsxs("select",{id:"EmpStatus",name:"EmpStatus",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.EmpStatus,onChange:c,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Contractual",children:"Contractual"}),e.jsx("option",{value:"Probationary",children:"Probationary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"JobStatus",className:"block text-sm font-medium mb-1",children:"Job Status"}),e.jsxs("select",{id:"JobStatus",name:"JobStatus",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.JobStatus,onChange:c,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Blocked",children:"Blocked"}),e.jsx("option",{value:"On Leave",children:"On Leave"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Department",className:"block text-sm font-medium mb-1",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"Department",name:"Department",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Department?"border-red-500":"border-gray-300"}`,value:t.Department,onChange:c,required:!0}),r.Department&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Department})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Jobtitle",className:"block text-sm font-medium mb-1",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"Jobtitle",name:"Jobtitle",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.Jobtitle?"border-red-500":"border-gray-300"}`,value:t.Jobtitle,onChange:c,required:!0}),r.Jobtitle&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.Jobtitle})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"HiredDate",className:"block text-sm font-medium mb-1",children:"Hired Date"}),e.jsx("input",{id:"HiredDate",name:"HiredDate",type:"date",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.HiredDate,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"EndOfContract",className:"block text-sm font-medium mb-1",children:"End of Contract"}),e.jsx("input",{id:"EndOfContract",name:"EndOfContract",type:"date",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.EndOfContract,onChange:c})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Compensation Information"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pay_type",className:"block text-sm font-medium mb-1",children:"Pay Type"}),e.jsxs("select",{id:"pay_type",name:"pay_type",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.pay_type,onChange:c,children:[e.jsx("option",{value:"",children:"Select Pay Type"}),e.jsx("option",{value:"Monthly",children:"Monthly"}),e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Daily",children:"Daily"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payrate",className:"block text-sm font-medium mb-1",children:"Pay Rate"}),e.jsx("input",{id:"payrate",name:"payrate",type:"number",step:"0.01",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.payrate,onChange:c})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Government Information"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"SSSNO",className:"block text-sm font-medium mb-1",children:"SSS Number"}),e.jsx("input",{id:"SSSNO",name:"SSSNO",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.SSSNO,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"PHILHEALTHNo",className:"block text-sm font-medium mb-1",children:"PhilHealth Number"}),e.jsx("input",{id:"PHILHEALTHNo",name:"PHILHEALTHNo",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.PHILHEALTHNo,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"HDMFNo",className:"block text-sm font-medium mb-1",children:"HDMF Number"}),e.jsx("input",{id:"HDMFNo",name:"HDMFNo",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.HDMFNo,onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"TaxNo",className:"block text-sm font-medium mb-1",children:"Tax Number"}),e.jsx("input",{id:"TaxNo",name:"TaxNo",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.TaxNo,onChange:c})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"Taxable",className:"block text-sm font-medium mb-1",children:["Taxable ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"Taxable",name:"Taxable",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t.Taxable?"1":"0",onChange:c,required:!0,children:[e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(j,{type:"button",onClick:d,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx(j,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:m==="create"?"Add Employee":"Save Changes"})]})]})})},be=({children:a,defaultValue:d,className:o="",onValueChange:m})=>{const[t,x]=u.useState(d);return u.useEffect(()=>{m&&m(t)},[t,m]),e.jsx("div",{className:o,children:D.Children.map(a,r=>r&&(r.type===P||r.type===he)?D.cloneElement(r,{activeTab:t,setActiveTab:x}):r)})},P=({children:a,activeTab:d,setActiveTab:o,className:m=""})=>e.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${m}`,children:D.Children.map(a,t=>t&&t.type===k?D.cloneElement(t,{activeTab:d,setActiveTab:o}):t)}),k=({children:a,value:d,activeTab:o,setActiveTab:m})=>{const t=o===d;return e.jsx("button",{onClick:()=>m(d),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all 
      ${t?"bg-white text-gray-950 shadow-sm":"hover:bg-gray-200 hover:text-gray-900"}`,children:a})},he=({children:a,value:d,activeTab:o})=>o!==d?null:e.jsx("div",{className:"mt-2",children:a}),fe=({employees:a,onView:d,onEdit:o,onDelete:m,onMarkInactive:t,onMarkBlocked:x,onMarkActive:r})=>{if(!(a!=null&&a.length))return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No employees found"});const b=i=>{switch(i){case"Active":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Active"]});case"Inactive":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(A,{className:"w-3 h-3 mr-1"}),"Inactive"]});case"Blocked":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"Blocked"]});case"On Leave":return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"On Leave"});default:return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:i})}};return e.jsx("div",{className:"overflow-x-auto",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID No."}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact No."})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(i=>e.jsxs("tr",{className:`hover:bg-gray-50 ${i.JobStatus==="Inactive"?"bg-yellow-50":i.JobStatus==="Blocked"?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(j,{variant:"outline",className:"p-2",onClick:()=>d(i),title:"View Employee",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(j,{variant:"secondary",className:"p-2",onClick:()=>o(i),title:"Edit Employee",children:e.jsx(ce,{className:"h-4 w-4"})}),i.JobStatus!=="Inactive"&&e.jsx(j,{variant:"warning",className:"p-2 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>t(i.id),title:"Mark as Inactive",children:e.jsx(A,{className:"h-4 w-4"})}),i.JobStatus!=="Blocked"&&e.jsx(j,{variant:"destructive",className:"p-2",onClick:()=>x(i.id),title:"Block Employee",children:e.jsx(M,{className:"h-4 w-4"})}),(i.JobStatus==="Inactive"||i.JobStatus==="Blocked")&&e.jsx(j,{variant:"default",className:"p-2 bg-green-500 hover:bg-green-600 text-white",onClick:()=>r(i.id),title:"Mark as Active",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(j,{variant:"destructive",className:"p-2",onClick:()=>m(i.id),title:"Delete Employee",children:e.jsx(de,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.idno}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-blue-600",children:i.bid||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:`${i.Lname}, ${i.Fname} ${i.MName||""}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b(i.JobStatus)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.Department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.Jobtitle}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.Email||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.ContactNo||"-"})]},i.id))})]})})},F=({title:a,count:d,icon:o,bgColor:m,textColor:t})=>e.jsx(se,{className:`${m} shadow-sm`,children:e.jsxs(ae,{className:"p-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t}`,children:a}),e.jsx("p",{className:"text-2xl font-bold",children:d})]}),e.jsx("div",{className:`p-3 rounded-full ${m.replace("bg-","bg-opacity-20")}`,children:o})]})}),Re=({employees:a,currentStatus:d="all",flash:o})=>{const{auth:m}=Y().props,[t,x]=u.useState(a||[]),[r,b]=u.useState(""),[i,c]=u.useState(!1),[N,p]=u.useState(null),[h,y]=u.useState("create"),[$,I]=u.useState(!1),[J,O]=u.useState(!1),[f,v]=u.useState({isOpen:!1,title:"",message:"",confirmText:"",confirmVariant:"destructive",onConfirm:()=>{}}),[E,T]=u.useState({total:(a==null?void 0:a.length)||0,active:(a==null?void 0:a.filter(s=>s.JobStatus==="Active").length)||0,inactive:(a==null?void 0:a.filter(s=>s.JobStatus==="Inactive").length)||0,blocked:(a==null?void 0:a.filter(s=>s.JobStatus==="Blocked").length)||0}),[C,V]=u.useState(d||"all");u.useEffect(()=>{let s=a||[];C!=="all"&&(s=s.filter(n=>n.JobStatus===C)),r&&(s=s.filter(n=>{var l,g,w,H,B;return((l=n.Lname)==null?void 0:l.toLowerCase().includes(r.toLowerCase()))||((g=n.Fname)==null?void 0:g.toLowerCase().includes(r.toLowerCase()))||((w=n.Email)==null?void 0:w.toLowerCase().includes(r.toLowerCase()))||((H=n.Department)==null?void 0:H.toLowerCase().includes(r.toLowerCase()))||((B=n.idno)==null?void 0:B.toLowerCase().includes(r.toLowerCase()))})),x(s)},[r,a,C]),u.useEffect(()=>{a&&T({total:a.length,active:a.filter(s=>s.JobStatus==="Active").length,inactive:a.filter(s=>s.JobStatus==="Inactive").length,blocked:a.filter(s=>s.JobStatus==="Blocked").length})},[a]);const G=s=>{p(s),I(!0)},R=s=>{v({isOpen:!0,title:"Delete Employee",message:"Are you sure you want to delete this employee? This action cannot be undone.",confirmText:"Delete",confirmVariant:"destructive",onConfirm:()=>{S.delete(`/employees/${s}`,{onSuccess:()=>{v({...f,isOpen:!1})},preserveScroll:!0})}})},_=s=>{v({isOpen:!0,title:"Mark Employee as Inactive",message:"Are you sure you want to mark this employee as inactive?",confirmText:"Mark Inactive",confirmVariant:"warning",onConfirm:()=>{S.post(`/employees/${s}/mark-inactive`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x(n=>n.map(l=>l.id===s?{...l,JobStatus:"Inactive"}:l)),T(n=>{const l=a.find(w=>w.id===s),g=l==null?void 0:l.JobStatus;return{...n,active:g==="Active"?n.active-1:n.active,inactive:n.inactive+1}}),v({...f,isOpen:!1})}})}})},U=s=>{v({isOpen:!0,title:"Block Employee",message:"Are you sure you want to block this employee? Blocked employees will not be able to access any company resources.",confirmText:"Block",confirmVariant:"destructive",onConfirm:()=>{S.post(`/employees/${s}/mark-blocked`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x(n=>n.map(l=>l.id===s?{...l,JobStatus:"Blocked"}:l)),T(n=>{const l=a.find(w=>w.id===s),g=l==null?void 0:l.JobStatus;return{...n,active:g==="Active"?n.active-1:n.active,inactive:g==="Inactive"?n.inactive-1:n.inactive,blocked:n.blocked+1}}),v({...f,isOpen:!1})}})}})},q=s=>{v({isOpen:!0,title:"Activate Employee",message:"Are you sure you want to mark this employee as active?",confirmText:"Activate",confirmVariant:"default",onConfirm:()=>{S.post(`/employees/${s}/mark-active`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{x(n=>n.map(l=>l.id===s?{...l,JobStatus:"Active"}:l)),T(n=>{const l=a.find(w=>w.id===s),g=l==null?void 0:l.JobStatus;return{...n,active:n.active+1,inactive:g==="Inactive"?n.inactive-1:n.inactive,blocked:g==="Blocked"?n.blocked-1:n.blocked}}),v({...f,isOpen:!1})}})}})},W=s=>{V(s),S.visit(`/employees?status=${s}`,{preserveState:!0,preserveScroll:!0,only:["employees","currentStatus"]})},z=async()=>{O(!0);try{const s=new URLSearchParams;C!=="all"&&s.append("status",C),r&&s.append("search",r);const n=`/employees/export?${s.toString()}`,l=document.createElement("a");l.href=n,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(s){console.error("Export failed:",s)}finally{O(!1)}};return e.jsxs(K,{user:m.user,children:[e.jsx(X,{title:"Employee Management"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(Q,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[(o==null?void 0:o.message)&&e.jsx(ee,{className:"mb-4",children:e.jsx(te,{children:o.message})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Employee Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your employee records and information."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(j,{onClick:z,disabled:J||!t.length,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors duration-200 flex items-center",children:J?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),"Export to Excel"]})}),e.jsxs(j,{onClick:()=>{y("create"),p(null),c(!0)},className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Add Employee"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(F,{title:"Total Employees",count:E.total,icon:e.jsx(le,{className:"h-6 w-6 text-indigo-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(F,{title:"Active Employees",count:E.active,icon:e.jsx(L,{className:"h-6 w-6 text-green-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(F,{title:"Inactive Employees",count:E.inactive,icon:e.jsx(A,{className:"h-6 w-6 text-yellow-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(F,{title:"Blocked Employees",count:E.blocked,icon:e.jsx(M,{className:"h-6 w-6 text-red-600"}),bgColor:"bg-white",textColor:"text-gray-600"})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search employees...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:r,onChange:s=>b(s.target.value)})]})}),e.jsx(be,{defaultValue:C,className:"mb-6",onValueChange:W,children:e.jsxs(P,{className:"grid grid-cols-5 w-full",children:[e.jsx(k,{value:"all",children:"All Employees"}),e.jsxs(k,{value:"Active",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Active"]}),e.jsxs(k,{value:"Inactive",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Inactive"]}),e.jsxs(k,{value:"Blocked",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Blocked"]}),e.jsx(k,{value:"On Leave",children:"On Leave"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx(fe,{employees:t,onView:G,onEdit:s=>{p(s),y("edit"),c(!0)},onDelete:R,onMarkInactive:_,onMarkBlocked:U,onMarkActive:q})}),e.jsx(Z,{isOpen:$,onClose:()=>{I(!1),p(null)},employee:N}),e.jsx(pe,{isOpen:i,onClose:()=>{c(!1),p(null)},employee:N,mode:h}),e.jsx(xe,{isOpen:f.isOpen,onClose:()=>v({...f,isOpen:!1}),title:f.title,message:f.message,confirmText:f.confirmText,confirmVariant:f.confirmVariant,onConfirm:f.onConfirm})]})})]})]})};export{Re as default};
