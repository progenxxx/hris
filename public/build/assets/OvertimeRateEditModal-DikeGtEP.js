import{r as c,j as e,b as E}from"./app-D-TNKEQL.js";import{y as C}from"./index-D8OgU6sH.js";import{L as j}from"./loader-circle-D5iasq1K.js";import{c as S}from"./createLucideIcon-DEWnkTLV.js";import{T as M}from"./triangle-alert-CxlByYdl.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=S("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),L=({isOpen:u,onClose:h,overtime:t,userRoles:m={},processing:l=!1,onRateUpdated:p=null})=>{var g,y;const[n,f]=c.useState({rate_multiplier:"",reason:""}),[i,o]=c.useState(!1),[r,d]=c.useState({});c.useEffect(()=>{u&&t&&(f({rate_multiplier:t.rate_multiplier||"",reason:""}),d({}))},[u,t]);const N=()=>!t||t.status!=="pending"?!1:m.isSuperAdmin||m.isHrdManager||m.isDepartmentManager||t.created_by===m.userId,b=s=>{const{name:a,value:R}=s.target;f(x=>({...x,[a]:R})),r[a]&&d(x=>({...x,[a]:""}))},w=()=>{const s={};if(!n.rate_multiplier)s.rate_multiplier="Rate multiplier is required";else{const a=parseFloat(n.rate_multiplier);(isNaN(a)||a<1||a>10)&&(s.rate_multiplier="Rate multiplier must be between 1.0 and 10.0")}return d(s),Object.keys(s).length===0},v=s=>{s.preventDefault(),!(i||l||!w())&&(o(!0),E.post(route("overtimes.updateRate",t.id),n,{preserveScroll:!0,onSuccess:a=>{o(!1),C.success("Overtime rate updated successfully"),typeof p=="function"&&p(a.props.overtimes||null),window.location.reload()},onError:a=>{o(!1),d(typeof a=="object"?a:{general:"An error occurred while updating the rate"})},onFinish:()=>{o(!1)}}))},k=s=>{s.target===s.currentTarget&&!i&&!l&&h()},_=s=>{s.stopPropagation()};return!u||!t||!N()?null:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:k,children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",onClick:_,children:[(i||l)&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-indigo-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Updating overtime rate..."})]})}),e.jsxs("form",{onSubmit:v,children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(F,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Edit Overtime Rate"}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-md",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.employee?`${t.employee.Lname}, ${t.employee.Fname}`:"Unknown Employee"}),e.jsxs("div",{className:"text-gray-500",children:[(g=t.employee)==null?void 0:g.idno," • ",(y=t.employee)==null?void 0:y.Department]}),e.jsxs("div",{className:"text-gray-500 mt-1",children:[t.date," • ",t.total_hours," hours"]})]})}),e.jsx("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(M,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Rate Editing Notice"}),e.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:e.jsx("p",{children:"Rate can only be modified while the overtime is in pending status."})})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"rate_multiplier",className:"block text-sm font-medium text-gray-700 mb-1",children:["Rate Multiplier ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:"number",id:"rate_multiplier",name:"rate_multiplier",step:"0.001",min:"1.0",max:"10.0",className:`block w-full rounded-md shadow-sm focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ${r.rate_multiplier?"border-red-300 focus:border-red-300":"border-gray-300 focus:border-indigo-300"}`,value:n.rate_multiplier,onChange:b,placeholder:"e.g., 1.25",disabled:i||l}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500",children:"x"})]}),r.rate_multiplier&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.rate_multiplier}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter the overtime rate multiplier (1.0 to 10.0). Current rate: ",t.rate_multiplier,"x"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Rate Change"}),e.jsx("textarea",{id:"reason",name:"reason",rows:3,className:`block w-full rounded-md shadow-sm focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ${r.reason?"border-red-300 focus:border-red-300":"border-gray-300 focus:border-indigo-300"}`,value:n.reason,onChange:b,placeholder:"Optional: Explain why the rate is being changed",disabled:i||l}),r.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.reason}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This reason will be added to the overtime remarks for audit purposes."})]}),r.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:r.general})}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Common Rate Examples:"}),e.jsxs("div",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("div",{children:"• 1.25x - Regular weekday overtime"}),e.jsx("div",{children:"• 1.30x - Rest day work"}),e.jsx("div",{children:"• 1.69x - Rest day overtime"}),e.jsx("div",{children:"• 2.00x - Regular holiday work"}),e.jsx("div",{children:"• 2.60x - Regular holiday overtime"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",disabled:i||l,children:i?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Rate"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 transition-all duration-200",onClick:h,disabled:i||l,children:"Cancel"})]})]})]})]})})},z=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{L as O,F as P,z as a};
