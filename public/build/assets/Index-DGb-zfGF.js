import{r,j as e,M as y,U as v,h as p}from"./app-C_ClQmDY.js";import{y as n,L as N}from"./index-CBJp45S4.js";/* empty css                      */import{A as b}from"./AuthenticatedLayout-3cR_usYW.js";import{S as w}from"./Sidebar-Bhx-DaaE.js";import"./clsx-B-dksMZM.js";import"./ApplicationLogo-BORf3137.js";import"./Dropdown-CHXQRgIL.js";import"./transition-0ACRCynB.js";import"./search-BDKFcNkb.js";import"./createLucideIcon-D1ADp28Z.js";import"./x-Q1lJB2Tb.js";/* empty css                */import"./users-Dr4YdQlV.js";import"./file-text-DMC5LN9m.js";import"./calendar-B28JSqfz.js";const D=({users:o,roles:h,auth:S,flash:i})=>{const[l,c]=r.useState(null),[d,m]=r.useState(""),[a,u]=r.useState(""),[x,g]=r.useState(o);r.useEffect(()=>{i&&i.message&&n.success(i.message),i&&i.error&&n.error(i.error),i&&i.info&&n.info(i.info)},[i]),r.useEffect(()=>{if(a){const s=o.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())||t.email.toLowerCase().includes(a.toLowerCase()));g(s)}else g(o)},[a,o]);const f=()=>{if(!l||!d){n.error("Please select both user and role");return}p.post(route("roles.assign"),{user_id:l,role_id:d},{onSuccess:()=>{c(null),m("")}})},j=(s,t)=>{confirm("Are you sure you want to remove this role?")&&p.post(route("roles.remove"),{user_id:s,role_id:t})};return e.jsxs(b,{children:[e.jsx(y,{title:"User Role Management"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx("div",{className:"fixed h-screen",children:e.jsx(w,{})}),e.jsx("div",{className:"flex-1 p-8 ml-64",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"User Role Management"}),e.jsx("p",{className:"text-gray-600",children:"Assign or remove roles from users"})]}),e.jsx(v,{href:route("roles.create"),className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Create New Role"})]}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Assign Role to User"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User"}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:l||"",onChange:s=>c(s.target.value),children:[e.jsx("option",{value:"",children:"-- Select User --"}),o.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Role"}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:d||"",onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"",children:"-- Select Role --"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Assign Role"})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full md:w-1/3 rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:a,onChange:s=>u(s.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Roles"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No users found matching your search"})}):x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.roles&&s.roles.length>0?s.roles.map(t=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:t.name},t.id)):e.jsx("span",{className:"text-gray-400",children:"No roles assigned"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.roles&&s.roles.length>0?s.roles.map(t=>e.jsxs("button",{onClick:()=>j(s.id,t.id),className:"text-red-600 hover:text-red-900 ml-2",children:["Remove ",t.name]},t.id)):null})]},s.id))})]})})]})]})})]})})]}),e.jsx(N,{position:"top-right",autoClose:3e3})]})};export{D as default};
