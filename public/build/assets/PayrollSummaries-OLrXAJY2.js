import{r as c,j as e,M as ce}from"./app-C_ClQmDY.js";import{A as xe}from"./AuthenticatedLayout-3cR_usYW.js";import{S as pe}from"./Sidebar-Bhx-DaaE.js";import{A as W,a as Y}from"./alert-CLB16PDI.js";import{B as y}from"./Button-Du7mhroA.js";import{C as E,a as he,b as me,c as H}from"./card-Cx-sVNbO.js";import{R as z}from"./refresh-cw-BGi6So-C.js";import{D as te}from"./download-BQI3-SNa.js";import{T as V}from"./triangle-alert-BvRbjIm5.js";import{C as G}from"./circle-check-big-CRb1LywB.js";import{S as je}from"./search-BDKFcNkb.js";import{U as ge}from"./users-Dr4YdQlV.js";import{C as fe}from"./calendar-B28JSqfz.js";import{C as q}from"./clock-CtBUUqYK.js";import{T as ue}from"./target-B9l511VP.js";import{F as Z}from"./file-text-DMC5LN9m.js";import{C as Ne}from"./chart-column-vCRmRsz0.js";import{E as ye}from"./eye-BzxMP9Yo.js";import{X as ve}from"./x-Q1lJB2Tb.js";import{T as _e}from"./trending-up-B1F8h_AN.js";import{B as be}from"./building-DbcHZy7m.js";import{U as we}from"./user-CzeVpIfb.js";import{C as ke}from"./calculator-CUVXM0j_.js";import{C as ee}from"./car-CfDqhZ4e.js";import"./ApplicationLogo-BORf3137.js";import"./Dropdown-CHXQRgIL.js";import"./transition-0ACRCynB.js";import"./createLucideIcon-D1ADp28Z.js";/* empty css                */import"./clsx-B-dksMZM.js";const Te=({isOpen:D,summary:t,onClose:U})=>{var $,B;const[F,P]=c.useState([]),[A,C]=c.useState(!1),[S,u]=c.useState(""),[v,L]=c.useState(!1),[l,I]=c.useState(null),[b,M]=c.useState(!1);c.useEffect(()=>{D&&t&&w()},[D,t]);const w=async()=>{C(!0),u("");try{const a=await fetch(`/payroll-summaries/${t.id}/attendance-details`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!a.ok)throw new Error(`Failed to load details: ${a.status}`);const r=await a.json();r.success?P(r.data):u("Failed to load attendance details")}catch(a){console.error("Error loading attendance details:",a),u("Error loading attendance details: "+(a.message||"Unknown error"))}finally{C(!1)}},X=async()=>{M(!0),u("");try{const a=new URLSearchParams({year:t.year,month:t.month,period_type:t.period_type,department:t.department||"",per_page:1e3}),r=await fetch(`/payroll-summaries?${a.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!r.ok)throw new Error(`Failed to load report data: ${r.status}`);const d=await r.json();if(d.success){const h=d.data.reduce((i,o)=>{const x=o.cost_center||"No Cost Center";return i[x]||(i[x]={employees:[],totals:{employees_count:0,days_worked:0,ot_hours:0,off_days:0,late_under_minutes:0,nsd_hours:0,slvl_days:0,offset_hours:0,retro:0,trip_count:0}}),i[x].employees.push(o),i[x].totals.employees_count++,i[x].totals.days_worked+=parseFloat(o.days_worked||0),i[x].totals.ot_hours+=parseFloat(o.ot_hours||0),i[x].totals.off_days+=parseFloat(o.off_days||0),i[x].totals.late_under_minutes+=parseFloat(o.late_under_minutes||0),i[x].totals.nsd_hours+=parseFloat(o.nsd_hours||0),i[x].totals.slvl_days+=parseFloat(o.slvl_days||0),i[x].totals.offset_hours+=parseFloat(o.offset_hours||0),i[x].totals.retro+=parseFloat(o.retro||0),i[x].totals.trip_count+=parseFloat(o.trip_count||0),i},{}),T=Object.values(h).reduce((i,o)=>(i.employees_count+=o.totals.employees_count,i.days_worked+=o.totals.days_worked,i.ot_hours+=o.totals.ot_hours,i.off_days+=o.totals.off_days,i.late_under_minutes+=o.totals.late_under_minutes,i.nsd_hours+=o.totals.nsd_hours,i.slvl_days+=o.totals.slvl_days,i.offset_hours+=o.totals.offset_hours,i.retro+=o.totals.retro,i.trip_count+=o.totals.trip_count,i),{employees_count:0,days_worked:0,ot_hours:0,off_days:0,late_under_minutes:0,nsd_hours:0,slvl_days:0,offset_hours:0,retro:0,trip_count:0});I({groupedData:h,grandTotals:T,period:`${t.year}-${String(t.month).padStart(2,"0")} ${t.period_type}`,department:t.department,generated_at:new Date().toISOString()}),L(!0)}else u("Failed to generate report")}catch(a){console.error("Error generating report:",a),u("Error generating report: "+(a.message||"Unknown error"))}finally{M(!1)}},k=()=>{if(!l)return;const a=[];a.push(["COST CENTER","Employee ID","Employee Name","Department","Line","Period","Year","Month","Period Type","Days Worked","OT Hours","Off Days","Late/Under Minutes","Late/Under Hours","NSD Hours","SLVL Days","Retro","Travel Order Hours","Holiday Hours","OT Regular Holiday Hours","OT Special Holiday Hours","Offset Hours","Trip Count"]),Object.keys(l.groupedData).sort().forEach(x=>{l.groupedData[x].employees.forEach(p=>{a.push([x,p.employee_no,p.employee_name,p.department||"",p.line||"",l.period,(t==null?void 0:t.year)||new Date().getFullYear(),(t==null?void 0:t.month)||new Date().getMonth()+1,(t==null?void 0:t.period_type)||"",parseFloat(p.days_worked||0),parseFloat(p.ot_hours||0),parseFloat(p.off_days||0),parseFloat(p.late_under_minutes||0),parseFloat(f(p.late_under_minutes||0)),parseFloat(p.nsd_hours||0),parseFloat(p.slvl_days||0),parseFloat(p.retro||0),parseFloat(p.travel_order_hours||0),parseFloat(p.holiday_hours||0),parseFloat(p.ot_reg_holiday_hours||0),parseFloat(p.ot_special_holiday_hours||0),parseFloat(p.offset_hours||0),parseFloat(p.trip_count||0)])})}),Object.keys(l.groupedData).sort().forEach(x=>{const j=l.groupedData[x];a.push([`SUBTOTAL - ${x}`,"",`(${j.totals.employees_count} employees)`,"","",l.period,(t==null?void 0:t.year)||new Date().getFullYear(),(t==null?void 0:t.month)||new Date().getMonth()+1,(t==null?void 0:t.period_type)||"",parseFloat(j.totals.days_worked||0),parseFloat(j.totals.ot_hours||0),parseFloat(j.totals.off_days||0),parseFloat(j.totals.late_under_minutes||0),parseFloat(f(j.totals.late_under_minutes||0)),parseFloat(j.totals.nsd_hours||0),parseFloat(j.totals.slvl_days||0),parseFloat(j.totals.retro||0),parseFloat(j.totals.travel_order_hours||0),parseFloat(j.totals.holiday_hours||0),parseFloat(j.totals.ot_reg_holiday_hours||0),parseFloat(j.totals.ot_special_holiday_hours||0),parseFloat(j.totals.offset_hours||0),parseFloat(j.totals.trip_count||0)])}),a.push(["GRAND TOTAL","",`(${l.grandTotals.employees_count} employees)`,"","",l.period,(t==null?void 0:t.year)||new Date().getFullYear(),(t==null?void 0:t.month)||new Date().getMonth()+1,(t==null?void 0:t.period_type)||"",parseFloat(l.grandTotals.days_worked||0),parseFloat(l.grandTotals.ot_hours||0),parseFloat(l.grandTotals.off_days||0),parseFloat(l.grandTotals.late_under_minutes||0),parseFloat(f(l.grandTotals.late_under_minutes||0)),parseFloat(l.grandTotals.nsd_hours||0),parseFloat(l.grandTotals.slvl_days||0),parseFloat(l.grandTotals.retro||0),parseFloat(l.grandTotals.travel_order_hours||0),parseFloat(l.grandTotals.holiday_hours||0),parseFloat(l.grandTotals.ot_reg_holiday_hours||0),parseFloat(l.grandTotals.ot_special_holiday_hours||0),parseFloat(l.grandTotals.offset_hours||0),parseFloat(l.grandTotals.trip_count||0)]);const h="\uFEFF"+a.map(x=>x.map(j=>{const p=String(j||"");return p.includes(",")||p.includes('"')||p.includes(`
`)?`"${p.replace(/"/g,'""')}"`:p}).join(",")).join(`
`),T=new Blob([h],{type:"text/csv;charset=utf-8"}),i=window.URL.createObjectURL(T),o=document.createElement("a");o.href=i,o.download=`cost_center_report_${l.period.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)},R=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},N=a=>{if(!a)return"-";try{if(a.match(/^\d{1,2}:\d{2}:\d{2}$/)){const[r,d]=a.split(":").map(Number),h=new Date;return h.setHours(r,d,0,0),h.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}if(a.includes("T")){const r=new Date(a);return isNaN(r.getTime())?"-":r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Manila"})}if(a.includes(" ")){const[r,d]=a.split(" "),[h,T]=d.split(":").map(Number);if(isNaN(h)||isNaN(T))return"-";const i=new Date;return i.setHours(h,T,0,0),i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}return"-"}catch(r){return console.error("Time formatting error:",r),"-"}},n=(a,r=2)=>{if(a==null||a==="")return"0.00";const d=parseFloat(a);return isNaN(d)?"0.00":d.toFixed(r)},f=a=>{if(!a||a===0)return"0.00";const r=parseFloat(a);return isNaN(r)?"0.00":(r/60).toFixed(2)};return D?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-7xl w-full mx-4 max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:v?"Cost Center Report":"Payroll Summary Details"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(t==null?void 0:t.status)==="posted"?"bg-green-100 text-green-800":(t==null?void 0:t.status)==="locked"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(($=t==null?void 0:t.status)==null?void 0:$.charAt(0).toUpperCase())+((B=t==null?void 0:t.status)==null?void 0:B.slice(1))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!v&&e.jsx(y,{onClick:X,disabled:b,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:b?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4 mr-1 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"REPORT"]})}),v&&e.jsxs(e.Fragment,{children:[e.jsxs(y,{onClick:k,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),e.jsxs(y,{onClick:()=>L(!1),size:"sm",variant:"outline",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Back to Details"]})]}),e.jsx("button",{onClick:U,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:e.jsx(ve,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"p-6 space-y-6",children:v?e.jsx("div",{className:"space-y-6",children:l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Cost Center Summary Report"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"Period"}),e.jsx("p",{className:"text-gray-900",children:l.period})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:l.department||"All Departments"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"Generated"}),e.jsx("p",{className:"text-gray-900",children:R(l.generated_at)})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Grand Totals"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.grandTotals.employees_count}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Employees"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(l.grandTotals.days_worked,1)}),e.jsx("div",{className:"text-sm text-green-800",children:"Days Worked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n(l.grandTotals.ot_hours)}),e.jsx("div",{className:"text-sm text-orange-800",children:"OT Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f(l.grandTotals.late_under_minutes)}),e.jsx("div",{className:"text-sm text-purple-800",children:"Late/Under (Hrs)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(l.grandTotals.slvl_days,1)}),e.jsx("div",{className:"text-sm text-red-800",children:"SLVL Days"})]})]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(l.groupedData).map(([a,r])=>e.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:e.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2"}),a," (",r.totals.employees_count," employees)"]})}),e.jsx("div",{className:"bg-blue-50 p-3",children:e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-8 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-blue-600",children:n(r.totals.days_worked,1)}),e.jsx("div",{className:"text-blue-800",children:"Days"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-orange-600",children:n(r.totals.ot_hours)}),e.jsx("div",{className:"text-orange-800",children:"OT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-gray-600",children:n(r.totals.off_days,1)}),e.jsx("div",{className:"text-gray-800",children:"Off"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-red-600",children:f(r.totals.late_under_minutes)}),e.jsx("div",{className:"text-red-800",children:"Late/Under"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-purple-600",children:n(r.totals.nsd_hours)}),e.jsx("div",{className:"text-purple-800",children:"NSD"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-indigo-600",children:n(r.totals.slvl_days,1)}),e.jsx("div",{className:"text-indigo-800",children:"SLVL"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-green-600",children:n(r.totals.offset_hours)}),e.jsx("div",{className:"text-green-800",children:"Offset"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-yellow-600",children:n(r.totals.trip_count,1)}),e.jsx("div",{className:"text-yellow-800",children:"Trip"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Days"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"OT"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Off"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Late/Under"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"NSD"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"SLVL"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Offset"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Retro"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Trip"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.employees.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.employee_name}),e.jsx("div",{className:"text-xs text-gray-500",children:d.employee_no})]})}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.days_worked,1)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.ot_hours)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.off_days,1)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:f(d.late_under_minutes)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.nsd_hours)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.slvl_days,1)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.offset_hours)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.retro)}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-900",children:n(d.trip_count,1)})]},d.id))})]})})]},a))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),"Summary Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employee"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t==null?void 0:t.employee_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t==null?void 0:t.employee_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:t==null?void 0:t.department}),e.jsx("p",{className:"text-sm text-gray-500",children:t==null?void 0:t.line})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Period"}),e.jsx("p",{className:"text-gray-900",children:t==null?void 0:t.full_period}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Cost Center: ",(t==null?void 0:t.cost_center)||"N/A"]})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 mr-2"}),"Summary Metrics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(t==null?void 0:t.days_worked,1)}),e.jsx("div",{className:"text-sm text-green-800",children:"Days Worked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n(t==null?void 0:t.ot_hours)}),e.jsx("div",{className:"text-sm text-blue-800",children:"OT Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f(t==null?void 0:t.late_under_minutes)}),e.jsx("div",{className:"text-sm text-orange-800",children:"Late/Under (Hrs)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n(t==null?void 0:t.nsd_hours)}),e.jsx("div",{className:"text-sm text-purple-800",children:"NSD Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(t==null?void 0:t.slvl_days,1)}),e.jsx("div",{className:"text-sm text-red-800",children:"SLVL Days"})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 mr-2"}),"Detailed Attendance Records (",F.length," records)"]})}),A?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(z,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading attendance details..."})]}):S?e.jsx("div",{className:"p-4",children:e.jsxs(W,{variant:"destructive",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),e.jsx(Y,{children:S})]})}):F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No attendance records found"}),e.jsx("p",{className:"text-gray-500",children:"The attendance records may have been deleted or not properly linked."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time In"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Break Out"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Break In"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Out"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Late/Under"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Night Shift"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travel"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SLVL"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CS"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Holiday"}),e.jsxs("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider flex items-center",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Trip"]}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT Reg"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT Spl"})]})}),e.jsx("tbody",{className:"bg-white",children:F.map((a,r)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-sm text-gray-900",children:R(a.attendance_date)}),e.jsx("div",{className:"text-xs text-gray-500",children:a.day||""})]}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 font-medium",children:N(a.time_in)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:N(a.break_out)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:N(a.break_in)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 font-medium",children:a.is_nightshift&&a.next_day_timeout?N(a.next_day_timeout):N(a.time_out)}),e.jsx("td",{className:"px-3 py-3",children:a.late_minutes>0||a.undertime_minutes>0?e.jsxs("div",{className:"space-y-1",children:[a.late_minutes>0&&e.jsxs("div",{className:"flex items-center text-red-600 text-xs",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),Math.round(a.late_minutes),"m late"]}),a.undertime_minutes>0&&e.jsxs("div",{className:"flex items-center text-orange-600 text-xs",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-1"}),Math.round(a.undertime_minutes),"m under"]})]}):e.jsxs("div",{className:"flex items-center text-green-600 text-xs",children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"On Time"]})}),e.jsx("td",{className:"px-3 py-3",children:a.is_nightshift?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:"☽ Night"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800",children:"☀ Day"})}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 font-medium",children:n(a.hours_worked)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.overtime)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.travel_order)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.slvl,1)}),e.jsx("td",{className:"px-3 py-3 text-sm text-center",children:a.ct?"✓":"-"}),e.jsx("td",{className:"px-3 py-3 text-sm text-center",children:a.cs?"✓":"-"}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.holiday)}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),n(a.trip,1)]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.ot_reg_holiday)}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600",children:n(a.ot_special_holiday)})]},a.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Additional Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Off Days:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.off_days,1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Travel Order Hours:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.travel_order_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Holiday Hours:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.holiday_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"OT Reg Holiday:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.ot_reg_holiday_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"OT Special Holiday:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.ot_special_holiday_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Offset Hours:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.offset_hours)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trip Count:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.trip_count,1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Retro:"}),e.jsx("span",{className:"font-medium",children:n(t==null?void 0:t.retro)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Flags"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has CT (Compensatory Time):"}),e.jsx("span",{children:t!=null&&t.has_ct?"✓ Yes":"✗ No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has CS (Compressed Schedule):"}),e.jsx("span",{children:t!=null&&t.has_cs?"✓ Yes":"✗ No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Has OB (Official Business):"}),e.jsx("span",{children:t!=null&&t.has_ob?"✓ Yes":"✗ No"})]}),(t==null?void 0:t.posted_at)&&e.jsxs("div",{className:"mt-4 pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted At:"}),e.jsx("span",{className:"font-medium",children:R(t.posted_at)})]}),(t==null?void 0:t.posted_by)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted By:"}),e.jsx("span",{className:"font-medium",children:t.posted_by.name})]})]})]})]})]}),(t==null?void 0:t.notes)&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:t.notes})]})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:e.jsx(y,{variant:"outline",onClick:U,children:"Close"})})]})}):null},at=({auth:D})=>{const[t,U]=c.useState([]),[F,P]=c.useState(!1),[A,C]=c.useState(!1),[S,u]=c.useState(""),[v,L]=c.useState(""),[l,I]=c.useState(new Date().getFullYear()),[b,M]=c.useState(new Date().getMonth()+1),[w,X]=c.useState(""),[k,R]=c.useState(""),[N,n]=c.useState(""),[f,$]=c.useState(""),[B,a]=c.useState([]),[r,d]=c.useState(1),[h,T]=c.useState(1),[i,o]=c.useState(25),[x,j]=c.useState(null),[p,J]=c.useState(null),[se,K]=c.useState(!1),ae=async()=>{P(!0),u("");try{const s=new URLSearchParams;s.append("year",l),s.append("month",b),s.append("page",r),s.append("per_page",i),w&&s.append("period_type",w),k&&s.append("department",k),N&&s.append("status",N),f&&s.append("search",f);const g=await(await fetch("/payroll-summaries?"+s.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();g.success?(U(g.data),T(g.pagination.last_page),d(g.pagination.current_page),j(g.statistics)):u("Failed to load payroll summaries")}catch(s){console.error("Error loading summaries:",s),u("Error loading payroll summaries: "+(s.message||"Unknown error"))}finally{P(!1)}},re=async()=>{C(!0),u("");try{const s=new URLSearchParams;s.append("year",l),s.append("month",b),w&&s.append("period_type",w),k&&s.append("department",k),N&&s.append("status",N),f&&s.append("search",f);const m=await fetch("/payroll-summaries/export?"+s.toString(),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream"}});if(!m.ok)throw new Error(`Export failed with status: ${m.status}`);const g=await m.blob(),Q=window.URL.createObjectURL(g),O=document.createElement("a");O.href=Q;const oe=`payroll_summaries_${l}_${b}_${new Date().toISOString().split("T")[0]}.csv`;O.download=oe,document.body.appendChild(O),O.click(),document.body.removeChild(O),window.URL.revokeObjectURL(Q),L("Payroll summaries exported successfully")}catch(s){console.error("Export error:",s),u("Failed to export payroll summaries: "+(s.message||"Unknown error"))}finally{C(!1)}},le=s=>{J(s),K(!0)},ne=async()=>{try{const s=await fetch("/attendance/departments",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(s.ok){const m=await s.json();m.success&&a(m.data)}}catch(s){console.error("Error loading departments:",s)}},ie=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},_=(s,m=2)=>{if(s==null||s==="")return"0.00";const g=parseFloat(s);return isNaN(g)?"0.00":g.toFixed(m)},de=s=>{if(!s||s===0)return"0.00";const m=parseFloat(s);return isNaN(m)?"0.00":(m/60).toFixed(2)};return c.useEffect(()=>{if(v){const s=setTimeout(()=>L(""),3e3);return()=>clearTimeout(s)}},[v]),c.useEffect(()=>{if(S){const s=setTimeout(()=>u(""),5e3);return()=>clearTimeout(s)}},[S]),c.useEffect(()=>{ae()},[l,b,w,k,N,f,r]),c.useEffect(()=>{ne()},[]),e.jsxs(xe,{user:D.user,children:[e.jsx(ce,{title:"Payroll Summaries"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(pe,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Daily Time Records"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"💡 Tip: Double-click any row to view detailed attendance records"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(y,{onClick:re,disabled:A,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:A?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4 mr-1 animate-spin"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Export"]})})})]}),S&&e.jsxs(W,{variant:"destructive",className:"mb-4",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),e.jsx(Y,{children:S})]}),v&&e.jsxs(W,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(G,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx(Y,{className:"text-green-800",children:v})]}),e.jsxs(E,{className:"mb-4",children:[e.jsx(he,{className:"pb-3",children:e.jsx(me,{className:"text-lg",children:"Filters"})}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or ID...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f,onChange:s=>$(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("input",{type:"number",min:"2020",max:"2030",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:s=>I(parseInt(s.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:b,onChange:s=>M(parseInt(s.target.value)),children:Array.from({length:12},(s,m)=>e.jsx("option",{value:m+1,children:new Date(2024,m,1).toLocaleString("default",{month:"long"})},m+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w,onChange:s=>X(s.target.value),children:[e.jsx("option",{value:"",children:"All Periods"}),e.jsx("option",{value:"1st_half",children:"1st Half (1-15)"}),e.jsx("option",{value:"2nd_half",children:"2nd Half (16-30/31)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:k,onChange:s=>R(s.target.value),children:[e.jsx("option",{value:"",children:"All Departments"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:N,onChange:s=>n(s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"posted",children:"Posted"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"locked",children:"Locked"})]})]})]})})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx(E,{children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Summaries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.total_summaries||0})]})]})})}),e.jsx(E,{children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Days Worked"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(x.total_days_worked,1)})]})]})})}),e.jsx(E,{children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total OT Hours"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(x.total_ot_hours)})]})]})})}),e.jsx(E,{children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Days/Employee"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(x.avg_days_worked,1)})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[F?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(z,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No payroll summaries found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or check if any attendance records have been posted."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Worked"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OT Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Off Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Late/Under (Hrs)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NSD Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SLVL Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Retro"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posted"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onDoubleClick:()=>le(s),title:"Double-click to view detailed attendance records",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.employee_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.employee_no})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{children:s.department}),e.jsx("div",{className:"text-xs text-gray-400",children:s.line})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.full_period}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:_(s.days_worked,1)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:_(s.ot_hours)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(s.off_days,1)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(q,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{children:de(s.late_under_minutes)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(s.nsd_hours)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(s.slvl_days,1)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(s.retro)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status==="posted"?"bg-green-100 text-green-800":s.status==="locked"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[s.status==="posted"&&e.jsx(G,{className:"h-3 w-3 mr-1"}),s.status==="locked"&&e.jsx(V,{className:"h-3 w-3 mr-1"}),s.status==="draft"&&e.jsx(q,{className:"h-3 w-3 mr-1"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{children:ie(s.posted_at)}),s.posted_by&&e.jsxs("div",{className:"text-xs text-gray-400",children:["by ",s.posted_by.name]})]})})]},s.id))})]})}),h>1&&e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(y,{onClick:()=>d(Math.max(1,r-1)),disabled:r===1,variant:"outline",size:"sm",children:"Previous"}),e.jsx(y,{onClick:()=>d(Math.min(h,r+1)),disabled:r===h,variant:"outline",size:"sm",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:r})," of"," ",e.jsx("span",{className:"font-medium",children:h})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx(y,{onClick:()=>d(1),disabled:r===1,variant:"outline",size:"sm",className:"rounded-l-md",children:"First"}),e.jsx(y,{onClick:()=>d(Math.max(1,r-1)),disabled:r===1,variant:"outline",size:"sm",children:"Previous"}),Array.from({length:Math.min(5,h)},(s,m)=>{const g=r<=3?m+1:r>=h-2?h-4+m:r-2+m;return g>0&&g<=h?e.jsx(y,{onClick:()=>d(g),variant:r===g?"default":"outline",size:"sm",className:r===g?"bg-blue-500 text-white":"",children:g},g):null}),e.jsx(y,{onClick:()=>d(Math.min(h,r+1)),disabled:r===h,variant:"outline",size:"sm",children:"Next"}),e.jsx(y,{onClick:()=>d(h),disabled:r===h,variant:"outline",size:"sm",className:"rounded-r-md",children:"Last"})]})})]})]})]})]})})]}),e.jsx(Te,{isOpen:se,summary:p,onClose:()=>{K(!1),J(null)}})]})};export{at as default};
