import{j as e,a as pe,r as o,H as ge,c as T}from"./app-7K62fd2B.js";import{A as ye,S as je}from"./AuthenticatedLayout-DQzQmHv9.js";import{S as fe}from"./Sidebar-Bpho9Ubl.js";import{c as Ne,a as ve,B as v}from"./Button-B-ixrUdq.js";import{C,c as k,a as se,b as ae}from"./card-Bd2He_oM.js";import"./alert-Cw6Swk3l.js";import{T as be,a as we,b,c as $}from"./tabs-DDzxLgCn.js";import{l as Se}from"./lodash-DtN3SqvZ.js";import{D as _e}from"./download-DiYogtYp.js";import{F as Ce}from"./file-text-B0cEX_Vi.js";import{c as te}from"./createLucideIcon-BK5csKvN.js";import{U as M}from"./users-D-OfZtV9.js";import{C as A}from"./circle-check-big-CdHds-fH.js";import{C as E}from"./circle-x-2rCUmP_B.js";import{C as ke}from"./clock-r6FcyLKi.js";import{S as Ee}from"./search-BmV-knWW.js";import{R}from"./refresh-cw-DqcGqKqT.js";import{C as Te}from"./calendar-CWo9dUpk.js";import{E as Fe}from"./eye-j6hlzOf-.js";import{T as Le}from"./trending-up-vzKy5EaE.js";import{C as De}from"./circle-alert-CGQbi50W.js";import"./ApplicationLogo-IpRttWhS.js";import"./Dropdown-Yo6Rw43S.js";import"./transition-Di9UDWSH.js";import"./x-4sBMcqny.js";/* empty css                */import"./clsx-B-dksMZM.js";import"./index-DnL5dnpl.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=te("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Oe=ve("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function L({className:p,variant:c,...i}){return e.jsx("div",{className:Ne(Oe({variant:c}),p),...i})}const $e=({message:p,type:c,onClose:i})=>{o.useEffect(()=>{const g=setTimeout(()=>{i()},5e3);return()=>clearTimeout(g)},[i]);const t=c==="success"?"bg-green-50 border-green-200":c==="error"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200",m=c==="success"?"text-green-700":c==="error"?"text-red-700":"text-yellow-700",d=c==="success"?e.jsx(A,{className:"h-5 w-5 text-green-500"}):c==="error"?e.jsx(E,{className:"h-5 w-5 text-red-500"}):e.jsx(De,{className:"h-5 w-5 text-yellow-500"});return e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center p-4 mb-4 rounded-lg shadow-md border ${t}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",children:d}),e.jsx("div",{className:`ml-3 text-sm font-normal ${m}`,children:p}),e.jsx("button",{type:"button",className:`ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 p-1.5 inline-flex h-8 w-8 ${m} hover:bg-gray-100`,onClick:i,children:e.jsx(E,{className:"w-5 h-5"})})]})},F=({icon:p,title:c,value:i,subtitle:t,trend:m,color:d="indigo"})=>e.jsx(C,{className:"border-t-4",style:{borderTopColor:`var(--${d}-500)`},children:e.jsxs(k,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:c}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i}),t&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:t})]}),e.jsx("div",{className:`p-3 rounded-full bg-${d}-100`,children:p})]}),m&&e.jsxs("div",{className:"flex items-center mt-4",children:[m.direction==="up"?e.jsx(Le,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Pe,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsxs("span",{className:`text-sm ${m.direction==="up"?"text-green-700":"text-red-700"}`,children:[m.value," from last period"]})]})]})}),Me=({isOpen:p,onClose:c,onSync:i,employees:t,isLoading:m})=>{const[d,g]=o.useState({create_missing:!0,update_existing:!1,include_schedules:!0,include_attendance:!0}),[h,x]=o.useState([]),y=()=>{h.length===t.length?x([]):x(t.map(l=>l.id))},I=l=>{x(n=>n.includes(l)?n.filter(V=>V!==l):[...n,l])},D=()=>{if(h.length===0){alert("Please select at least one employee to sync.");return}i(h,d)};return console.log("SyncOptionsModal render:",{isOpen:p,employeesLength:t.length,isLoading:m}),p?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sync Payroll Data"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Sync Options"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.create_missing,onChange:l=>g(n=>({...n,create_missing:l.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm",children:"Create missing payroll summaries"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.update_existing,onChange:l=>g(n=>({...n,update_existing:l.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm",children:"Update existing summaries"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.include_schedules,onChange:l=>g(n=>({...n,include_schedules:l.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm",children:"Include schedule data"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.include_attendance,onChange:l=>g(n=>({...n,include_attendance:l.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm",children:"Include enhanced attendance data"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select Employees"}),e.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:y,children:h.length===t.length?"Deselect All":"Select All"})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg max-h-60 overflow-y-auto",children:t.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No employees found"}):e.jsx("div",{className:"p-2",children:t.map(l=>{var n;return e.jsxs("label",{className:"flex items-center space-x-3 py-2 px-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.includes(l.id),onChange:()=>I(l.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[l.Fname," ",l.Lname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.idno," - ",l.Department]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[((n=l.employeeSchedules)==null?void 0:n.length)||0," schedules"]})]},l.id)})})}),h.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[h.length," employee",h.length!==1?"s":""," selected"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:c,disabled:m,children:"Cancel"}),e.jsx(v,{onClick:D,disabled:h.length===0||m,className:"bg-indigo-600 hover:bg-indigo-700",children:m?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Sync Data"]})})]})]})]})}):null},Ae=({isOpen:p,onClose:c,employee:i,employeeDetails:t,isLoading:m})=>{var d,g,h;return!p||!i?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Employee Sync Details: ",i.Fname," ",i.Lname]}),e.jsx(v,{variant:"outline",onClick:c,children:e.jsx(E,{className:"h-4 w-4"})})]}),m?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(R,{className:"h-8 w-8 animate-spin text-indigo-600 mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Loading employee details..."})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(se,{children:e.jsx(ae,{className:"text-lg",children:"Employee Information"})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"ID:"}),e.jsx("p",{className:"font-medium",children:i.idno})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Department:"}),e.jsx("p",{className:"font-medium",children:i.Department})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Job Title:"}),e.jsx("p",{className:"font-medium",children:i.Jobtitle||"N/A"})]})]})})]}),e.jsxs(C,{children:[e.jsx(se,{children:e.jsx(ae,{className:"text-lg",children:"Payroll Summary"})}),e.jsx(k,{children:t.payroll_summary?e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Days Worked:"}),e.jsx("p",{className:"font-medium",children:t.payroll_summary.days_worked})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"OT Hours:"}),e.jsx("p",{className:"font-medium",children:t.payroll_summary.ot_hours})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"SLVL Days:"}),e.jsx("p",{className:"font-medium",children:t.payroll_summary.slvl_days})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),e.jsx(L,{variant:t.payroll_summary.status==="posted"?"success":"default",children:t.payroll_summary.status})]})]}):e.jsx("p",{className:"text-gray-500 italic",children:"No payroll summary found for this period"})})]}),e.jsxs(be,{defaultValue:"schedules",className:"space-y-4",children:[e.jsxs(we,{className:"grid w-full grid-cols-8",children:[e.jsx(b,{value:"schedules",children:"Schedules"}),e.jsx(b,{value:"overtime",children:"Overtime"}),e.jsx(b,{value:"slvl",children:"SLVL"}),e.jsx(b,{value:"offsets",children:"Offsets"}),e.jsx(b,{value:"travel",children:"Travel Orders"}),e.jsx(b,{value:"retros",children:"Retros"}),e.jsx(b,{value:"schedule_changes",children:"Schedule Changes"}),e.jsx(b,{value:"attendance",children:"Attendance"})]}),e.jsx($,{value:"schedules",className:"space-y-4",children:((d=t.employee.employeeSchedules)==null?void 0:d.length)>0?e.jsx("div",{className:"grid gap-4",children:t.employee.employeeSchedules.map((x,y)=>e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:x.formatted_work_day}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",x.shift_type_label,")"]})]}),e.jsx("div",{className:"text-sm",children:x.formatted_work_time})]})})},y))}):e.jsx("p",{className:"text-gray-500 italic",children:"No schedules found for this period"})}),e.jsx($,{value:"overtime",className:"space-y-4",children:((h=(g=t.related_data)==null?void 0:g.overtime)==null?void 0:h.length)>0?e.jsx("div",{className:"space-y-4",children:t.related_data.overtime.map((x,y)=>e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:x.date}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[x.total_hours," hours"]})]}),e.jsx(L,{variant:x.status==="approved"?"success":x.status==="rejected"?"destructive":"default",children:x.status})]})})},y))}):e.jsx("p",{className:"text-gray-500 italic",children:"No overtime records found for this period"})}),e.jsx($,{value:"attendance",className:"space-y-4",children:t.attendance_summary?e.jsx(C,{children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Total Records:"}),e.jsx("p",{className:"text-2xl font-bold",children:t.attendance_summary.total_records})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Days Present:"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.attendance_summary.days_present})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Days Absent:"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.attendance_summary.days_absent})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Hours Worked:"}),e.jsx("p",{className:"text-2xl font-bold",children:t.attendance_summary.total_hours_worked})]})]})})}):e.jsx("p",{className:"text-gray-500 italic",children:"No attendance data found for this period"})})]})]}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Failed to load employee details"})]})})},ps=()=>{var q,X,Y,K,Q,Z;const{auth:p,employees:c,payrollSummaries:i,syncStats:t,departments:m,filters:d,periodInfo:g,availableYears:h,availableMonths:x}=pe().props,[y,I]=o.useState(c||[]),[D,l]=o.useState(i||{}),[n,V]=o.useState(t||{}),[r,Re]=o.useState(d),[S,_]=o.useState(!1);console.log("PayrollScheduleIntegration Debug:",{initialEmployees:c,employeesCount:(c||[]).length,employeesWithSchedules:(c||[]).filter(s=>{var a;return((a=s.employeeSchedules)==null?void 0:a.length)>0}).length,sampleEmployee:(c||[])[0],filters:d});const[le,P]=o.useState(!1),[H,z]=o.useState(!1),[ne,ce]=o.useState(null),[U,B]=o.useState(null),[Ie,Ve]=o.useState(!1),[G,W]=o.useState(d.search||""),[O,J]=o.useState({visible:!1,message:"",type:"success"}),j=(s,a="success")=>{J({visible:!0,message:s,type:a})},ie=()=>{J(s=>({...s,visible:!1}))},w=o.useCallback(s=>{try{_(!0);const a=Object.fromEntries(Object.entries(s).filter(([u,N])=>N!=null&&N!==""));window.location.href=`/payroll-schedule-integration?${new URLSearchParams(a).toString()}`}catch(a){console.error("Error applying filters:",a),j("Failed to apply filters","error"),_(!1)}},[]),de=o.useCallback(Se.debounce(s=>{const a={...r,search:s||null};w(a)},500),[r,w]),oe=s=>{const a=s.target.value;W(a),de(a)},me=async(s,a)=>{var u,N;console.log("handleSyncData called:",{employeeIds:s,syncOptions:a,filters:r});try{_(!0);const f=await T.post("/payroll-schedule-integration/sync",{year:r.year,month:r.month,period_type:r.period_type,employee_ids:s,sync_options:a});console.log("Sync response:",f.data),f.data.success?(j(f.data.message,"success"),P(!1),window.location.reload()):j(f.data.message||"Sync failed","error")}catch(f){console.error("Error syncing data:",f),j(((N=(u=f.response)==null?void 0:u.data)==null?void 0:N.message)||"Failed to sync data","error")}finally{_(!1)}},xe=async s=>{try{ce(s),z(!0),B(null);const a=await T.get(`/payroll-schedule-integration/employee/${s.id}/details`,{params:{year:r.year,month:r.month,period_type:r.period_type}});a.data.success?B(a.data.data):j("Failed to load employee details","error")}catch(a){console.error("Error loading employee details:",a),j("Failed to load employee details","error")}},he=async()=>{var s,a;if(confirm("Generate payroll summaries for all employees without existing records?"))try{_(!0);const u=await T.post("/payroll-schedule-integration/generate",{year:r.year,month:r.month,period_type:r.period_type,department:r.department});u.data.success?(j(u.data.message,"success"),window.location.reload()):j(u.data.message||"Generation failed","error")}catch(u){console.error("Error generating payroll:",u),j(((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to generate payroll summaries","error")}finally{_(!1)}},ue=async()=>{try{(await T.post("/payroll-schedule-integration/export",{year:r.year,month:r.month,period_type:r.period_type,department:r.department,format:"xlsx"})).data.success&&j("Export completed successfully","success")}catch(s){console.error("Error exporting data:",s),j("Failed to export data","error")}};return e.jsxs(ye,{user:p.user,children:[e.jsx(ge,{title:"Payroll Schedule Integration"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(fe,{}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[O.visible&&e.jsx($e,{message:O.message,type:O.type,onClose:ie}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-1 flex items-center",children:[e.jsx(je,{className:"h-6 w-6 mr-2 text-indigo-600"}),"Payroll Schedule Integration"]}),e.jsxs("p",{className:"text-gray-600",children:["Sync employee schedules with payroll data for ",g.month_name," (",g.label,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(v,{onClick:ue,variant:"outline",className:"shadow-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(v,{onClick:he,variant:"outline",className:"shadow-sm",disabled:S,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Generate Payroll"]}),e.jsxs(v,{onClick:()=>{console.log("Sync Data button clicked",{employeesLength:y.length,isLoading:S}),P(!0)},className:"bg-indigo-600 hover:bg-indigo-700 shadow-sm",disabled:S||y.length===0,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Sync Data"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(F,{icon:e.jsx(M,{className:"h-5 w-5 text-indigo-600"}),title:"Total Employees",value:((q=n.employees)==null?void 0:q.total)||0,subtitle:`${((X=n.employees)==null?void 0:X.with_schedules)||0} with schedules`,color:"indigo"}),e.jsx(F,{icon:e.jsx(A,{className:"h-5 w-5 text-green-600"}),title:"With Payroll Data",value:((Y=n.employees)==null?void 0:Y.with_payroll)||0,subtitle:`${((((K=n.employees)==null?void 0:K.with_payroll)||0)/(((Q=n.employees)==null?void 0:Q.total)||1)*100).toFixed(1)}% coverage`,color:"green"}),e.jsx(F,{icon:e.jsx(E,{className:"h-5 w-5 text-red-600"}),title:"Missing Payroll",value:((Z=n.employees)==null?void 0:Z.missing_payroll)||0,subtitle:"Need generation",color:"red"}),e.jsx(F,{icon:e.jsx(ke,{className:"h-5 w-5 text-yellow-600"}),title:"Related Records",value:Object.values(n.related_data||{}).reduce((s,a)=>s+a,0),subtitle:"OT, SLVL, Travel, etc.",color:"yellow"})]}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search employees by name, ID, department, or job title...",value:G,onChange:oe,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),G&&e.jsx("button",{onClick:()=>{W("");const s={...r,search:null};w(s)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(E,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("select",{value:r.year,onChange:s=>w({...r,year:s.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:h.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{value:r.month,onChange:s=>w({...r,month:s.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:x.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsxs("select",{value:r.period_type,onChange:s=>w({...r,period_type:s.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"1st_half",children:"1st Half (1-15)"}),e.jsx("option",{value:"2nd_half",children:"2nd Half (16-End)"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:r.department||"",onChange:s=>w({...r,department:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Departments"}),m.map(s=>e.jsx("option",{value:s,children:s},s))]})}),e.jsxs(v,{variant:"outline",onClick:()=>window.location.reload(),disabled:S,children:[e.jsx(R,{className:`h-4 w-4 mr-2 ${S?"animate-spin":""}`}),"Refresh"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Employee Schedule & Payroll Status"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedules"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payroll Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Sync"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No employees found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})}):y.map(s=>{var N,f,ee;const a=D[s.id],u=s.schedule_count||((N=s.employeeSchedules)==null?void 0:N.length)||((f=s.employee_schedules)==null?void 0:f.length)||((ee=s.schedules)==null?void 0:ee.length)||0;return console.log("Employee Debug:",{id:s.id,name:`${s.Fname} ${s.Lname}`,employeeSchedules:s.employeeSchedules,scheduleCount:u,allProperties:Object.keys(s)}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:e.jsx(M,{className:"h-5 w-5 text-indigo-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.Fname," ",s.Lname]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.idno]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.Department}),e.jsx("div",{className:"text-sm text-gray-500",children:s.Line})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[u," schedule",u!==1?"s":""]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a?e.jsxs(L,{variant:"success",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),a.status]}):e.jsxs(L,{variant:"destructive",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Missing"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a!=null&&a.updated_at?new Date(a.updated_at).toLocaleDateString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>xe(s),className:"mr-2",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"View"]})})]},s.id)})})]})})]}),e.jsx(Me,{isOpen:le,onClose:()=>P(!1),onSync:me,employees:y,isLoading:S}),e.jsx(Ae,{isOpen:H,onClose:()=>z(!1),employee:ne,employeeDetails:U,isLoading:!U&&H})]})})]})]})};export{ps as default};
