import{a as ue,r as c,c as ee,j as e,H as xe,R as X,b as P}from"./app-D-TNKEQL.js";import{A as pe}from"./AuthenticatedLayout-PCqsYVxf.js";import{S as he}from"./Sidebar-Cg7Kwp5t.js";import{S as o}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{A as fe,a as ge}from"./alert-ttcl-5kV.js";import{B as y}from"./Button-SjHtsDzU.js";import"./card-qhIlbjIo.js";import{M as Y}from"./Modal-BZgEdwvb.js";import{C as be}from"./ConfirmModal-CYPZTY1S.js";import{F as je}from"./file-text-QjoOwKBJ.js";import{P as te}from"./plus-DLMoKXB_.js";import{C as R}from"./calendar-DhTYrr3L.js";import{C as ve}from"./clock-D8g538AG.js";import{C as z}from"./circle-check-big-BKozuvyq.js";import{C as I}from"./circle-x-Ty60vMKt.js";import{S as se}from"./search-DZDiwkir.js";import{T as G}from"./triangle-alert-CxlByYdl.js";import{E as we}from"./eye-Do6ZODZZ.js";import{P as ye}from"./pen-DjejlzQG.js";import{C as Z}from"./calendar-plus-BLjJYmo4.js";import{T as Ne}from"./trash-2-CDm128Nv.js";import{c as Ce}from"./createLucideIcon-DEWnkTLV.js";import{M as Ee}from"./map-pin-CjLaSfKC.js";import{U as Se}from"./user-DhodrGY1.js";import{U as ke}from"./users-Cw0U-ZsC.js";import{X as Te}from"./x-fQrOvEob.js";import"./ApplicationLogo-Cn-MbvX-.js";import"./Dropdown-BOoMuW7P.js";import"./transition-DeCEAfJ2.js";/* empty css                */import"./clsx-B-dksMZM.js";import"./index-CC88eXid.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),_e=({children:x,defaultValue:a,className:r="",onValueChange:h})=>{const[i,g]=c.useState(a);return c.useEffect(()=>{h&&h(i)},[i,h]),e.jsx("div",{className:r,children:X.Children.map(x,m=>m&&(m.type===re||m.type===Le)?X.cloneElement(m,{activeTab:i,setActiveTab:g}):m)})},re=({children:x,activeTab:a,setActiveTab:r,className:h=""})=>e.jsx("div",{className:`grid grid-cols-5 w-full ${h}`,children:X.Children.map(x,i=>i&&i.type===M?X.cloneElement(i,{activeTab:a,setActiveTab:r}):i)}),M=({children:x,value:a,activeTab:r,setActiveTab:h})=>{const i=r===a;return e.jsx("button",{onClick:()=>h(a),className:`flex-1 py-3 text-sm font-medium text-center border-b-2 ${i?a==="all"?"border-indigo-500 text-indigo-600":a==="Scheduled"?"border-green-500 text-green-600":a==="Completed"?"border-blue-500 text-blue-600":a==="Cancelled"?"border-red-500 text-red-600":a==="Postponed"?"border-yellow-500 text-yellow-600":"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x})},Le=({children:x,value:a,activeTab:r})=>r!==a?null:e.jsx("div",{className:"mt-2",children:x}),W=({title:x,count:a,icon:r,bgColor:h="bg-white",textColor:i="text-gray-600"})=>e.jsxs("div",{className:`${h} shadow rounded-lg p-5 flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${i} font-medium`,children:x}),e.jsx("p",{className:"text-3xl font-bold",children:a})]}),e.jsx("div",{className:"rounded-full p-3",children:r})]}),De=({isOpen:x,onClose:a,event:r})=>{if(!x||!r)return null;const h=i=>new Date(i).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(Y,{show:x,onClose:a,title:"Event Details",children:[e.jsx("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[h(r.start_time)," - ",h(r.end_time)]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r.location||"No location specified"})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Organizer: ",r.organizer]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Department: ",r.department||"All Departments"]})]}),e.jsxs("div",{className:"mb-4",children:[(()=>{switch(r.status){case"Scheduled":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Scheduled"]});case"Completed":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"Completed"]});case"Cancelled":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Cancelled"]});case"Postponed":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Postponed"]});default:return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:r.status})}})(),r.is_public&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 ml-2",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Public Event"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:r.description||"No description provided."})]}),r.event_type&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Event Type"}),e.jsx("p",{className:"text-gray-700",children:r.event_type})]}),r.website_url&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Website"}),e.jsxs("a",{href:r.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Visit Event Website"]})]}),r.image_url&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Event Image"}),e.jsx("div",{className:"mt-2 border rounded-lg overflow-hidden",children:e.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-auto max-h-64 object-cover"})})]}),r.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Notes"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:r.notes})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Attendees (",r.attendees_count||0,")"]}),r.attendees&&r.attendees.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.attendees.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:`${i.Lname}, ${i.Fname}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.Department||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                                        ${i.pivot.attendance_status==="Attended"?"bg-green-100 text-green-800":i.pivot.attendance_status==="Absent"?"bg-red-100 text-red-800":i.pivot.attendance_status==="Confirmed"?"bg-blue-100 text-blue-800":i.pivot.attendance_status==="Declined"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.pivot.attendance_status})})]},i.id))})]})}):e.jsx("p",{className:"text-gray-500",children:"No attendees added to this event."})]})]})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:e.jsx(y,{onClick:a,className:"w-full sm:w-auto",children:"Close"})})]})},Be=({isOpen:x,onClose:a,event:r=null,mode:h="create",departments:i=[]})=>{const[g,m]=c.useState({title:"",description:"",start_time:"",end_time:"",location:"",organizer:"",department:"",status:"Scheduled",event_type:"",is_public:!1,image_url:"",website_url:"",notes:"",attendees:[]}),[b,k]=c.useState({}),[v,f]=c.useState([]),[l,S]=c.useState(""),[E,D]=c.useState(""),[C,A]=c.useState([]),[F,$]=c.useState([]),[O,B]=c.useState(!1);c.useEffect(()=>{x&&(B(!0),ee.get("/employees",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(s=>{if(s.data&&s.data.data){const n=s.data.data;$(n),A(n)}else console.error("Unexpected response format:",s.data),$([]),A([]);B(!1)}).catch(s=>{console.error("Error fetching employees:",s),B(!1),$([]),A([]),o.fire({title:"Error!",text:"Failed to load employees. Please try again.",icon:"error",confirmButtonText:"OK"})}))},[x]),c.useEffect(()=>{if(!Array.isArray(F)){console.warn("availableEmployees is not an array:",F),A([]);return}let s=[...F];if(E&&(s=s.filter(n=>n.Department===E)),l.trim()){const n=l.toLowerCase();s=s.filter(d=>{const u=(d.Fname||"").toLowerCase(),N=(d.Lname||"").toLowerCase(),T=(d.idno||"").toLowerCase(),L=`${u} ${N}`.toLowerCase(),H=`${N} ${u}`.toLowerCase();return u.includes(n)||N.includes(n)||(T==null?void 0:T.includes(n))||L.includes(n)||H.includes(n)})}A(s)},[l,E,F]),c.useEffect(()=>{if(r){const s=r.start_time?new Date(r.start_time):"",n=r.end_time?new Date(r.end_time):"";m({...r,start_time:s?s.toISOString().slice(0,16):"",end_time:n?n.toISOString().slice(0,16):"",attendees:r.attendees?r.attendees.map(d=>d.id):[]}),r.attendees&&f(r.attendees)}else m({title:"",description:"",start_time:"",end_time:"",location:"",organizer:"",department:"",status:"Scheduled",event_type:"",is_public:!1,image_url:"",website_url:"",notes:"",attendees:[]}),f([])},[r]);const V=s=>{s.preventDefault();const n={...g,attendees:v.map(d=>d.id)};h==="create"?P.post("/events",n,{onError:d=>{k(d),o.fire({toast:!0,position:"top",icon:"error",title:"Please check the form for errors.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},onSuccess:()=>{a(),o.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",o.stopTimer),u.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Success!",text:"Event created successfully.",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md",title:"text-gray-700 font-medium"}})}}):P.post(`/events/${r.id}`,{...n,_method:"PUT"},{onError:d=>{k(d),o.fire({toast:!0,position:"top",icon:"error",title:"Please check the form for errors.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},onSuccess:()=>{a(),o.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",o.stopTimer),u.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Success!",text:"Event updated successfully.",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md",title:"text-gray-700 font-medium"}})}})},j=s=>{const{name:n,value:d,type:u,checked:N}=s.target;m(T=>({...T,[n]:u==="checkbox"?N:d})),b[n]&&k(T=>({...T,[n]:void 0}))},K=s=>{v.find(n=>n.id===s.id)||(f([...v,s]),m(d=>({...d,attendees:[...d.attendees,s.id]})),o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:d=>{d.addEventListener("mouseenter",o.stopTimer),d.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:`${s.Fname} ${s.Lname} added to attendees`})),S("")},_=s=>{const n=v.find(d=>d.id===s);f(v.filter(d=>d.id!==s)),m(d=>({...d,attendees:d.attendees.filter(u=>u!==s)})),n&&o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",o.stopTimer),u.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"info",title:`${n.Fname} ${n.Lname} removed from attendees`})};return e.jsx(Y,{show:x,onClose:a,title:h==="create"?"Create New Event":"Edit Event",children:e.jsxs("form",{onSubmit:V,className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"title",name:"title",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b.title?"border-red-500":"border-gray-300"}`,value:g.title,onChange:j}),b.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.title})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:3,className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.description,onChange:j})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Scheduling"})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_time",className:"block text-sm font-medium mb-1",children:["Start Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"start_time",name:"start_time",type:"datetime-local",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b.start_time?"border-red-500":"border-gray-300"}`,value:g.start_time,onChange:j}),b.start_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_time",className:"block text-sm font-medium mb-1",children:["End Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"end_time",name:"end_time",type:"datetime-local",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b.end_time?"border-red-500":"border-gray-300"}`,value:g.end_time,onChange:j}),b.end_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.end_time})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx("input",{id:"location",name:"location",type:"text",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.location,onChange:j})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{id:"status",name:"status",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.status,onChange:j,children:[e.jsx("option",{value:"Scheduled",children:"Scheduled"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"Postponed",children:"Postponed"})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Event Details"})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"organizer",className:"block text-sm font-medium mb-1",children:["Organizer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"organizer",name:"organizer",type:"text",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b.organizer?"border-red-500":"border-gray-300"}`,value:g.organizer,onChange:j}),b.organizer&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.organizer})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium mb-1",children:"Department"}),e.jsxs("select",{id:"department",name:"department",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.department,onChange:j,children:[e.jsx("option",{value:"",children:"Select Department"}),Array.isArray(i)&&i.map((s,n)=>{const d=typeof s=="string"?s:s.name||s.code||"",u=typeof s=="string"?s:s.id||n;return e.jsx("option",{value:d,children:d},`dept-${u}`)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"event_type",className:"block text-sm font-medium mb-1",children:"Event Type"}),e.jsxs("select",{id:"event_type",name:"event_type",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.event_type,onChange:j,children:[e.jsx("option",{value:"",children:"Select Event Type"}),e.jsx("option",{value:"Conference",children:"Conference"}),e.jsx("option",{value:"Workshop",children:"Workshop"}),e.jsx("option",{value:"Seminar",children:"Seminar"}),e.jsx("option",{value:"Training",children:"Training"}),e.jsx("option",{value:"Team Building",children:"Team Building"}),e.jsx("option",{value:"Celebration",children:"Celebration"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"is_public",name:"is_public",type:"checkbox",checked:g.is_public,onChange:j,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_public",className:"block text-sm font-medium",children:"Public Event"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"image_url",className:"block text-sm font-medium mb-1",children:"Image URL"}),e.jsx("input",{id:"image_url",name:"image_url",type:"url",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.image_url,onChange:j,placeholder:"https://"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"website_url",className:"block text-sm font-medium mb-1",children:"Website URL"}),e.jsx("input",{id:"website_url",name:"website_url",type:"url",className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.website_url,onChange:j,placeholder:"https://"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium mb-1",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",rows:2,className:"w-full p-2 border rounded border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:g.notes,onChange:j})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold mb-3 mt-4",children:"Attendees"})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"mb-2 grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(se,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Search employees by name or ID...",value:l,onChange:s=>S(s.target.value),disabled:O})]}),e.jsx("div",{children:e.jsxs("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",value:E,onChange:s=>D(s.target.value),disabled:O,children:[e.jsx("option",{value:"",children:"All Departments"}),Array.isArray(i)&&i.map((s,n)=>{const d=typeof s=="string"?s:s.name||s.code||"",u=typeof s=="string"?s:s.id||n;return e.jsx("option",{value:d,children:d},`dept-filter-${u}`)})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[O?"Loading employees...":C.length===0?"No matching employees found":C.length===1?"1 employee found":`${C.length} employees found`,v.length>0&&` - ${v.length} employee${v.length>1?"s":""} selected`]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border rounded-md",children:O?e.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading employees..."}):C.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:C.map(s=>e.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 cursor-pointer",onClick:()=>K(s),children:[e.jsxs("div",{className:"ml-3 flex-grow",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.Lname,", ",s.Fname," ",s.MName||""]}),e.jsxs("div",{className:"text-xs text-gray-500 flex space-x-2",children:[e.jsx("span",{children:s.idno||"No ID"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.Department||"No Dept"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.Jobtitle||"No Title"})]})]}),e.jsx(y,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",children:e.jsx(te,{className:"h-4 w-4"})})]},s.id))}):e.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No employees found matching your criteria"})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2",children:["Selected Attendees (",v.length,")"]}),v.length>0?e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{scope:"col",className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[s.Lname,", ",s.Fname]}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:s.Department||"-"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(y,{type:"button",variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",onClick:()=>_(s.id),children:e.jsx(Te,{className:"h-4 w-4"})})})]},s.id))})]})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No attendees selected."})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(y,{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx(y,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:h==="create"?"Create Event":"Save Changes"})]})]})})},Pe=({isOpen:x,onClose:a,event:r,onReschedule:h})=>{const[i,g]=c.useState({start_time:"",end_time:"",status:"Scheduled"}),[m,b]=c.useState({});c.useEffect(()=>{if(r){const f=r.start_time?new Date(r.start_time):"",l=r.end_time?new Date(r.end_time):"";g({start_time:f?f.toISOString().slice(0,16):"",end_time:l?l.toISOString().slice(0,16):"",status:"Scheduled"})}},[r]);const k=f=>{const{name:l,value:S}=f.target;g(E=>({...E,[l]:S})),m[l]&&b(E=>({...E,[l]:void 0}))},v=f=>{if(f.preventDefault(),new Date(i.end_time)<=new Date(i.start_time)){b({...m,end_time:"End time must be after start time"});return}P.post(`/events/${r.id}/reschedule`,{...i,_method:"PUT"},{onError:l=>{b(l),o.fire({toast:!0,position:"top",icon:"error",title:"Please check the form for errors.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},onSuccess:()=>{a(),o.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:S=>{S.addEventListener("mouseenter",o.stopTimer),S.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Success!",text:"Event rescheduled successfully.",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md",title:"text-gray-700 font-medium"}}),h&&h()}})};return e.jsx(Y,{show:x,onClose:a,title:"Reschedule Event",children:e.jsxs("form",{onSubmit:v,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_time",className:"block text-sm font-medium mb-1",children:["New Start Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"start_time",name:"start_time",type:"datetime-local",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${m.start_time?"border-red-500":"border-gray-300"}`,value:i.start_time,onChange:k,required:!0}),m.start_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_time",className:"block text-sm font-medium mb-1",children:["New End Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"end_time",name:"end_time",type:"datetime-local",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${m.end_time?"border-red-500":"border-gray-300"}`,value:i.end_time,onChange:k,required:!0}),m.end_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.end_time})]}),e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-100",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(G,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Rescheduling Notice"}),e.jsx("p",{className:"text-sm text-yellow-700",children:'This will notify all attendees about the schedule change. The event status will be set to "Scheduled".'})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(y,{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx(y,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reschedule Event"})]})]})})},Ae=({events:x,onEdit:a,onDelete:r,onView:h,onMarkCompleted:i,onMarkCancelled:g,onMarkScheduled:m,onReschedule:b})=>{if(!x)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No events data received"});if(!Array.isArray(x))return console.error("Events is not an array:",x),e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Invalid events data"});if(x.length===0)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No events found"});const k=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),v=l=>new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),f=l=>{switch(l){case"Scheduled":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Scheduled"]});case"Completed":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"Completed"]});case"Cancelled":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Cancelled"]});case"Postponed":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Postponed"]});default:return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:l})}};return e.jsx("div",{className:"overflow-x-auto",style:{maxHeight:"65vh",overflowY:"auto"},children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organizer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendees"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(l=>e.jsxs("tr",{className:`hover:bg-gray-50 ${l.status==="Cancelled"?"bg-red-50":l.status==="Postponed"?"bg-yellow-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{variant:"outline",className:"p-2",onClick:()=>h(l),title:"View Event",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(y,{variant:"secondary",className:"p-2",onClick:()=>a(l),title:"Edit Event",children:e.jsx(ye,{className:"h-4 w-4"})}),(l.status==="Scheduled"||l.status==="Postponed")&&e.jsx(y,{variant:"default",className:"p-2 bg-purple-500 hover:bg-purple-600 text-white",onClick:()=>b(l),title:"Reschedule Event",children:e.jsx(Z,{className:"h-4 w-4"})}),l.status!=="Completed"&&e.jsx(y,{variant:"default",className:"p-2 bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>i(l.id),title:"Mark as Completed",children:e.jsx(z,{className:"h-4 w-4"})}),l.status!=="Cancelled"&&e.jsx(y,{variant:"destructive",className:"p-2",onClick:()=>g(l.id),title:"Cancel Event",children:e.jsx(I,{className:"h-4 w-4"})}),(l.status==="Cancelled"||l.status==="Postponed")&&e.jsx(y,{variant:"default",className:"p-2 bg-green-500 hover:bg-green-600 text-white",onClick:()=>b(l),title:"Reschedule Event",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(y,{variant:"destructive",className:"p-2",onClick:()=>r(l.id),title:"Delete Event",children:e.jsx(Ne,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:l.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(l.start_time)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[v(l.start_time)," - ",v(l.end_time)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f(l.status),l.is_public&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 ml-1",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Public"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.location||(l.website_url?e.jsxs("span",{className:"inline-flex items-center text-blue-600",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Virtual"]}):"-")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.organizer}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.attendees_count||0})]},l.id))})]})})},xt=({events:x,counts:a={},currentStatus:r="all",flash:h,employees:i=[],departments:g=[]})=>{const m=Array.isArray(x)?x:[],{auth:b}=ue().props,[k,v]=c.useState(m),[f,l]=c.useState(""),[S,E]=c.useState(!1),[D,C]=c.useState(null),[A,F]=c.useState("create"),[$,O]=c.useState(!1),[B,V]=c.useState(!1),[j,K]=c.useState(""),[_,s]=c.useState(""),[n,d]=c.useState(r||"all"),[u,N]=c.useState({isOpen:!1,title:"",message:"",confirmText:"",confirmVariant:"destructive",onConfirm:()=>{}}),T=c.useRef(!1),L=c.useRef(null),H=c.useRef({searchTerm:"",activeTab:"all",fromDate:"",toDate:""}),U={total:(a==null?void 0:a.total)!==void 0?a.total:m.length||0,scheduled:(a==null?void 0:a.scheduled)!==void 0?a.scheduled:m.filter(t=>(t==null?void 0:t.status)==="Scheduled").length||0,completed:(a==null?void 0:a.completed)!==void 0?a.completed:m.filter(t=>(t==null?void 0:t.status)==="Completed").length||0,cancelled:(a==null?void 0:a.cancelled)!==void 0?a.cancelled:m.filter(t=>(t==null?void 0:t.status)==="Cancelled").length||0,postponed:(a==null?void 0:a.postponed)!==void 0?a.postponed:m.filter(t=>(t==null?void 0:t.status)==="Postponed").length||0};c.useEffect(()=>{console.log("rescheduleModalOpen state changed:",B),console.log("selectedEvent:",D)},[B,D]),c.useEffect(()=>{!x||!Array.isArray(x)||x.length===0?T.current||(T.current=!0,ee.get("/events/list",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(t=>{t.data&&t.data.events&&Array.isArray(t.data.events)&&(v(t.data.events),L.current=t.data.events)}).catch(t=>{console.error("Error fetching events via API:",t),o.fire({title:"Error!",text:"Failed to load events. Please refresh the page or try again later.",icon:"error",confirmButtonText:"OK"})})):L.current=m},[]),c.useEffect(()=>{JSON.stringify(L.current)!==JSON.stringify(m)&&(L.current=m,Q())},[m]);const Q=()=>{if(!L.current||!Array.isArray(L.current))return;let t=[...L.current];n!=="all"&&(t=t.filter(p=>p.status===n)),f&&(t=t.filter(p=>p.title&&p.title.toLowerCase().includes(f.toLowerCase())||p.location&&p.location.toLowerCase().includes(f.toLowerCase())||p.organizer&&p.organizer.toLowerCase().includes(f.toLowerCase())||p.department&&p.department.toLowerCase().includes(f.toLowerCase())||p.description&&p.description.toLowerCase().includes(f.toLowerCase()))),j&&(t=t.filter(p=>{if(!p.start_time)return!1;const w=new Date(p.start_time),q=new Date(j);return w>=q})),_&&(t=t.filter(p=>{if(!p.start_time)return!1;const w=new Date(p.start_time),q=new Date(_);return q.setHours(23,59,59,999),w<=q})),v(t)};c.useEffect(()=>{const t={searchTerm:f,activeTab:n,fromDate:j,toDate:_};if(JSON.stringify(H.current)!==JSON.stringify(t)){H.current=t;const p=setTimeout(()=>{Q()},300);return()=>clearTimeout(p)}},[f,n,j,_]);const ae=t=>{C(t),O(!0)},le=t=>{console.log("Rescheduling event:",t),C(t),V(!0),console.log("Modal should be open:",!0)},ne=t=>{N({isOpen:!0,title:"Delete Event",message:"Are you sure you want to delete this event? This action cannot be undone.",confirmText:"Delete",confirmVariant:"destructive",onConfirm:()=>{P.post(`/events/${t}`,{_method:"DELETE"},{onSuccess:()=>{N({...u,isOpen:!1}),o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.addEventListener("mouseenter",o.stopTimer),w.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Event deleted successfully",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md flex items-start",title:"text-gray-700 ml-3 font-medium"}})},onError:p=>{console.error("Delete failed:",p),o.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to delete event",showConfirmButton:!1,timer:3e3})}})}})},ie=t=>{N({isOpen:!0,title:"Mark Event as Completed",message:"Are you sure you want to mark this event as completed?",confirmText:"Mark Completed",confirmVariant:"default",onConfirm:()=>{P.post(`/events/${t}/status`,{status:"Completed"},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{N({...u,isOpen:!1}),o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.addEventListener("mouseenter",o.stopTimer),w.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Event marked as completed",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md flex items-start",title:"text-gray-700 ml-3 font-medium"}})},onError:()=>{o.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to update event status",showConfirmButton:!1,timer:3e3})}})}})},oe=t=>{N({isOpen:!0,title:"Cancel Event",message:"Are you sure you want to cancel this event?",confirmText:"Cancel Event",confirmVariant:"destructive",onConfirm:()=>{P.post(`/events/${t}/status`,{status:"Cancelled"},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{N({...u,isOpen:!1}),o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.addEventListener("mouseenter",o.stopTimer),w.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Event cancelled successfully",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md flex items-start",title:"text-gray-700 ml-3 font-medium"}})},onError:()=>{o.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to cancel event",showConfirmButton:!1,timer:3e3})}})}})},de=t=>{N({isOpen:!0,title:"Reschedule Event",message:"Are you sure you want to mark this event as scheduled?",confirmText:"Schedule",confirmVariant:"default",onConfirm:()=>{P.post(`/events/${t}/status`,{status:"Scheduled"},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{N({...u,isOpen:!1}),o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.addEventListener("mouseenter",o.stopTimer),w.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"success",title:"Event rescheduled successfully",iconHtml:'<div class="rounded-full bg-green-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md flex items-start",title:"text-gray-700 ml-3 font-medium"}})},onError:()=>{o.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to reschedule event",showConfirmButton:!1,timer:3e3})}})}})},ce=t=>{if(t!==n){d(t);const p=setTimeout(()=>{P.visit(`/events?status=${t}`,{preserveState:!0,preserveScroll:!0,only:["events","currentStatus"]})},300);return()=>clearTimeout(p)}},me=()=>{const t=new URLSearchParams;n!=="all"&&t.append("status",n),f&&t.append("search",f),j&&t.append("from_date",j),_&&t.append("to_date",_),window.location.href=`/events/export?${t.toString()}`,o.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:w=>{w.addEventListener("mouseenter",o.stopTimer),w.addEventListener("mouseleave",o.resumeTimer)}}).fire({icon:"info",title:"Exporting events data...",text:"Your download will begin shortly",iconHtml:'<div class="rounded-full bg-blue-100 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg></div>',customClass:{popup:"px-6 py-4 rounded-lg shadow-md flex items-start",title:"text-gray-700 ml-3 font-medium"}})};return e.jsxs(pe,{user:b.user,children:[e.jsx(xe,{title:"Event Management"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(he,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[(h==null?void 0:h.message)&&e.jsx(fe,{className:"mb-4",children:e.jsx(ge,{children:h.message})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Event Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage company events."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(y,{onClick:me,className:"px-5 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors duration-200 flex items-center",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),"Export to Excel"]}),e.jsxs(y,{onClick:()=>{F("create"),C(null),E(!0)},className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"Create Event"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(W,{title:"Total Events",count:U.total,icon:e.jsx(R,{className:"h-6 w-6 text-indigo-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(W,{title:"Scheduled",count:U.scheduled,icon:e.jsx(ve,{className:"h-6 w-6 text-green-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(W,{title:"Completed",count:U.completed,icon:e.jsx(z,{className:"h-6 w-6 text-blue-600"}),bgColor:"bg-white",textColor:"text-gray-600"}),e.jsx(W,{title:"Cancelled",count:U.cancelled,icon:e.jsx(I,{className:"h-6 w-6 text-red-600"}),bgColor:"bg-white",textColor:"text-gray-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f,onChange:t=>l(t.target.value)})]}),e.jsx("div",{children:e.jsx("input",{type:"date",placeholder:"From Date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:j,onChange:t=>K(t.target.value)})}),e.jsx("div",{children:e.jsx("input",{type:"date",placeholder:"To Date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:_,onChange:t=>s(t.target.value)})})]}),e.jsx(_e,{defaultValue:n,className:"mb-6",onValueChange:ce,children:e.jsxs(re,{className:"grid grid-cols-5 w-full",children:[e.jsx(M,{value:"all",children:"All Events"}),e.jsxs(M,{value:"Scheduled",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Scheduled"]}),e.jsxs(M,{value:"Completed",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Completed"]}),e.jsxs(M,{value:"Cancelled",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Cancelled"]}),e.jsxs(M,{value:"Postponed",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Postponed"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsx(Ae,{events:k,onView:ae,onEdit:t=>{C(t),F("edit"),E(!0)},onDelete:ne,onMarkCompleted:ie,onMarkCancelled:oe,onMarkScheduled:de,onReschedule:le})}),e.jsx(De,{isOpen:$,onClose:()=>{O(!1),C(null)},event:D}),e.jsx(Be,{isOpen:S,onClose:()=>{E(!1),C(null)},event:D,mode:A,employees:i,departments:g}),console.log("Rendering RescheduleModal with props:",{isOpen:B,event:D}),e.jsx(Pe,{isOpen:B,onClose:()=>{console.log("Closing reschedule modal"),V(!1),C(null)},event:D,onReschedule:()=>{window.location.reload()}}),e.jsx(be,{isOpen:u.isOpen,onClose:()=>N({...u,isOpen:!1}),title:u.title,message:u.message,confirmText:u.confirmText,confirmVariant:u.confirmVariant,onConfirm:u.onConfirm})]})})]})]})};export{xt as default};
