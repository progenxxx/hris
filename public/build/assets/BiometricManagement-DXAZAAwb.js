import{r as c,j as e,M as me,h as F}from"./app-C_ClQmDY.js";import{A as xe}from"./AuthenticatedLayout-3cR_usYW.js";import{S as ue}from"./Sidebar-Bhx-DaaE.js";import{L as he,y as n}from"./index-CBJp45S4.js";/* empty css                      */import{c as ge}from"./createLucideIcon-D1ADp28Z.js";import{C as pe}from"./circle-plus-CwuJycbi.js";import{L as fe}from"./loader-BOdAblRz.js";import{S as be}from"./search-BDKFcNkb.js";import{C as je}from"./circle-check-big-CRb1LywB.js";import{C as ye}from"./circle-x-CQhehAg2.js";import{T as V}from"./trash-2-D_IcoVGU.js";import{R as U}from"./refresh-cw-BGi6So-C.js";import{S as ve}from"./square-pen-CSEKZsDO.js";import"./ApplicationLogo-BORf3137.js";import"./Dropdown-CHXQRgIL.js";import"./transition-0ACRCynB.js";import"./x-Q1lJB2Tb.js";/* empty css                */import"./users-Dr4YdQlV.js";import"./file-text-DMC5LN9m.js";import"./calendar-B28JSqfz.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=ge("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]),Ve=({auth:X,devices:b=[]})=>{const[H,h]=c.useState(!1),[j,E]=c.useState(!1),[M,P]=c.useState(null),[J,w]=c.useState(!1),[G,T]=c.useState(!1),[r,A]=c.useState(null),[u,y]=c.useState(null),[q,I]=c.useState(!1),[k,$]=c.useState(!1),[v,C]=c.useState([]),[R,O]=c.useState(0),[Q,_]=c.useState(!1),[S,W]=c.useState(null),[m,K]=c.useState({device_id:null,start_date:"",end_date:""}),[l,N]=c.useState({name:"",ip_address:"",port:"4370",location:"",model:"",serial_number:"",status:"active"}),[g,D]=c.useState({ip_address:"",port:"4370"}),z=s=>{const{name:t,value:i}=s.target;K(a=>({...a,[t]:i}))},Y=s=>{if(s.preventDefault(),m.start_date&&m.end_date){const d=new Date(m.start_date),x=new Date(m.end_date);if(d>x){n.error("Start date must be before or equal to end date");return}}const t=n.loading(`Connecting to ${S.name}...`,{autoClose:!1});let i,a=0;i=setInterval(()=>{const d=["Connecting to device...","Authenticating...","Retrieving attendance data...","Processing records...","Saving to database..."],x=d[Math.min(Math.floor(a/20),d.length-1)];n.update(t,{render:`${x} (${Math.min(a,95)}%)`,isLoading:!0}),a+=5,a>95&&clearInterval(i)},500);const o={device_id:S.id,...m.start_date&&{start_date:m.start_date},...m.end_date&&{end_date:m.end_date}};fetch(route("biometric-devices.fetch-logs"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(o)}).then(d=>{if(clearInterval(i),!d.ok)throw new Error(`Network response: ${d.status}`);return d.json()}).then(d=>{var x;if(d.success){const f=((x=d.log_summary)==null?void 0:x.processed_count)||"No",ce=m.start_date&&m.end_date?` from ${m.start_date} to ${m.end_date}`:"";n.update(t,{render:`Successfully fetched logs${ce}: ${f} records saved`,type:"success",isLoading:!1,autoClose:3e3}),_(!1)}else n.update(t,{render:`Failed: ${d.message||"Unknown error"}`,type:"error",isLoading:!1,autoClose:3e3})}).catch(d=>{clearInterval(i),n.update(t,{render:`Error: ${d.message}`,type:"error",isLoading:!1,autoClose:3e3})})},ee=()=>e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:Y,children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(U,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Fetch Logs for ",S.name]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700",children:"Start Date (Optional)"}),e.jsx("input",{type:"date",name:"start_date",id:"start_date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:m.start_date,onChange:z})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700",children:"End Date (Optional)"}),e.jsx("input",{type:"date",name:"end_date",id:"end_date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:m.end_date,onChange:z})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leave dates blank to fetch all available logs. If both dates are provided, only logs within that range will be fetched."})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Fetch Logs"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>_(!1),children:"Cancel"})]})]})})]})}),p=s=>{const{name:t,value:i}=s.target;N({...l,[t]:i})},B=s=>{const{name:t,value:i}=s.target;D({...g,[t]:i})},se=()=>{E(!1),P(null),N({name:"",ip_address:"",port:"4370",location:"",model:"",serial_number:"",status:"active"}),C([]),h(!0)},te=async s=>{$(!0),C([]),O(0);try{const t=n.loading(`Scanning subnet ${s}.0/24 for ZKTeco devices...`),i={subnet:s,port:4370},a=await fetch(route("biometric-devices.scan-network"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(i)});if(!a.ok)throw new Error(`Network error: ${a.status}`);const o=await a.json();if(O(100),o.success&&o.devices&&o.devices.length>0){const d=b.map(f=>f.ip_address),x=o.devices.filter(f=>!d.includes(f.ip_address));C(x),x.length>0?n.update(t,{render:`Found ${x.length} new ZKTeco device(s) on the network`,type:"success",isLoading:!1,autoClose:3e3}):n.update(t,{render:"All ZKTeco devices on this network are already registered",type:"info",isLoading:!1,autoClose:3e3})}else n.update(t,{render:"No ZKTeco devices found on the network",type:"info",isLoading:!1,autoClose:3e3})}catch(t){console.error("Network scan error:",t),n.error(`Scan failed: ${t.message}`)}finally{$(!1)}},ae=s=>{N({...l,name:s.name||`ZKTeco Device (${s.ip_address})`,ip_address:s.ip_address,port:s.port.toString()||"4370",model:s.model||"",serial_number:s.serial_number||"",location:l.location||"",status:l.status||"active"}),n.info(e.jsxs("div",{children:[e.jsxs("p",{children:["Selected device: ",s.name]}),e.jsx("p",{className:"text-xs mt-1",children:"Please complete all required fields, especially the Location field."})]}),{autoClose:3e3})},ne=s=>{E(!0),P(s),N({name:s.name,ip_address:s.ip_address,port:s.port.toString(),location:s.location,model:s.model||"",serial_number:s.serial_number||"",status:s.status}),h(!0)},re=s=>{A(s),w(!0)},ie=s=>{s.preventDefault();const i=["name","ip_address","port","location"].filter(a=>!l[a]);if(i.length>0){const a=i.map(o=>o.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())).join(", ");n.error(e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Please complete all required fields:"})}),e.jsx("p",{children:a}),e.jsx("p",{className:"text-xs mt-1",children:"Note: Device information obtained from scanning may need to be supplemented with additional details."})]}),{autoClose:5e3});return}j&&M?F.put(route("biometric-devices.update",M.id),l,{onSuccess:()=>{h(!1),n.success("Device updated successfully")},onError:a=>{console.error(a),Object.keys(a).forEach(o=>{n.error(a[o])})}}):F.post(route("biometric-devices.store"),l,{onSuccess:()=>{h(!1),n.success("Device added successfully")},onError:a=>{console.error(a),Object.keys(a).forEach(o=>{n.error(a[o])})}})},oe=()=>{r&&F.delete(route("biometric-devices.destroy",r.id),{onSuccess:()=>{w(!1),A(null),n.success("Device deleted successfully")},onError:s=>{console.error(s),n.error("Failed to delete device")}})},Z=(s=null)=>{D(s?{ip_address:s.ip_address,port:s.port.toString()}:{ip_address:"",port:"4370"}),y(null),T(!0)},le=async s=>{s.preventDefault(),I(!0),y(null);try{const t={ip_address:g.ip_address,port:g.port,serial_number:"",device_pin:"",verbose:!0,connection_timeout:1e4,retry_attempts:2},i=await fetch(route("biometric-devices.test-connection"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(t)}),a=i.headers.get("content-type");if(!a||!a.includes("application/json"))throw new Error(`Unexpected response type: ${a}`);const o=await i.json();console.group("Connection Test Details"),console.log("Connection Payload:",t),console.log("Server Response:",{success:o.success,message:o.message,deviceDetails:o.device_info}),console.groupEnd(),y(o),o.success?n.success("Device Connection Verified",{description:"Authentication and connectivity confirmed",duration:4e3}):n.error("Connection Verification Failed",{description:o.message||"Unable to establish device connection",duration:4e3})}catch(t){console.group("Connection Test Error"),console.error("Connection Authentication Error:",{name:t.name,message:t.message,stack:t.stack,connectionDetails:{ipAddress:g.ip_address,port:g.port}}),console.groupEnd(),y({success:!1,message:`Connection Error: ${t.message}`,recommendations:["Verify device IP and port","Check network connectivity","Confirm device is powered on","Validate device authentication credentials"],detailedError:{name:t.name,message:t.message,stack:t.stack?t.stack.split(`
`).slice(0,3).join(`
`):"No stack trace available"}}),n.error("Connection Test Failed",{description:`Detailed Error: ${t.message}
Check network, credentials, and device status`,duration:5e3})}finally{I(!1)}},de=s=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Z(s),className:"text-indigo-600 hover:text-indigo-900",title:"Test Connection",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{W(s),K({device_id:s.id,start_date:"",end_date:""}),_(!0)},className:"text-green-600 hover:text-green-900",title:"Fetch Logs",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>ne(s),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>re(s),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(V,{className:"w-5 h-5"})})]});return e.jsxs(xe,{user:X.user,children:[e.jsx(me,{title:"Biometric Device Management"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(ue,{}),e.jsxs("div",{className:"flex-1 p-8",children:[e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Biometric Device Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-900 focus:outline-none focus:border-green-900 focus:shadow-outline-gray transition ease-in-out duration-150",onClick:()=>Z(),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Test Connection"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:shadow-outline-gray transition ease-in-out duration-150",onClick:se,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Add Device"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Port"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Sync"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:!b||b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:'No devices found. Click "Add Device" to add a new biometric device.'})}):b.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.ip_address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.port}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.last_sync?new Date(s.last_sync).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:de(s)})]},s.id))})]})})]})})}),Q&&ee(),H&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none",children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>h(!1)}),e.jsx("div",{className:"relative w-full max-w-2xl mx-4 my-6 transition-all duration-300 ease-in-out transform",children:e.jsxs("div",{className:"relative flex flex-col w-full bg-white rounded-xl shadow-2xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 rounded-t-xl bg-gray-50",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:j?"Edit Device":"Add New Device"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("form",{id:"device-form",onSubmit:ie,className:"p-6 space-y-6",children:[!j&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-indigo-800 font-medium",children:"Network Device Discovery"}),e.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",onClick:()=>te("10.151.5"),disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"animate-spin w-4 h-4 mr-2"}),"Scanning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Scan Network"]})})]}),k&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${R}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Scanning..."}),e.jsxs("span",{children:[Math.round(R),"% Complete"]})]})]})]}),v.length>0&&e.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:e.jsxs("h5",{className:"text-sm font-semibold text-gray-700",children:["Found ",v.length," Device",v.length>1?"s":""]})}),e.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200 group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 group-hover:text-indigo-600",children:s.name||`ZKTeco Device (${s.ip_address})`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-x-2",children:[e.jsxs("span",{children:["IP: ",s.ip_address]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Port: ",s.port||4370]})]}),(s.model||s.serial_number)&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.model&&e.jsxs("span",{children:["Model: ",s.model]}),s.serial_number&&e.jsxs("span",{className:"ml-2",children:["S/N: ",s.serial_number]})]})]}),e.jsx("button",{type:"button",className:"ml-4 px-3 py-1.5 bg-indigo-100 text-indigo-700 text-sm font-medium rounded-md hover:bg-indigo-200 transition-colors",onClick:i=>{i.stopPropagation(),ae(s)},children:"Select"})]},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Device Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.name,onChange:p,required:!0}),!l.name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Device name is required"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ip_address",className:"block text-sm font-medium text-gray-700 mb-1",children:["IP Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"ip_address",id:"ip_address",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.ip_address,onChange:p,placeholder:"192.168.1.100",required:!0}),!l.ip_address&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"IP address is required"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"port",className:"block text-sm font-medium text-gray-700 mb-1",children:["Port ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"port",id:"port",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.port,onChange:p,min:"1",max:"65535",placeholder:"4370",required:!0}),!l.port&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Port is required"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"location",id:"location",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.location,onChange:p,placeholder:"Main Office",required:!0}),!l.location&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Location is required"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),e.jsx("input",{type:"text",name:"model",id:"model",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.model,onChange:p,placeholder:"ZKTeco K40"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"serial_number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",id:"serial_number",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.serial_number,onChange:p,placeholder:"ZK12345678"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",id:"status",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm transition-all duration-200",value:l.status,onChange:p,required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," Fields marked with an asterisk (",e.jsx("span",{className:"text-red-500",children:"*"}),") are required. Ensure all mandatory fields are completed."]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3 rounded-b-xl",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 transition-colors",onClick:()=>h(!1),children:"Cancel"}),e.jsx("button",{type:"submit",form:"device-form",className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors",children:j?"Update Device":"Add Device"})]})]})})]}),G&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:le,children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(L,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Test Biometric Device Connection"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_ip_address",className:"block text-sm font-medium text-gray-700",children:"IP Address"}),e.jsx("input",{type:"text",name:"ip_address",id:"test_ip_address",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:g.ip_address,onChange:B,placeholder:"192.168.1.100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"test_port",className:"block text-sm font-medium text-gray-700",children:"Port"}),e.jsx("input",{type:"number",name:"port",id:"test_port",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:g.port,onChange:B,min:"1",max:"65535",placeholder:"4370",required:!0})]}),u&&e.jsxs("div",{className:`mt-4 p-3 rounded-md ${u.success?"bg-green-50":"bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[u.success?e.jsx(je,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(ye,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"font-medium",children:u.success?"Connection Successful":"Connection Failed"})]}),u.message&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:u.message}),u.device_info&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Device Information"}),e.jsx("div",{className:"mt-1 grid grid-cols-2 gap-x-4 gap-y-2 text-xs",children:Object.entries(u.device_info).map(([s,t])=>e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 capitalize",children:s.replace("_"," ")}),e.jsx("dd",{className:"font-medium",children:t})]},s))})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",disabled:q,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:q?"Testing...":"Test Connection"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>T(!1),children:"Cancel"})]})]})})]})}),J&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(V,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Biometric Device"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete the device "',r==null?void 0:r.name,'"? This action cannot be undone and will remove all associated data.']}),e.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-md",children:e.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Name"}),e.jsx("dd",{className:"font-medium",children:r==null?void 0:r.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"IP Address"}),e.jsx("dd",{className:"font-medium",children:r==null?void 0:r.ip_address})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Location"}),e.jsx("dd",{className:"font-medium",children:r==null?void 0:r.location})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Status"}),e.jsx("dd",{className:"font-medium",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(r==null?void 0:r.status)==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r==null?void 0:r.status})})]})]})})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:oe,children:"Delete Device"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>w(!1),children:"Cancel"})]})]})]})}),e.jsx(he,{})]})]})]})};export{Ve as default};
