import{r as n,j as e,M as te}from"./app-C_ClQmDY.js";import{A as ae,S as ne}from"./AuthenticatedLayout-3cR_usYW.js";import{S as ie}from"./Sidebar-Bhx-DaaE.js";import{A as O,a as W}from"./alert-CLB16PDI.js";import{B as o}from"./Button-Du7mhroA.js";import{C as _,a as re,b as ce,c as y}from"./card-Cx-sVNbO.js";import{C as de}from"./circle-plus-CwuJycbi.js";import{T as le}from"./triangle-alert-BvRbjIm5.js";import{C as U}from"./circle-check-big-CRb1LywB.js";import{S as me}from"./search-BDKFcNkb.js";import{U as xe}from"./users-Dr4YdQlV.js";import{D as oe}from"./dollar-sign-EMsHpLE5.js";import{T as ue}from"./trending-up-B1F8h_AN.js";import{C as he}from"./circle-alert-xhzyFgGA.js";import{R as je}from"./refresh-cw-BGi6So-C.js";import{F as ge}from"./file-text-DMC5LN9m.js";import{c as pe}from"./createLucideIcon-D1ADp28Z.js";import{C as Y}from"./clock-CtBUUqYK.js";import{C as fe}from"./circle-x-CQhehAg2.js";import{E as Ne}from"./eye-BzxMP9Yo.js";import{X as ve}from"./x-Q1lJB2Tb.js";import{U as be}from"./user-CzeVpIfb.js";import{C as we}from"./calculator-CUVXM0j_.js";import"./ApplicationLogo-BORf3137.js";import"./Dropdown-CHXQRgIL.js";import"./transition-0ACRCynB.js";/* empty css                */import"./calendar-B28JSqfz.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ye=({isOpen:w,payroll:s,onClose:C,onUpdate:B})=>{var p,P,h,D,j,A,f,F,N,T,v,z,M,E,r,m,l,R,L;n.useState(!1),n.useState(!1);const[H,S]=n.useState({}),[a,k]=n.useState(null);n.useEffect(()=>{w&&s&&(S({basic_rate:s.basic_rate||0,pay_allowance:s.pay_allowance||0,other_earnings:s.other_earnings||0,advance_deduction:s.advance_deduction||0,charge_store:s.charge_store||0,charge_deduction:s.charge_deduction||0,meals_deduction:s.meals_deduction||0,miscellaneous_deduction:s.miscellaneous_deduction||0,other_deductions:s.other_deductions||0,calculation_notes:s.calculation_notes||""}),X())},[w,s]);const X=async()=>{try{const u=await fetch(`/final-payrolls/${s.id}/calculation-breakdown`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(u.ok){const x=await u.json();x.success&&k(x.data)}}catch(u){console.error("Error loading calculation breakdown:",u)}},i=u=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(u||0),b=(u,x=2)=>parseFloat(u||0).toFixed(x);return w?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Final Payroll Details"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(s==null?void 0:s.status)==="paid"?"bg-green-100 text-green-800":(s==null?void 0:s.status)==="finalized"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:((p=s==null?void 0:s.status)==null?void 0:p.charAt(0).toUpperCase())+((P=s==null?void 0:s.status)==null?void 0:P.slice(1))}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(s==null?void 0:s.approval_status)==="approved"?"bg-green-100 text-green-800":(s==null?void 0:s.approval_status)==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:((h=s==null?void 0:s.approval_status)==null?void 0:h.charAt(0).toUpperCase())+((D=s==null?void 0:s.approval_status)==null?void 0:D.slice(1))})]}),e.jsx("button",{onClick:C,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:e.jsx(ve,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 mr-2"}),"Employee Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employee"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s==null?void 0:s.employee_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.employee_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:s==null?void 0:s.department}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.line})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Period"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.full_period)||`${new Date(0,(s==null?void 0:s.month)-1).toLocaleString("default",{month:"long"})} ${s==null?void 0:s.year} (${(s==null?void 0:s.period_type)==="1st_half"?"1-15":"16-30/31"})`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Cost Center: ",(s==null?void 0:s.cost_center)||"N/A"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i(s==null?void 0:s.gross_earnings)}),e.jsx("div",{className:"text-sm text-green-800",children:"Gross Earnings"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i(s==null?void 0:s.total_deductions)}),e.jsx("div",{className:"text-sm text-red-800",children:"Total Deductions"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i(s==null?void 0:s.net_pay)}),e.jsx("div",{className:"text-sm text-blue-800",children:"Net Pay"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b(s==null?void 0:s.days_worked,1)}),e.jsx("div",{className:"text-sm text-purple-800",children:"Days Worked"})]})]}),a&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Calculation Breakdown"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Basic Calculation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Pay Type:"}),e.jsx("span",{className:"ml-2 font-medium",children:((j=a.basic_calculation)==null?void 0:j.pay_type)||"daily"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Basic Rate:"}),e.jsx("span",{className:"ml-2 font-medium",children:i((A=a.basic_calculation)==null?void 0:A.basic_rate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Days/Hours:"}),e.jsx("span",{className:"ml-2 font-medium",children:b(((f=a.basic_calculation)==null?void 0:f.days_worked)||((F=a.basic_calculation)==null?void 0:F.hours_worked),2)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Basic Pay:"}),e.jsx("span",{className:"ml-2 font-medium text-green-600",children:i((N=a.basic_calculation)==null?void 0:N.basic_pay)})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Overtime Calculation"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[((T=a.overtime_calculation)==null?void 0:T.regular_ot)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Regular OT (",b(a.overtime_calculation.regular_ot.hours)," hrs @ ",(v=a.overtime_calculation.regular_ot.rate)==null?void 0:v.toFixed(2),"):"]}),e.jsx("span",{className:"font-medium",children:i(a.overtime_calculation.regular_ot.amount)})]}),((z=a.overtime_calculation)==null?void 0:z.rest_day_ot)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Rest Day OT (",b(a.overtime_calculation.rest_day_ot.hours)," hrs @ ",(M=a.overtime_calculation.rest_day_ot.rate)==null?void 0:M.toFixed(2),"):"]}),e.jsx("span",{className:"font-medium",children:i(a.overtime_calculation.rest_day_ot.amount)})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Deductions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[((E=a.deductions_calculation)==null?void 0:E.government)&&e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700 mb-1",children:"Government"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SSS:"}),e.jsx("span",{children:i(a.deductions_calculation.government.sss)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"PhilHealth:"}),e.jsx("span",{children:i(a.deductions_calculation.government.philhealth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"HDMF:"}),e.jsx("span",{children:i(a.deductions_calculation.government.hdmf)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"W/Tax:"}),e.jsx("span",{children:i(a.deductions_calculation.government.withholding_tax)})]})]})]}),((r=a.deductions_calculation)==null?void 0:r.other)&&e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-gray-700 mb-1",children:"Other Deductions"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Advance:"}),e.jsx("span",{children:i(a.deductions_calculation.other.advance)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Store:"}),e.jsx("span",{children:i(a.deductions_calculation.other.charge_store)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Meals:"}),e.jsx("span",{children:i(a.deductions_calculation.other.meals)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late/Under:"}),e.jsx("span",{children:i(a.deductions_calculation.other.late_under)})]})]})]})]})]}),a.summary&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Gross Earnings:"}),e.jsx("span",{className:"font-bold text-green-600",children:i(a.summary.gross_earnings)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deductions:"}),e.jsx("span",{className:"font-bold text-red-600",children:i(a.summary.total_deductions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxable Income:"}),e.jsx("span",{className:"font-medium",children:i(a.summary.taxable_income)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 text-lg font-semibold",children:"Net Pay:"}),e.jsx("span",{className:"font-bold text-blue-600 text-lg",children:i(a.summary.net_pay)})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Creation Info"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Created: ",new Date(s==null?void 0:s.created_at).toLocaleString()]}),e.jsxs("div",{children:["Created by: ",(m=s==null?void 0:s.creator)==null?void 0:m.name]}),(s==null?void 0:s.has_adjustments)&&e.jsx("div",{className:"text-orange-600 font-medium",children:"⚠ Has manual adjustments"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Approval Info"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[(s==null?void 0:s.approved_at)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Approved: ",new Date(s.approved_at).toLocaleString()]}),e.jsxs("div",{children:["Approved by: ",(l=s==null?void 0:s.approver)==null?void 0:l.name]}),(s==null?void 0:s.approval_remarks)&&e.jsxs("div",{className:"text-gray-600",children:["Remarks: ",s.approval_remarks]})]}),(s==null?void 0:s.finalized_at)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Finalized: ",new Date(s.finalized_at).toLocaleString()]}),e.jsxs("div",{children:["Finalized by: ",(R=s==null?void 0:s.finalizer)==null?void 0:R.name]})]}),(s==null?void 0:s.paid_at)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Paid: ",new Date(s.paid_at).toLocaleString()]}),e.jsxs("div",{children:["Paid by: ",(L=s==null?void 0:s.paid_by)==null?void 0:L.name]})]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t",children:e.jsx(o,{variant:"outline",onClick:C,children:"Close"})})]})}):null},ts=({auth:w})=>{const[s,C]=n.useState([]),[B,H]=n.useState(!1),[S,a]=n.useState(""),[k,X]=n.useState(""),[i,b]=n.useState(new Date().getFullYear()),[p,P]=n.useState(new Date().getMonth()+1),[h,D]=n.useState(""),[j,A]=n.useState(""),[f,F]=n.useState(""),[N,T]=n.useState(""),[v,z]=n.useState(""),[M,E]=n.useState([]),[r,m]=n.useState(1),[l,R]=n.useState(1),[L,u]=n.useState(25),[x,J]=n.useState(null),[K,I]=n.useState(null),[V,q]=n.useState(!1),[Ce,Q]=n.useState(!1),[Se,Z]=n.useState([]),G=async()=>{H(!0),a("");try{const t=new URLSearchParams;t.append("year",i),t.append("month",p),t.append("page",r),t.append("per_page",L),h&&t.append("period_type",h),j&&t.append("department",j),f&&t.append("status",f),N&&t.append("approval_status",N),v&&t.append("search",v);const c=await(await fetch("/final-payrolls?"+t.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).json();c.success?(C(c.data),R(c.pagination.last_page),m(c.pagination.current_page),J(c.statistics),E(c.departments)):a("Failed to load final payrolls")}catch(t){console.error("Error loading payrolls:",t),a("Error loading final payrolls: "+(t.message||"Unknown error"))}finally{H(!1)}},$=async t=>{try{const d=await fetch(`/final-payrolls/${t.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(d.ok){const c=await d.json();c.success&&(I(c.data),q(!0))}}catch(d){console.error("Error loading payroll details:",d)}},ee=()=>{G()},se=async()=>{var t;try{const c=await(await fetch("/final-payrolls/available-summaries",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"),"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},body:JSON.stringify({year:i,month:p,period_type:h||"1st_half",department:j})})).json();c.success?(Z(c.data),Q(!0)):a(c.message||"Failed to get available summaries")}catch(d){console.error("Error getting available summaries:",d),a("Failed to get available summaries")}},g=t=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(t||0);return n.useEffect(()=>{G()},[i,p,h,j,f,N,v,r]),e.jsxs(ae,{user:w.user,children:[e.jsx(te,{title:"Final Payroll"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(ie,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Final Payroll"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"💡 Tip: Double-click any row to view detailed payroll information"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(o,{onClick:se,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Generate"]})})]}),S&&e.jsxs(O,{variant:"destructive",className:"mb-4",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),e.jsx(W,{children:S})]}),k&&e.jsxs(O,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(U,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx(W,{className:"text-green-800",children:k})]}),e.jsxs(_,{className:"mb-4",children:[e.jsx(re,{className:"pb-3",children:e.jsx(ce,{className:"text-lg",children:"Filters"})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search by name or ID...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:v,onChange:t=>z(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx("input",{type:"number",min:"2020",max:"2030",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:i,onChange:t=>b(parseInt(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsx("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:p,onChange:t=>P(parseInt(t.target.value)),children:Array.from({length:12},(t,d)=>e.jsx("option",{value:d+1,children:new Date(2024,d,1).toLocaleString("default",{month:"long"})},d+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h,onChange:t=>D(t.target.value),children:[e.jsx("option",{value:"",children:"All Periods"}),e.jsx("option",{value:"1st_half",children:"1st Half (1-15)"}),e.jsx("option",{value:"2nd_half",children:"2nd Half (16-30/31)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:j,onChange:t=>A(t.target.value),children:[e.jsx("option",{value:"",children:"All Departments"}),M.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f,onChange:t=>F(t.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"finalized",children:"Finalized"}),e.jsx("option",{value:"paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approval"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:N,onChange:t=>T(t.target.value),children:[e.jsx("option",{value:"",children:"All Approval Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx(_,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.total_employees||0})]})]})})}),e.jsx(_,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Net Pay"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(x.total_net_pay)})]})]})})}),e.jsx(_,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-8 w-8 text-orange-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Gross"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(x.total_gross_earnings)})]})]})})}),e.jsx(_,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Deductions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(x.total_deductions)})]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[B?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(je,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No final payrolls found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or generate payrolls from posted summaries."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overtime"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approval"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onDoubleClick:()=>$(t),title:"Double-click to view detailed payroll breakdown",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.employee_name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.employee_no})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{children:t.department}),e.jsx("div",{className:"text-xs text-gray-400",children:t.line})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.full_period}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:g(t.basic_pay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:g(t.overtime_pay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:g(t.gross_earnings)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:g(t.total_deductions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold",children:e.jsx("span",{className:"text-lg text-blue-600",children:g(t.net_pay)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.status==="paid"?"bg-green-100 text-green-800":t.status==="finalized"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:[t.status==="paid"&&e.jsx(_e,{className:"h-3 w-3 mr-1"}),t.status==="finalized"&&e.jsx(U,{className:"h-3 w-3 mr-1"}),t.status==="draft"&&e.jsx(Y,{className:"h-3 w-3 mr-1"}),t.status.charAt(0).toUpperCase()+t.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.approval_status==="approved"?"bg-green-100 text-green-800":t.approval_status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[t.approval_status==="approved"&&e.jsx(U,{className:"h-3 w-3 mr-1"}),t.approval_status==="rejected"&&e.jsx(fe,{className:"h-3 w-3 mr-1"}),t.approval_status==="pending"&&e.jsx(Y,{className:"h-3 w-3 mr-1"}),t.approval_status.charAt(0).toUpperCase()+t.approval_status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:d=>{d.stopPropagation(),$(t)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(Ne,{className:"h-4 w-4"})}),t.has_adjustments&&e.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-xs bg-orange-100 text-orange-800",title:"Has manual adjustments",children:e.jsx(ne,{className:"h-3 w-3"})})]})})]},t.id))})]})}),l>1&&e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(o,{onClick:()=>m(Math.max(1,r-1)),disabled:r===1,variant:"outline",size:"sm",children:"Previous"}),e.jsx(o,{onClick:()=>m(Math.min(l,r+1)),disabled:r===l,variant:"outline",size:"sm",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",e.jsx("span",{className:"font-medium",children:r})," of"," ",e.jsx("span",{className:"font-medium",children:l})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx(o,{onClick:()=>m(1),disabled:r===1,variant:"outline",size:"sm",className:"rounded-l-md",children:"First"}),e.jsx(o,{onClick:()=>m(Math.max(1,r-1)),disabled:r===1,variant:"outline",size:"sm",children:"Previous"}),Array.from({length:Math.min(5,l)},(t,d)=>{const c=r<=3?d+1:r>=l-2?l-4+d:r-2+d;return c>0&&c<=l?e.jsx(o,{onClick:()=>m(c),variant:r===c?"default":"outline",size:"sm",className:r===c?"bg-blue-500 text-white":"",children:c},c):null}),e.jsx(o,{onClick:()=>m(Math.min(l,r+1)),disabled:r===l,variant:"outline",size:"sm",children:"Next"}),e.jsx(o,{onClick:()=>m(l),disabled:r===l,variant:"outline",size:"sm",className:"rounded-r-md",children:"Last"})]})})]})]})]})]})})]}),e.jsx(ye,{isOpen:V,payroll:K,onClose:()=>{q(!1),I(null)},onUpdate:ee})]})};export{ts as default};
