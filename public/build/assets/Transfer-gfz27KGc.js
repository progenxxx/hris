import{a as ce,r as i,c as T,j as e,H as me}from"./app-7K62fd2B.js";import{A as xe}from"./AuthenticatedLayout-DQzQmHv9.js";import{S as ue}from"./Sidebar-Bpho9Ubl.js";import{B as V}from"./Button-B-ixrUdq.js";import{A as pe,a as he}from"./alert-Cw6Swk3l.js";import{l as ge}from"./lodash-DtN3SqvZ.js";import{M as G}from"./Modal-Cmmxf1Wx.js";import{C as je}from"./ConfirmModal-C6XdrbgL.js";import{P as be}from"./plus-DDuyej1g.js";import{S as J}from"./search-BmV-knWW.js";import{X as H}from"./x-4sBMcqny.js";import{C as U}from"./circle-check-big-CdHds-fH.js";import{C as X}from"./circle-x-2rCUmP_B.js";import{C as fe}from"./clock-r6FcyLKi.js";import{S as ve}from"./save-BqIq9Yvz.js";import{C as ye}from"./check-BTfeYE2Q.js";import"./ApplicationLogo-IpRttWhS.js";import"./Dropdown-Yo6Rw43S.js";import"./transition-Di9UDWSH.js";import"./createLucideIcon-BK5csKvN.js";/* empty css                */import"./users-D-OfZtV9.js";import"./file-text-B0cEX_Vi.js";import"./calendar-CWo9dUpk.js";import"./clsx-B-dksMZM.js";import"./index-DnL5dnpl.js";const Ne=({message:p,type:j,onClose:a})=>{i.useEffect(()=>{const b=setTimeout(()=>{a()},3e3);return()=>clearTimeout(b)},[a]);const r=j==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200",d=j==="success"?"text-green-700":"text-red-700",y=j==="success"?e.jsx(ye,{className:"h-5 w-5 text-green-500"}):e.jsx(X,{className:"h-5 w-5 text-red-500"});return e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center p-4 mb-4 rounded-lg shadow-md border ${r}`,role:"alert",children:[e.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",children:y}),e.jsx("div",{className:`ml-3 text-sm font-normal ${d}`,children:p}),e.jsx("button",{type:"button",className:`ml-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 p-1.5 inline-flex h-8 w-8 ${d} hover:bg-gray-100`,onClick:a,"aria-label":"Close",children:e.jsx(H,{className:"w-5 h-5"})})]})},K=({status:p})=>p==="approved"?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Approved"]}):p==="rejected"?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),"Rejected"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Pending"]}),z=({isOpen:p,onClose:j,title:a,transfer:r,employees:d,departments:y,lines:b=[],onChange:h,onSubmit:L,mode:C="create",errorMessages:o={}})=>{const n=C==="view",E=Array.isArray(b)&&b.length>0,[N,B]=i.useState(""),[c,$]=i.useState([]);return i.useEffect(()=>{if(!Array.isArray(d)){$([]);return}if(!N.trim()){$(d);return}const s=N.toLowerCase(),F=d.filter(g=>{const x=(g.Fname||"").toLowerCase(),w=(g.Lname||"").toLowerCase(),k=(g.idno||"").toLowerCase(),R=`${x} ${w}`.toLowerCase(),D=`${w} ${x}`.toLowerCase();return x.includes(s)||w.includes(s)||k.includes(s)||R.includes(s)||D.includes(s)}),S=F.find(g=>{const x=(g.Fname||"").toLowerCase(),w=(g.Lname||"").toLowerCase(),k=(g.idno||"").toLowerCase(),R=`${x} ${w}`.toLowerCase(),D=`${w} ${x}`.toLowerCase(),W=`${w}, ${x} (${k})`.toLowerCase();return x===s||w===s||k===s||R===s||D===s||W===s});S&&r.employee_id!==S.id&&h({...r,employee_id:S.id}),$(F)},[N,d,h,r.employee_id]),i.useEffect(()=>{p&&(B(""),$(d||[]))},[p,d]),e.jsx(G,{show:p,onClose:j,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx(H,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),n?e.jsx("div",{className:"p-2 border rounded bg-gray-100",children:r.employee?`${r.employee.Lname||""}, ${r.employee.Fname||""} ${r.employee.idno?`(${r.employee.idno})`:""}`:"Unknown Employee"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Search employees by name or ID...",value:N,onChange:s=>B(s.target.value)}),r.employee_id&&c.length>0&&c.find(s=>s.id===r.employee_id)&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(U,{className:"h-4 w-4 text-green-500"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[c.length===0?"No matching employees found":c.length===1?"1 employee found":`${c.length} employees found`,r.employee_id&&c.find(s=>s.id===r.employee_id)&&" - Employee selected"]}),e.jsxs("select",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.employee_id?"border-red-500":""}`,value:r.employee_id||"",onChange:s=>h({...r,employee_id:s.target.value}),required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Select Employee"}),Array.isArray(c)&&c.length>0?c.map(s=>e.jsxs("option",{value:s.id,children:[s.Lname||"",", ",s.Fname||""," ",s.idno?`(${s.idno})`:""]},s.id||`emp-${Math.random()}`)):N?e.jsx("option",{value:"",disabled:!0,children:"No matching employees found"}):e.jsx("option",{value:"",disabled:!0,children:"No employees available"})]})]}),o.employee_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.employee_id})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Department"}),e.jsxs("select",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.from_department?"border-red-500":""}`,value:r.from_department||"",onChange:s=>h({...r,from_department:s.target.value}),required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Select Department"}),y.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),o.from_department&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.from_department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Department"}),e.jsxs("select",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.to_department?"border-red-500":""}`,value:r.to_department||"",onChange:s=>h({...r,to_department:s.target.value}),required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Select Department"}),y.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),o.to_department&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.to_department})]})]}),E?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Line"}),e.jsxs("select",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.from_line?"border-red-500":""}`,value:r.from_line||"",onChange:s=>h({...r,from_line:s.target.value}),disabled:n,children:[e.jsx("option",{value:"",children:"Select Line"}),b.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),o.from_line&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.from_line})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Line"}),e.jsxs("select",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.to_line?"border-red-500":""}`,value:r.to_line||"",onChange:s=>h({...r,to_line:s.target.value}),disabled:n,children:[e.jsx("option",{value:"",children:"Select Line"}),b.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),o.to_line&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.to_line})]})]}):e.jsx("div",{className:"mt-2 mb-2",children:e.jsx(pe,{children:e.jsx(he,{children:"Production line selection is currently unavailable. You can still create a transfer without specifying production lines."})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),e.jsx("input",{type:"date",className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.transfer_date?"border-red-500":""}`,value:r.transfer_date||"",onChange:s=>h({...r,transfer_date:s.target.value}),required:!0,disabled:n}),o.transfer_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.transfer_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsx("textarea",{className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n?"bg-gray-100":""} ${o.reason?"border-red-500":""}`,value:r.reason||"",onChange:s=>h({...r,reason:s.target.value}),placeholder:"Reason for transfer",rows:"3",required:!0,disabled:n}),o.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.reason})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{status:r.status})})]}),r.approved_by&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved By"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.approver?r.approver.name:"Unknown User"})]}),r.approved_at&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approved At"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:new Date(r.approved_at).toLocaleString()})]}),r.remarks&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900 whitespace-pre-line",children:r.remarks})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>j(!1),className:"mr-2",children:n?"Close":"Cancel"}),!n&&e.jsxs(V,{type:"submit",className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),C==="create"?"Save Transfer":"Update Transfer"]})]})]})]})})},we=({isOpen:p,onClose:j,transfer:a,onSubmit:r})=>{var C,o,n;const[d,y]=i.useState("approved"),[b,h]=i.useState("");i.useEffect(()=>{p&&(y("approved"),h(""))},[p]);const L=E=>{E.preventDefault(),r({status:d,remarks:b})};return e.jsx(G,{show:p,onClose:j,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Review Transfer Request"}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-500",children:e.jsx(H,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[(C=a==null?void 0:a.employee)==null?void 0:C.Fname," ",(o=a==null?void 0:a.employee)==null?void 0:o.Lname," (",(n=a==null?void 0:a.employee)==null?void 0:n.idno,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Department"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50",children:a==null?void 0:a.from_department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Department"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50",children:a==null?void 0:a.to_department})]})]}),((a==null?void 0:a.from_line)||(a==null?void 0:a.to_line))&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(a==null?void 0:a.from_line)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Line"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50",children:a==null?void 0:a.from_line})]}),(a==null?void 0:a.to_line)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Line"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50",children:a==null?void 0:a.to_line})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50",children:new Date(a==null?void 0:a.transfer_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsx("div",{className:"p-2 border rounded bg-gray-50 whitespace-pre-line",children:a==null?void 0:a.reason})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Decision"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"approved",checked:d==="approved",onChange:()=>y("approved"),className:"form-radio h-4 w-4 text-green-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Approve"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"rejected",checked:d==="rejected",onChange:()=>y("rejected"),className:"form-radio h-4 w-4 text-red-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Reject"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),e.jsx("textarea",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:b,onChange:E=>h(E.target.value),placeholder:"Add your comments or reasons for the decision",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(V,{type:"button",variant:"outline",onClick:j,className:"mr-2",children:"Cancel"}),e.jsx(V,{type:"submit",className:d==="approved"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700",children:d==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Approve Transfer"]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Reject Transfer"]})})]})]})]})})},Je=()=>{const{auth:p}=ce().props;p!=null&&p.user;const[j,a]=i.useState([]),[r,d]=i.useState([]),[y,b]=i.useState([]),[h,L]=i.useState([]),[C,o]=i.useState(!0),[n,E]=i.useState(""),[N,B]=i.useState("all"),[c,$]=i.useState({from:"",to:""}),[s,F]=i.useState({visible:!1,message:"",type:"success"}),S={employee_id:"",from_department:"",to_department:"",from_line:"",to_line:"",transfer_date:"",reason:""},[g,x]=i.useState(S),[w,k]=i.useState({}),[R,D]=i.useState(!1),[W,q]=i.useState(!1),[Q,Y]=i.useState(!1),[Z,I]=i.useState(!1),[_,M]=i.useState({isOpen:!1,title:"",message:"",confirmText:"",confirmVariant:"destructive",onConfirm:()=>{}}),A=i.useCallback(async()=>{var t,m;o(!0);try{const l=await Promise.allSettled([T.get("/transfers/list",{params:{search:n,status:N!=="all"?N:null,date_from:c.from||null,date_to:c.to||null}}),T.get("/employees/list",{params:{active_only:!0}}),T.get("/departments"),T.get("/lines").catch(u=>(console.error("Error loading lines:",u),{data:{data:[]}}))]);l[0].status==="fulfilled"?a(l[0].value.data.data||[]):(console.error("Error loading transfers:",l[0].reason),a([]),f("Error loading transfers. Please try again later.","error")),l[1].status==="fulfilled"?d(l[1].value.data.data||[]):(console.error("Error loading employees:",l[1].reason),d([]),f("Error loading employees. Please try again later.","error")),l[2].status==="fulfilled"?b(l[2].value.data.data||[]):(console.error("Error loading departments:",l[2].reason),b([]),f("Error loading departments. Please try again later.","error")),l[3].status==="fulfilled"?L(l[3].value.data.data||[]):(console.error("Error loading lines:",l[3].reason),L([]),l[0].status==="fulfilled"&&l[1].status==="fulfilled"&&l[2].status==="fulfilled"&&f("Production line data is unavailable. Some features may be limited.","error"))}catch(l){console.error("Error loading data:",l),f("Error loading data: "+(((m=(t=l.response)==null?void 0:t.data)==null?void 0:m.message)||l.message),"error"),a([]),d([]),b([]),L([])}finally{o(!1)}},[n,N,c]);i.useEffect(()=>{A()},[A]);const f=(t,m="success")=>{F({visible:!0,message:t,type:m})},ee=()=>{F({...s,visible:!1})},se=ge.debounce(t=>{E(t)},300),te=()=>{x(S),k({}),D(!0)},ae=t=>{x({...t}),k({}),q(!0)},re=t=>{x({...t}),Y(!0)},le=t=>{x({...t}),I(!0)},oe=async t=>{var m,l,u,O,P;t.preventDefault(),k({});try{const v=await T.post("/transfers",g);await A(),x(S),D(!1),f("Transfer created successfully")}catch(v){console.error("Error creating transfer:",v),((m=v.response)==null?void 0:m.status)===422&&((u=(l=v.response)==null?void 0:l.data)!=null&&u.errors)?k(v.response.data.errors):f(((P=(O=v.response)==null?void 0:O.data)==null?void 0:P.message)||"Error creating transfer","error")}},ie=async t=>{var m,l,u,O,P;t.preventDefault(),k({});try{const v=await T.put(`/transfers/${g.id}`,g);await A(),x(S),q(!1),f("Transfer updated successfully")}catch(v){console.error("Error updating transfer:",v),((m=v.response)==null?void 0:m.status)===422&&((u=(l=v.response)==null?void 0:l.data)!=null&&u.errors)?k(v.response.data.errors):f(((P=(O=v.response)==null?void 0:O.data)==null?void 0:P.message)||"Error updating transfer","error")}},ne=async t=>{var m,l;try{const u=await T.post(`/transfers/${g.id}/status`,t);await A(),I(!1),f(`Transfer ${t.status==="approved"?"approved":"rejected"} successfully`)}catch(u){console.error("Error updating transfer status:",u),f(((l=(m=u.response)==null?void 0:m.data)==null?void 0:l.message)||"Error updating transfer status","error")}},de=t=>{M({isOpen:!0,title:"Delete Transfer",message:`Are you sure you want to delete this transfer for ${t.employee.Fname} ${t.employee.Lname}? This action cannot be undone.`,confirmText:"Delete",confirmVariant:"destructive",onConfirm:async()=>{var m,l;try{await T.delete(`/transfers/${t.id}`),await A(),M({..._,isOpen:!1}),f("Transfer deleted successfully")}catch(u){console.error("Error deleting transfer:",u),M({..._,isOpen:!1}),f(((l=(m=u.response)==null?void 0:m.data)==null?void 0:l.message)||"Error deleting transfer","error")}}})};return e.jsxs(xe,{children:[e.jsx(me,{title:"Employee Transfers"}),e.jsxs("div",{className:"flex min-h-screen bg-gray-50/50",children:[e.jsx(ue,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.visible&&e.jsx(Ne,{message:s.message,type:s.type,onClose:ee}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Employee Transfers"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee department and line transfers."})]}),e.jsxs(V,{onClick:te,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),"New Transfer"]})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Search by employee or department...",onChange:t=>se(t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:N,onChange:t=>B(t.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("input",{type:"date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.from,onChange:t=>$({...c,from:t.target.value}),placeholder:"From"})}),e.jsx("div",{children:e.jsx("input",{type:"date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.to,onChange:t=>$({...c,to:t.target.value}),placeholder:"To"})})]})]})]})}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-7 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("div",{className:"px-6 py-3 col-span-1",children:"Actions"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"Status"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"Employee"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"Transfer Date"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"From"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"To"}),e.jsx("div",{className:"px-6 py-3 col-span-1",children:"Reason"})]}),C&&e.jsx("div",{className:"py-16 text-center text-gray-500",children:"Loading..."}),!C&&j.length===0&&e.jsx("div",{className:"py-16 text-center text-gray-500",children:n||N!=="all"||c.from||c.to?"No transfers found matching your filters.":"No transfers found. Create a new transfer to get started."}),!C&&j.length>0&&e.jsx("div",{className:"divide-y divide-gray-200",children:j.map(t=>{var m,l,u;return e.jsxs("div",{className:"grid grid-cols-7 items-center hover:bg-gray-50",children:[e.jsx("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>re(t),className:"text-gray-400 hover:text-gray-500",title:"View",type:"button",children:e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ae(t),className:"text-gray-400 hover:text-gray-500",title:"Edit",type:"button",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>le(t),className:"text-gray-400 hover:text-gray-500",title:"Review",type:"button",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("button",{onClick:()=>de(t),className:"text-gray-400 hover:text-red-500",title:"Delete",type:"button",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),e.jsx("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap",children:e.jsx(K,{status:t.status})}),e.jsxs("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[(m=t.employee)==null?void 0:m.Lname,", ",(l=t.employee)==null?void 0:l.Fname]}),e.jsx("div",{className:"text-sm text-gray-500",children:(u=t.employee)==null?void 0:u.idno})]}),e.jsx("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap text-sm text-gray-500",children:new Date(t.transfer_date).toLocaleDateString()}),e.jsxs("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.from_department}),t.from_line&&e.jsx("div",{className:"text-xs text-gray-500",children:t.from_line})]}),e.jsxs("div",{className:"px-6 py-4 col-span-1 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.to_department}),t.to_line&&e.jsx("div",{className:"text-xs text-gray-500",children:t.to_line})]}),e.jsx("div",{className:"px-6 py-4 col-span-1 text-sm text-gray-500 truncate",children:t.reason})]},t.id)})})]})]})})]}),e.jsx(z,{isOpen:R,onClose:()=>D(!1),title:"Create New Transfer",transfer:g,employees:r,departments:y,lines:h,onChange:x,onSubmit:oe,mode:"create",errorMessages:w}),e.jsx(z,{isOpen:W,onClose:()=>q(!1),title:"Edit Transfer",transfer:g,employees:r,departments:y,lines:h,onChange:x,onSubmit:ie,mode:"edit",errorMessages:w}),e.jsx(z,{isOpen:Q,onClose:()=>Y(!1),title:"View Transfer Details",transfer:g,employees:r,departments:y,lines:h,onChange:x,onSubmit:()=>{},mode:"view",errorMessages:{}}),e.jsx(we,{isOpen:Z,onClose:()=>I(!1),transfer:g,onSubmit:ne}),e.jsx(je,{isOpen:_.isOpen,onClose:()=>M({..._,isOpen:!1}),title:_.title,message:_.message,confirmText:_.confirmText,confirmVariant:_.confirmVariant,onConfirm:_.onConfirm})]})};export{Je as default};
