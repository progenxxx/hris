import{r,j as e,b as pe}from"./app-7K62fd2B.js";import{R as E}from"./refresh-cw-DqcGqKqT.js";import{P as g}from"./plus-DDuyej1g.js";import{S as be}from"./search-BmV-knWW.js";import{C as M}from"./calendar-CWo9dUpk.js";import"./createLucideIcon-BK5csKvN.js";const Oe=({employees:B})=>{var P,O,z,R,U,D,W,q,H,Q,G,J,K,X,Z,ee,se,ae,te,le,de,ne,ie,re,ce,oe,me,xe,he,ue,ge,ye;const[y,ve]=r.useState(""),[k,je]=r.useState(B||[]),[h,Ne]=r.useState(B||[]),[i,we]=r.useState(null),[ke,f]=r.useState(!1),[p,V]=r.useState(!1),[t,F]=r.useState(null),[c,_e]=r.useState(new Date().getFullYear()),[n,b]=r.useState({employee_id:"",employee_name:"",leave_type:"sick",days:"",year:new Date().getFullYear(),notes:""}),[Le,_]=r.useState(!1),[m,L]=r.useState(!1),[Se,S]=r.useState(!1),[l,u]=r.useState({employee_ids:[],leave_type:"sick",days:"",year:new Date().getFullYear(),notes:""}),[o,A]=r.useState(!1),$=new Date().getFullYear(),v=[];for(let s=$-3;s<=$+3;s++)v.push(s);const C=async s=>{V(!0);try{const a=await fetch(`/slvl/employees-bank-data?year=${s}`);if(!a.ok)throw new Error("Failed to fetch employees bank data");const d=await a.json();je(d.employees)}catch(a){console.error("Error fetching employees bank data:",a),alert("Failed to fetch employees bank data for the selected year. Please try again.")}finally{V(!1)}};r.useEffect(()=>{if(!k)return;let s=[...k];if(y){const a=y.toLowerCase();s=s.filter(d=>{var x,fe;return d.name.toLowerCase().includes(a)||((x=d.idno)==null?void 0:x.toString().includes(a))||((fe=d.department)==null?void 0:fe.toLowerCase().includes(a))})}Ne(s)},[y,k]);const Y=async s=>{we(s),f(!0);try{const a=await fetch(`/slvl/bank/${s.id}?year=${c}`);if(!a.ok)throw new Error("Failed to fetch SLVL bank details");const d=await a.json();F(d)}catch(a){console.error("Error fetching SLVL bank details:",a),alert("Failed to fetch SLVL bank details. Please try again.")}finally{f(!1)}},Ae=async s=>{if(_e(s),await C(s),i){f(!0);try{const a=await fetch(`/slvl/bank/${i.id}?year=${s}`);if(!a.ok)throw new Error("Failed to fetch SLVL bank details");const d=await a.json();F(d)}catch(a){console.error("Error fetching SLVL bank details:",a),alert("Failed to fetch SLVL bank details. Please try again.")}finally{f(!1)}}},j=(s,a="sick")=>{b({employee_id:s.id,employee_name:s.name,leave_type:a,days:"",year:c,notes:""}),_(!0)},I=(s="sick")=>{u({employee_ids:[],leave_type:s,days:"",year:c,notes:""}),S(!0)},N=(s,a)=>{b(d=>({...d,[s]:a}))},w=(s,a)=>{u(d=>({...d,[s]:a}))},T=s=>{u(a=>({...a,employee_ids:a.employee_ids.includes(s)?a.employee_ids.filter(d=>d!==s):[...a.employee_ids,s]}))},Ce=()=>{const s=h.map(a=>a.id);u(a=>({...a,employee_ids:a.employee_ids.length===s.length?[]:s}))},Ee=()=>{if(!n.days||n.days<=0){alert("Please enter a valid number of days");return}if(n.days>100){alert("Maximum 100 days can be added at once");return}L(!0);const s={employee_id:parseInt(n.employee_id),leave_type:n.leave_type,days:parseFloat(n.days),year:parseInt(n.year),notes:n.notes||""};pe.post(route("slvl.addDaysToBank"),s,{preserveScroll:!0,onSuccess:async a=>{var d,x;L(!1),_(!1),(x=(d=a.props)==null?void 0:d.flash)!=null&&x.message?alert(a.props.flash.message):alert(`Successfully added ${n.days} ${n.leave_type} leave days to ${n.employee_name}'s bank`),await C(c),i&&i.id===n.employee_id&&Y(i),b({employee_id:"",employee_name:"",leave_type:"sick",days:"",year:c,notes:""})},onError:a=>{if(L(!1),console.error("Error adding days:",a),a&&typeof a=="object"){const d=Object.values(a).flat();alert("Error: "+d.join(", "))}else alert("An error occurred while adding days")}})},Me=()=>{if(!l.days||l.days<=0){alert("Please enter a valid number of days");return}if(l.days>100){alert("Maximum 100 days can be added at once");return}if(l.employee_ids.length===0){alert("Please select at least one employee");return}A(!0);const s={employee_ids:l.employee_ids,leave_type:l.leave_type,days:parseFloat(l.days),year:parseInt(l.year),notes:l.notes||""};pe.post(route("slvl.bulkAddDaysToBank"),s,{preserveScroll:!0,onSuccess:async a=>{var d,x;A(!1),S(!1),(x=(d=a.props)==null?void 0:d.flash)!=null&&x.message?alert(a.props.flash.message):alert(`Successfully added ${l.days} ${l.leave_type} leave days to ${l.employee_ids.length} employee(s)`),await C(c),u({employee_ids:[],leave_type:"sick",days:"",year:c,notes:""})},onError:a=>{if(A(!1),console.error("Error bulk adding days:",a),a&&typeof a=="object"){const d=Object.values(a).flat();alert("Error: "+d.join(", "))}else alert("An error occurred while bulk adding days")}})},Be=()=>{m||(_(!1),b({employee_id:"",employee_name:"",leave_type:"sick",days:"",year:c,notes:""}))},Ve=()=>{o||(S(!1),u({employee_ids:[],leave_type:"sick",days:"",year:c,notes:""}))};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"SLVL Bank Manager"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View and manage employees' sick leave and vacation leave bank"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"year-select",className:"text-sm font-medium text-gray-700",children:"Year:"}),e.jsx("select",{id:"year-select",className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:c,onChange:s=>Ae(parseInt(s.target.value)),disabled:p,children:v.map(s=>e.jsx("option",{value:s,children:s},s))}),p&&e.jsx(E,{className:"h-4 w-4 text-indigo-500 animate-spin"}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>I("sick"),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm flex items-center space-x-1 transition-colors",title:"Bulk Add Sick Leave",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Bulk Add SL"})]}),e.jsxs("button",{onClick:()=>I("vacation"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center space-x-1 transition-colors",title:"Bulk Add Vacation Leave",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Bulk Add VL"})]})]})]})]})}),e.jsxs("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[e.jsxs("h4",{className:"font-medium mb-3",children:["Employees (",h.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(be,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search employees...",className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:y,onChange:s=>ve(s.target.value),disabled:p})]})]}),e.jsxs("div",{className:"overflow-auto max-h-[500px] relative",children:[p&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-6 w-6 text-indigo-500 animate-spin mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Loading employees..."})]})}),h.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(be,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No employees found"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:h.map(s=>e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(i==null?void 0:i.id)===s.id?"bg-indigo-50 border-r-2 border-indigo-500":""}`,onClick:()=>Y(s),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",s.idno]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.department})]}),e.jsxs("div",{className:"ml-2 flex flex-col items-end space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"SL:"}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${s.sick_leave_days>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:s.sick_leave_days||0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"VL:"}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${s.vacation_leave_days>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:s.vacation_leave_days||0})]})]})]})},s.id))})]})]}),e.jsx("div",{className:"lg:col-span-2 border rounded-lg",children:i?ke?e.jsx("div",{className:"h-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-8 w-8 text-indigo-500 animate-spin mx-auto mb-4"}),e.jsx("span",{className:"text-gray-600",children:"Loading bank details..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i.name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1 space-y-1",children:[e.jsxs("div",{children:["Employee ID: ",e.jsx("span",{className:"font-medium",children:i.idno})]}),e.jsxs("div",{children:["Department: ",e.jsx("span",{className:"font-medium",children:i.department})]}),e.jsxs("div",{children:["Position: ",e.jsx("span",{className:"font-medium",children:i.position})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Viewing Year"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:c})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"Sick Leave"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Medical leave bank"})]})]}),e.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md text-sm flex items-center space-x-1 transition-colors",onClick:()=>j(i,"sick"),children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Total Days"}),e.jsx("span",{className:"text-2xl font-bold text-blue-900",children:((O=(P=t==null?void 0:t.slvl_banks)==null?void 0:P.sick)==null?void 0:O.total_days)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-600",children:"Used Days"}),e.jsx("span",{className:"text-lg font-semibold text-blue-800",children:((R=(z=t==null?void 0:t.slvl_banks)==null?void 0:z.sick)==null?void 0:R.used_days)||0})]}),e.jsx("div",{className:"border-t border-blue-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-800 font-semibold",children:"Available"}),e.jsx("span",{className:"text-3xl font-bold text-blue-900",children:((D=(U=t==null?void 0:t.slvl_banks)==null?void 0:U.sick)==null?void 0:D.remaining_days)||0})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-blue-600 mb-1",children:[e.jsx("span",{children:"Usage"}),e.jsxs("span",{children:[Math.round((((q=(W=t==null?void 0:t.slvl_banks)==null?void 0:W.sick)==null?void 0:q.used_days)||0)/Math.max(((Q=(H=t==null?void 0:t.slvl_banks)==null?void 0:H.sick)==null?void 0:Q.total_days)||1,1)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((((J=(G=t==null?void 0:t.slvl_banks)==null?void 0:G.sick)==null?void 0:J.used_days)||0)/Math.max(((X=(K=t==null?void 0:t.slvl_banks)==null?void 0:K.sick)==null?void 0:X.total_days)||1,1)*100,100)}%`}})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800",children:"Vacation Leave"}),e.jsx("p",{className:"text-sm text-green-600",children:"Rest and recreation"})]})]}),e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-md text-sm flex items-center space-x-1 transition-colors",onClick:()=>j(i,"vacation"),children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Total Days"}),e.jsx("span",{className:"text-2xl font-bold text-green-900",children:((ee=(Z=t==null?void 0:t.slvl_banks)==null?void 0:Z.vacation)==null?void 0:ee.total_days)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-600",children:"Used Days"}),e.jsx("span",{className:"text-lg font-semibold text-green-800",children:((ae=(se=t==null?void 0:t.slvl_banks)==null?void 0:se.vacation)==null?void 0:ae.used_days)||0})]}),e.jsx("div",{className:"border-t border-green-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-800 font-semibold",children:"Available"}),e.jsx("span",{className:"text-3xl font-bold text-green-900",children:((le=(te=t==null?void 0:t.slvl_banks)==null?void 0:te.vacation)==null?void 0:le.remaining_days)||0})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-green-600 mb-1",children:[e.jsx("span",{children:"Usage"}),e.jsxs("span",{children:[Math.round((((ne=(de=t==null?void 0:t.slvl_banks)==null?void 0:de.vacation)==null?void 0:ne.used_days)||0)/Math.max(((re=(ie=t==null?void 0:t.slvl_banks)==null?void 0:ie.vacation)==null?void 0:re.total_days)||1,1)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((((oe=(ce=t==null?void 0:t.slvl_banks)==null?void 0:ce.vacation)==null?void 0:oe.used_days)||0)/Math.max(((xe=(me=t==null?void 0:t.slvl_banks)==null?void 0:me.vacation)==null?void 0:xe.total_days)||1,1)*100,100)}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Bank Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sick Leave Notes"}),e.jsx("div",{className:"text-sm text-gray-600 bg-white p-2 rounded border",children:((ue=(he=t==null?void 0:t.slvl_banks)==null?void 0:he.sick)==null?void 0:ue.notes)||"No notes available"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Vacation Leave Notes"}),e.jsx("div",{className:"text-sm text-gray-600 bg-white p-2 rounded border",children:((ye=(ge=t==null?void 0:t.slvl_banks)==null?void 0:ge.vacation)==null?void 0:ye.notes)||"No notes available"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{className:"bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded-md text-sm flex items-center space-x-1 transition-colors",onClick:()=>j(i,"sick"),children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Sick Leave"})]}),e.jsxs("button",{className:"bg-green-100 hover:bg-green-200 text-green-800 px-3 py-2 rounded-md text-sm flex items-center space-x-1 transition-colors",onClick:()=>j(i,"vacation"),children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Vacation Leave"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"To view detailed leave history, go to the SLVL Requests tab."})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employee selected"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select an employee from the list to view their SLVL bank details."})]})})})]}),Le&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(M,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Days to SLVL Bank"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Add ",n.leave_type==="sick"?"sick leave":"vacation leave"," days to ",e.jsx("strong",{children:n.employee_name}),"'s bank for year ",n.year,"."]})}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:n.leave_type,onChange:s=>N("leave_type",s.target.value),disabled:m,children:[e.jsx("option",{value:"sick",children:"Sick Leave"}),e.jsx("option",{value:"vacation",children:"Vacation Leave"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Days to Add ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0.5",max:"100",step:"0.5",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:n.days,onChange:s=>N("days",s.target.value),placeholder:"Enter number of days",disabled:m}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 100 days can be added at once"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:n.year,onChange:s=>N("year",parseInt(s.target.value)),disabled:m,children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",value:n.notes,onChange:s=>N("notes",s.target.value),placeholder:"Explain why these days are being added (e.g., Annual allocation, Adjustment, etc.)",disabled:m})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ee,disabled:!n.days||n.days<=0||m,children:m?"Adding Days...":"Add Days"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:Be,disabled:m,children:"Cancel"})]})]})]})}),Se&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(M,{className:"h-6 w-6 text-indigo-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Bulk Add ",l.leave_type==="sick"?"Sick Leave":"Vacation Leave"," Days"]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Add ",l.leave_type==="sick"?"sick leave":"vacation leave"," days to multiple employees for year ",l.year,"."]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Leave Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:l.leave_type,onChange:s=>w("leave_type",s.target.value),disabled:o,children:[e.jsx("option",{value:"sick",children:"Sick Leave"}),e.jsx("option",{value:"vacation",children:"Vacation Leave"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Days to Add ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0.5",max:"100",step:"0.5",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:l.days,onChange:s=>w("days",s.target.value),placeholder:"Enter number of days",disabled:o}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 100 days can be added at once"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",value:l.year,onChange:s=>w("year",parseInt(s.target.value)),disabled:o,children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"3",value:l.notes,onChange:s=>w("notes",s.target.value),placeholder:"Explain why these days are being added (e.g., Annual allocation, Adjustment, etc.)",disabled:o})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-800",children:["Selected: ",l.employee_ids.length," employee(s)"]}),l.days&&l.employee_ids.length>0&&e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Total days to be added: ",l.days*l.employee_ids.length," days across ",l.employee_ids.length," employee(s)"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Select Employees ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("button",{type:"button",onClick:Ce,className:"text-sm text-indigo-600 hover:text-indigo-800",disabled:o,children:l.employee_ids.length===h.length?"Deselect All":"Select All"})]}),e.jsx("div",{className:"border rounded-md max-h-80 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No employees found"}):e.jsx("div",{className:"divide-y divide-gray-200",children:h.map(s=>e.jsx("div",{className:`p-3 hover:bg-gray-50 cursor-pointer transition-colors ${l.employee_ids.includes(s.id)?"bg-indigo-50 border-l-2 border-indigo-500":""}`,onClick:()=>T(s.id),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.employee_ids.includes(s.id),onChange:()=>T(s.id),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",disabled:o}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",s.idno," • ",s.department]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["SL: ",e.jsx("span",{className:`font-medium ${s.sick_leave_days>0?"text-blue-600":"text-gray-600"}`,children:s.sick_leave_days||0})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["VL: ",e.jsx("span",{className:`font-medium ${s.vacation_leave_days>0?"text-green-600":"text-gray-600"}`,children:s.vacation_leave_days||0})]})]})]})]})},s.id))})})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:Me,disabled:!l.days||l.days<=0||l.employee_ids.length===0||o,children:o?"Adding Days...":`Add Days to ${l.employee_ids.length} Employee(s)`}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",onClick:Ve,disabled:o,children:"Cancel"})]})]})]})})]})};export{Oe as default};
