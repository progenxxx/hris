import{j as e}from"./app-7K62fd2B.js";import{B as u}from"./Button-B-ixrUdq.js";import{A as w,a as _}from"./alert-Cw6Swk3l.js";import{M as T,S as k}from"./sun-DGcVySav.js";import{X as C}from"./x-4sBMcqny.js";import{U as A}from"./user-BKBpk05w.js";import{C as M}from"./calendar-CWo9dUpk.js";import{C as D}from"./clock-r6FcyLKi.js";import{c as I}from"./createLucideIcon-BK5csKvN.js";import{B}from"./building-D6co_3Ut.js";import{I as O}from"./info-CNKW5Dcc.js";import{C as g}from"./circle-check-big-CdHds-fH.js";import{T as o}from"./triangle-alert-BFKAbd31.js";import{S}from"./square-pen-BeqsqNZt.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=I("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),K=({isOpen:f,attendance:s,onClose:h,onEdit:N})=>{if(!f||!s)return null;const a=l=>{if(!l)return"-";try{let t;if(l.includes("T")){const[,c]=l.split("T");t=c.slice(0,5)}else if(l.includes(" ")&&l.includes(":")){const c=l.split(" ");t=c[c.length-1].slice(0,5)}else if(l.includes(":"))t=l.slice(0,5);else return"-";const r=t.split(":");if(r.length<2)return"-";const m=parseInt(r[0],10),x=r[1];if(isNaN(m))return"-";const v=m>=12?"PM":"AM";return`${m%12||12}:${x} ${v}`}catch(t){return console.error("Time formatting error:",t),"-"}},y=l=>{if(!l)return"-";try{const t=new Date(l);return isNaN(t.getTime())?"-":t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return"-"}},n=l=>{if(!l||l<=0)return null;const t=Math.floor(l/60),r=l%60;return t>0?`${t}h ${r}m`:`${r}m`},p=()=>{const l=s.late_minutes||0,t=s.undertime_minutes||0;if(l===0&&t===0)return e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"font-medium",children:"On Time"})]});const r=[];return l>0&&r.push(e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(o,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[n(l)," late"]})]},"late")),t>0&&r.push(e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"font-medium",children:[n(t)," undertime"]})]},"undertime")),e.jsx("div",{className:"space-y-1",children:r})},i=(l,t=2)=>l==null||l===""||isNaN(Number(l))?"-":Number(l).toFixed(t),d=l=>l?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Yes"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"No"}),b=l=>{const t={import:"bg-blue-100 text-blue-800",manual:"bg-yellow-100 text-yellow-800",biometric:"bg-green-100 text-green-800",manual_edit:"bg-red-100 text-red-800",slvl_sync:"bg-indigo-100 text-indigo-800"},r={manual_edit:"Manually Edited",slvl_sync:"SLVL Sync",import:"Imported",biometric:"Biometric",manual:"Manual Entry"},m=t[l]||"bg-gray-100 text-gray-800",x=r[l]||(l?l.charAt(0).toUpperCase()+l.slice(1):"Unknown");return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m}`,children:x})};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-4xl w-full mx-4 md:mx-8 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Attendance Details"}),s.is_nightshift?e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:"Night Shift"})]}):e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Regular Shift"})]})]}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:e.jsx(C,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),"Employee Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:s.employee_name||"Unknown Employee"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:s.idno||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:s.department||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Line"}),e.jsx("p",{className:"text-gray-900",children:s.line||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Date Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:y(s.attendance_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Day"}),e.jsx("p",{className:"text-gray-900",children:s.day||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),"Time Information"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Time In"}),e.jsx("p",{className:"text-gray-900 font-mono",children:a(s.time_in)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Break Out"}),e.jsx("p",{className:"text-gray-900 font-mono",children:a(s.break_out)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Break In"}),e.jsx("p",{className:"text-gray-900 font-mono",children:a(s.break_in)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:s.is_nightshift&&s.next_day_timeout?"Next Day Timeout":"Time Out"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.is_nightshift&&s.next_day_timeout?a(s.next_day_timeout):a(s.time_out)})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"Hours & Attendance Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Hours Worked"}),e.jsxs("p",{className:"text-gray-900 text-lg font-semibold",children:[i(s.hours_worked)," hours"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Late Minutes"}),e.jsx("p",{className:"text-gray-900",children:s.late_minutes>0?e.jsx("span",{className:"text-red-600 font-medium",children:n(s.late_minutes)}):e.jsx("span",{className:"text-green-600 font-medium",children:"On time"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Undertime Minutes"}),e.jsx("p",{className:"text-gray-900",children:s.undertime_minutes>0?e.jsx("span",{className:"text-orange-600 font-medium",children:n(s.undertime_minutes)}):e.jsx("span",{className:"text-green-600 font-medium",children:"Full time"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-yellow-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Attendance Status"}),e.jsx("div",{className:"mt-1",children:p()})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"Payroll Information"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Overtime"}),e.jsx("p",{className:"text-gray-900",children:i(s.overtime)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Travel Order"}),e.jsx("p",{className:"text-gray-900",children:i(s.travel_order,1)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"SLVL"}),e.jsx("p",{className:"text-gray-900",children:i(s.slvl,1)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Holiday"}),e.jsx("p",{className:"text-gray-900",children:i(s.holiday)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"OT Reg Holiday"}),e.jsx("p",{className:"text-gray-900",children:i(s.ot_reg_holiday)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"OT Special Holiday"}),e.jsx("p",{className:"text-gray-900",children:i(s.ot_special_holiday)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Retro Multiplier"}),e.jsx("p",{className:"text-gray-900",children:i(s.retromultiplier)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Offset"}),e.jsx("p",{className:"text-gray-900",children:i(s.offset)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Flags & Status"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"CT (Compensatory Time)"}),e.jsx("div",{className:"mt-1",children:d(s.ct)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"CS (Compressed Schedule)"}),e.jsx("div",{className:"mt-1",children:d(s.cs)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Rest Day"}),e.jsx("div",{className:"mt-1",children:d(s.restday)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Official Business"}),e.jsx("div",{className:"mt-1",children:d(s.ob)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Trip"}),e.jsx("p",{className:"text-gray-900",children:i(s.trip)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Source"}),e.jsx("div",{className:"mt-1",children:b(s.source)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Posting Status"}),e.jsx("div",{className:"mt-1",children:s.posting_status==="posted"?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),"Posted"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(o,{className:"h-3 w-3 mr-1"}),"Not Posted"]})})]})]})]}),s.source==="manual_edit"&&e.jsxs(w,{className:"border-orange-200 bg-orange-50",children:[e.jsx(o,{className:"h-4 w-4 text-orange-600"}),e.jsxs(_,{className:"text-orange-800",children:[e.jsx("strong",{children:"Manual Edit Notice:"})," This attendance record has been manually edited. The late minutes, undertime minutes, and hours worked have been automatically recalculated based on the updated time entries."]})]}),s.remarks&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Remarks"}),e.jsx("p",{className:"text-gray-700",children:s.remarks})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t",children:[e.jsx(u,{variant:"outline",onClick:h,children:"Close"}),e.jsxs(u,{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Edit Attendance"]})]})]})})};export{K as default};
